<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vizora Production Deployment Guide</title>
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--gray-800);
            background: var(--gray-50);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 3rem 2rem;
            text-align: center;
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        nav {
            background: white;
            border-bottom: 1px solid var(--gray-200);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        nav ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0.5rem;
            padding: 1rem;
        }

        nav a {
            color: var(--gray-600);
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            transition: all 0.2s;
            font-size: 0.9rem;
        }

        nav a:hover {
            background: var(--gray-100);
            color: var(--primary);
        }

        section {
            background: white;
            margin: 2rem 0;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        h2 {
            color: var(--gray-900);
            font-size: 1.75rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid var(--primary);
        }

        h3 {
            color: var(--gray-800);
            font-size: 1.25rem;
            margin: 1.5rem 0 1rem;
        }

        h4 {
            color: var(--gray-700);
            font-size: 1.1rem;
            margin: 1.25rem 0 0.75rem;
        }

        p {
            margin-bottom: 1rem;
            color: var(--gray-600);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            font-size: 0.9rem;
        }

        th, td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid var(--gray-200);
        }

        th {
            background: var(--gray-100);
            font-weight: 600;
            color: var(--gray-700);
        }

        tr:hover {
            background: var(--gray-50);
        }

        pre {
            background: var(--gray-900);
            color: #e5e7eb;
            padding: 1.25rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            margin: 1rem 0;
            font-size: 0.85rem;
            line-height: 1.5;
        }

        code {
            font-family: 'Fira Code', 'Monaco', 'Consolas', monospace;
        }

        :not(pre) > code {
            background: var(--gray-100);
            padding: 0.2rem 0.4rem;
            border-radius: 0.25rem;
            color: var(--primary-dark);
            font-size: 0.9em;
        }

        .diagram {
            background: var(--gray-800);
            color: #10b981;
            padding: 1.5rem;
            border-radius: 0.5rem;
            font-family: monospace;
            white-space: pre;
            overflow-x: auto;
            margin: 1rem 0;
            font-size: 0.8rem;
            line-height: 1.4;
        }

        .cost-badge {
            display: inline-block;
            background: var(--success);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.85rem;
            font-weight: 600;
            margin-left: 0.5rem;
        }

        .warning-badge {
            background: var(--warning);
        }

        .info-box {
            background: #eff6ff;
            border-left: 4px solid var(--primary);
            padding: 1rem 1.25rem;
            margin: 1rem 0;
            border-radius: 0 0.5rem 0.5rem 0;
        }

        .info-box h4 {
            color: var(--primary-dark);
            margin-top: 0;
        }

        .warning-box {
            background: #fef3c7;
            border-left: 4px solid var(--warning);
            padding: 1rem 1.25rem;
            margin: 1rem 0;
            border-radius: 0 0.5rem 0.5rem 0;
        }

        .checklist {
            list-style: none;
            padding: 0;
        }

        .checklist li {
            padding: 0.5rem 0;
            padding-left: 2rem;
            position: relative;
        }

        .checklist li::before {
            content: "✓";
            position: absolute;
            left: 0;
            color: var(--success);
            font-weight: bold;
        }

        .phase-card {
            border: 2px solid var(--gray-200);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin: 1rem 0;
            transition: all 0.2s;
        }

        .phase-card:hover {
            border-color: var(--primary);
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.15);
        }

        .phase-card h3 {
            margin-top: 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 1rem 0;
        }

        .card {
            background: var(--gray-50);
            border-radius: 0.75rem;
            padding: 1.25rem;
            border: 1px solid var(--gray-200);
        }

        .card h4 {
            margin-top: 0;
            color: var(--gray-800);
        }

        .step {
            display: flex;
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .step-number {
            flex-shrink: 0;
            width: 2rem;
            height: 2rem;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .step-content {
            flex: 1;
        }

        .step-content h4 {
            margin-top: 0;
        }

        footer {
            text-align: center;
            padding: 2rem;
            color: var(--gray-600);
            border-top: 1px solid var(--gray-200);
            margin-top: 2rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            header {
                padding: 2rem 1rem;
            }

            header h1 {
                font-size: 1.75rem;
            }

            section {
                padding: 1.25rem;
            }

            nav ul {
                flex-direction: column;
                align-items: stretch;
            }

            nav a {
                display: block;
                text-align: center;
            }

            .diagram {
                font-size: 0.7rem;
            }
        }

        @media print {
            nav {
                display: none;
            }

            section {
                break-inside: avoid;
                box-shadow: none;
                border: 1px solid var(--gray-200);
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Vizora Production Deployment Guide</h1>
        <p>Cost-effective deployment strategy for scaling from 100 to 1000+ users</p>
    </header>

    <nav>
        <ul>
            <li><a href="#overview">Overview</a></li>
            <li><a href="#architecture">Architecture</a></li>
            <li><a href="#providers">Providers</a></li>
            <li><a href="#phase1">Phase 1: Startup</a></li>
            <li><a href="#phase2">Phase 2: Growth</a></li>
            <li><a href="#phase3">Phase 3: Scale</a></li>
            <li><a href="#storage">Storage</a></li>
            <li><a href="#security">Security</a></li>
            <li><a href="#costs">Costs</a></li>
        </ul>
    </nav>

    <div class="container">
        <section id="overview">
            <h2>Overview</h2>
            <p>This guide provides a cost-effective deployment strategy for Vizora, starting with 100 users and designed to scale as your business grows.</p>

            <h3>Vizora Components</h3>
            <table>
                <thead>
                    <tr>
                        <th>Component</th>
                        <th>Description</th>
                        <th>Port</th>
                        <th>Resource Needs</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Web Dashboard</strong></td>
                        <td>Next.js frontend</td>
                        <td>3001</td>
                        <td>Low CPU, Low RAM</td>
                    </tr>
                    <tr>
                        <td><strong>API Server</strong></td>
                        <td>NestJS middleware</td>
                        <td>3000</td>
                        <td>Medium CPU, Medium RAM</td>
                    </tr>
                    <tr>
                        <td><strong>Realtime Server</strong></td>
                        <td>WebSocket gateway</td>
                        <td>3002</td>
                        <td>Low CPU, Medium RAM</td>
                    </tr>
                    <tr>
                        <td><strong>PostgreSQL</strong></td>
                        <td>Primary database</td>
                        <td>5432</td>
                        <td>Medium CPU, High RAM</td>
                    </tr>
                    <tr>
                        <td><strong>Redis</strong></td>
                        <td>Cache &amp; pub/sub</td>
                        <td>6379</td>
                        <td>Low CPU, Medium RAM</td>
                    </tr>
                    <tr>
                        <td><strong>File Storage</strong></td>
                        <td>Content uploads</td>
                        <td>-</td>
                        <td>High Storage</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="architecture">
            <h2>Recommended Architecture by Scale</h2>

            <div class="phase-card">
                <h3>Phase 1: Startup (1-100 Users) <span class="cost-badge">$20-50/month</span></h3>
                <div class="diagram">┌─────────────────────────────────────────────────────────┐
│                    Single VPS Server                     │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐        │
│  │   Web App   │ │   API       │ │  Realtime   │        │
│  │   (Next.js) │ │   (NestJS)  │ │  (Socket.io)│        │
│  └─────────────┘ └─────────────┘ └─────────────┘        │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐        │
│  │  PostgreSQL │ │    Redis    │ │   Nginx     │        │
│  └─────────────┘ └─────────────┘ └─────────────┘        │
└─────────────────────────────────────────────────────────┘
                          │
                    Cloudflare CDN
                    (Free tier)</div>
            </div>

            <div class="phase-card">
                <h3>Phase 2: Growth (100-1,000 Users) <span class="cost-badge warning-badge">$100-200/month</span></h3>
                <div class="diagram">┌──────────────┐    ┌──────────────┐    ┌──────────────┐
│  App Server  │    │  App Server  │    │   Database   │
│  (Web+API+RT)│    │  (Web+API+RT)│    │  (Managed)   │
└──────────────┘    └──────────────┘    └──────────────┘
        │                   │                   │
        └───────────────────┼───────────────────┘
                            │
                    Load Balancer
                            │
                    Cloudflare CDN</div>
            </div>

            <div class="phase-card">
                <h3>Phase 3: Scale (1,000+ Users) <span class="cost-badge warning-badge">$300-500/month</span></h3>
                <div class="diagram">┌─────────┐ ┌─────────┐ ┌─────────┐    ┌─────────────┐
│   Web   │ │   Web   │ │   Web   │    │   Managed   │
│ Server  │ │ Server  │ │ Server  │    │  PostgreSQL │
└─────────┘ └─────────┘ └─────────┘    └─────────────┘
     │           │           │                │
     └───────────┼───────────┘                │
                 │                            │
┌─────────┐ ┌─────────┐ ┌─────────┐    ┌─────────────┐
│   API   │ │   API   │ │   API   │    │   Managed   │
│ Server  │ │ Server  │ │ Server  │    │    Redis    │
└─────────┘ └─────────┘ └─────────┘    └─────────────┘
     │           │           │                │
     └───────────┴───────────┴────────────────┘
                        │
              Kubernetes / Docker Swarm
                        │
                Load Balancer + CDN</div>
            </div>
        </section>

        <section id="providers">
            <h2>Cloud Provider Comparison</h2>

            <h3>For Startups (Best Value)</h3>
            <table>
                <thead>
                    <tr>
                        <th>Provider</th>
                        <th>Smallest Plan</th>
                        <th>Specs</th>
                        <th>Monthly Cost</th>
                        <th>Best For</th>
                    </tr>
                </thead>
                <tbody>
                    <tr style="background: #ecfdf5;">
                        <td><strong>Hetzner</strong></td>
                        <td>CX22</td>
                        <td>2 vCPU, 4GB RAM, 40GB</td>
                        <td><strong>€4.50 (~$5)</strong></td>
                        <td>Best price/performance</td>
                    </tr>
                    <tr>
                        <td>DigitalOcean</td>
                        <td>Basic</td>
                        <td>2 vCPU, 4GB RAM, 80GB</td>
                        <td>$24</td>
                        <td>Easy to use</td>
                    </tr>
                    <tr>
                        <td>Vultr</td>
                        <td>Cloud Compute</td>
                        <td>2 vCPU, 4GB RAM, 80GB</td>
                        <td>$24</td>
                        <td>Global locations</td>
                    </tr>
                    <tr>
                        <td>Linode</td>
                        <td>Shared</td>
                        <td>2 vCPU, 4GB RAM, 80GB</td>
                        <td>$24</td>
                        <td>Good support</td>
                    </tr>
                    <tr>
                        <td>Railway</td>
                        <td>Pro</td>
                        <td>Usage-based</td>
                        <td>~$20-50</td>
                        <td>Zero DevOps</td>
                    </tr>
                    <tr>
                        <td>AWS Lightsail</td>
                        <td>Small</td>
                        <td>2 vCPU, 4GB RAM, 80GB</td>
                        <td>$36</td>
                        <td>AWS ecosystem</td>
                    </tr>
                </tbody>
            </table>

            <div class="info-box">
                <h4>Recommendation: Hetzner + Cloudflare</h4>
                <p><strong>Why Hetzner?</strong> 3-4x cheaper than AWS/GCP/Azure for equivalent specs. Excellent performance, great for EU GDPR compliance, and reliable uptime (99.9%+ SLA).</p>
                <p><strong>Why Cloudflare?</strong> Free CDN and DDoS protection, free SSL certificates, caches static assets globally, and significantly reduces server load.</p>
            </div>
        </section>

        <section id="phase1">
            <h2>Phase 1: Startup Deployment <span class="cost-badge">$20-50/month</span></h2>

            <h3>Option A: Single VPS with Docker (Recommended)</h3>

            <h4>Cost Breakdown</h4>
            <table>
                <thead>
                    <tr>
                        <th>Item</th>
                        <th>Provider</th>
                        <th>Cost/Month</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>VPS (4GB RAM)</td>
                        <td>Hetzner CX22</td>
                        <td>€4.50 (~$5)</td>
                    </tr>
                    <tr>
                        <td>VPS (8GB RAM)</td>
                        <td>Hetzner CX32</td>
                        <td>€8.50 (~$9)</td>
                    </tr>
                    <tr>
                        <td>Domain</td>
                        <td>Cloudflare</td>
                        <td>~$10/year</td>
                    </tr>
                    <tr>
                        <td>CDN + SSL</td>
                        <td>Cloudflare</td>
                        <td>Free</td>
                    </tr>
                    <tr>
                        <td>Backups</td>
                        <td>Hetzner</td>
                        <td>€0.90 (~$1)</td>
                    </tr>
                    <tr style="background: var(--gray-100); font-weight: bold;">
                        <td>Total</td>
                        <td></td>
                        <td>~$15-20/month</td>
                    </tr>
                </tbody>
            </table>

            <h3>Step-by-Step Setup</h3>

            <div class="step">
                <div class="step-number">1</div>
                <div class="step-content">
                    <h4>Create Hetzner Account & Server</h4>
                    <ol>
                        <li>Go to <a href="https://www.hetzner.com/cloud">https://www.hetzner.com/cloud</a></li>
                        <li>Create account and verify</li>
                        <li>Create new project "Vizora"</li>
                        <li>Add server: Ubuntu 24.04, CX22 or CX32, with SSH key</li>
                    </ol>
                </div>
            </div>

            <div class="step">
                <div class="step-number">2</div>
                <div class="step-content">
                    <h4>Initial Server Setup</h4>
                    <pre><code># SSH into your server
ssh root@YOUR_SERVER_IP

# Update system
apt update && apt upgrade -y

# Install Docker
curl -fsSL https://get.docker.com | sh

# Install Docker Compose
apt install docker-compose-plugin -y

# Create app directory
mkdir -p /opt/vizora
cd /opt/vizora</code></pre>
                </div>
            </div>

            <div class="step">
                <div class="step-number">3</div>
                <div class="step-content">
                    <h4>Create Docker Compose Configuration</h4>
                    <p>Create <code>/opt/vizora/docker-compose.yml</code>:</p>
                    <pre><code>version: '3.8'

services:
  # PostgreSQL Database
  postgres:
    image: postgres:16-alpine
    container_name: vizora-db
    restart: unless-stopped
    environment:
      POSTGRES_USER: vizora
      POSTGRES_PASSWORD: ${DB_PASSWORD}
      POSTGRES_DB: vizora
    volumes:
      - postgres_data:/var/lib/postgresql/data
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U vizora"]
      interval: 10s
      timeout: 5s
      retries: 5

  # Redis Cache
  redis:
    image: redis:7-alpine
    container_name: vizora-redis
    restart: unless-stopped
    command: redis-server --appendonly yes
    volumes:
      - redis_data:/data

  # API Server (Middleware)
  api:
    image: vizora/api:latest
    container_name: vizora-api
    restart: unless-stopped
    depends_on:
      postgres:
        condition: service_healthy
      redis:
        condition: service_healthy
    environment:
      NODE_ENV: production
      DATABASE_URL: postgresql://vizora:${DB_PASSWORD}@postgres:5432/vizora
      REDIS_URL: redis://redis:6379
      JWT_SECRET: ${JWT_SECRET}
      DEVICE_JWT_SECRET: ${DEVICE_JWT_SECRET}
    volumes:
      - uploads:/app/uploads
    ports:
      - "127.0.0.1:3000:3000"

  # Realtime Server (WebSocket)
  realtime:
    image: vizora/realtime:latest
    container_name: vizora-realtime
    restart: unless-stopped
    depends_on:
      - postgres
      - redis
    environment:
      NODE_ENV: production
      DATABASE_URL: postgresql://vizora:${DB_PASSWORD}@postgres:5432/vizora
      REDIS_URL: redis://redis:6379
      DEVICE_JWT_SECRET: ${DEVICE_JWT_SECRET}
    ports:
      - "127.0.0.1:3002:3002"

  # Web Dashboard (Next.js)
  web:
    image: vizora/web:latest
    container_name: vizora-web
    restart: unless-stopped
    depends_on:
      - api
    environment:
      NODE_ENV: production
      NEXT_PUBLIC_API_URL: https://api.${DOMAIN}
      NEXT_PUBLIC_REALTIME_URL: wss://realtime.${DOMAIN}
    ports:
      - "127.0.0.1:3001:3001"

  # Nginx Reverse Proxy
  nginx:
    image: nginx:alpine
    container_name: vizora-nginx
    restart: unless-stopped
    depends_on:
      - web
      - api
      - realtime
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
      - ./ssl:/etc/nginx/ssl:ro
      - uploads:/var/www/uploads:ro

volumes:
  postgres_data:
  redis_data:
  uploads:</code></pre>
                </div>
            </div>

            <div class="step">
                <div class="step-number">4</div>
                <div class="step-content">
                    <h4>Create Nginx Configuration</h4>
                    <p>Create <code>/opt/vizora/nginx.conf</code>:</p>
                    <pre><code>events {
    worker_connections 1024;
}

http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;

    # Performance
    sendfile on;
    tcp_nopush on;
    keepalive_timeout 65;

    # Gzip
    gzip on;
    gzip_types text/plain text/css application/json application/javascript;

    # Rate limiting
    limit_req_zone $binary_remote_addr zone=api:10m rate=10r/s;

    # Upstream servers
    upstream web { server web:3001; }
    upstream api { server api:3000; }
    upstream realtime { server realtime:3002; }

    # HTTP -> HTTPS redirect
    server {
        listen 80;
        return 301 https://$host$request_uri;
    }

    # Main dashboard
    server {
        listen 443 ssl http2;
        server_name YOUR_DOMAIN www.YOUR_DOMAIN;

        ssl_certificate /etc/nginx/ssl/fullchain.pem;
        ssl_certificate_key /etc/nginx/ssl/privkey.pem;
        ssl_protocols TLSv1.2 TLSv1.3;

        location / {
            proxy_pass http://web;
            proxy_http_version 1.1;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }
    }

    # API server
    server {
        listen 443 ssl http2;
        server_name api.YOUR_DOMAIN;

        ssl_certificate /etc/nginx/ssl/fullchain.pem;
        ssl_certificate_key /etc/nginx/ssl/privkey.pem;

        limit_req zone=api burst=20 nodelay;
        client_max_body_size 100M;

        location / {
            proxy_pass http://api;
            proxy_http_version 1.1;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }

        location /uploads {
            alias /var/www/uploads;
            expires 7d;
        }
    }

    # Realtime WebSocket server
    server {
        listen 443 ssl http2;
        server_name realtime.YOUR_DOMAIN;

        ssl_certificate /etc/nginx/ssl/fullchain.pem;
        ssl_certificate_key /etc/nginx/ssl/privkey.pem;

        location / {
            proxy_pass http://realtime;
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_set_header Host $host;
            proxy_read_timeout 86400;
            proxy_send_timeout 86400;
        }
    }
}</code></pre>
                </div>
            </div>

            <div class="step">
                <div class="step-number">5</div>
                <div class="step-content">
                    <h4>Create Environment File</h4>
                    <pre><code># Generate .env file with secure secrets
cat > /opt/vizora/.env << EOF
DB_PASSWORD=$(openssl rand -hex 32)
JWT_SECRET=$(openssl rand -hex 32)
DEVICE_JWT_SECRET=$(openssl rand -hex 32)
DOMAIN=yourdomain.com
EOF

# Secure the file
chmod 600 /opt/vizora/.env</code></pre>
                </div>
            </div>

            <div class="step">
                <div class="step-number">6</div>
                <div class="step-content">
                    <h4>Setup SSL with Certbot</h4>
                    <pre><code># Install Certbot
apt install certbot -y

# Get certificates
certbot certonly --standalone \
  -d yourdomain.com \
  -d www.yourdomain.com \
  -d api.yourdomain.com \
  -d realtime.yourdomain.com \
  -d display.yourdomain.com

# Copy certificates
mkdir -p /opt/vizora/ssl
cp /etc/letsencrypt/live/yourdomain.com/fullchain.pem /opt/vizora/ssl/
cp /etc/letsencrypt/live/yourdomain.com/privkey.pem /opt/vizora/ssl/

# Setup auto-renewal
echo "0 3 * * * certbot renew --quiet && \
  cp /etc/letsencrypt/live/yourdomain.com/*.pem /opt/vizora/ssl/ && \
  docker restart vizora-nginx" | crontab -</code></pre>
                </div>
            </div>

            <div class="step">
                <div class="step-number">7</div>
                <div class="step-content">
                    <h4>Build and Deploy</h4>
                    <pre><code># On development machine - Build and push images
docker build -t yourusername/vizora-api:latest ./middleware
docker build -t yourusername/vizora-realtime:latest ./realtime
docker build -t yourusername/vizora-web:latest ./web

docker push yourusername/vizora-api:latest
docker push yourusername/vizora-realtime:latest
docker push yourusername/vizora-web:latest

# On production server - Deploy
cd /opt/vizora
docker compose pull
docker compose up -d

# Verify
docker compose ps
docker compose logs -f</code></pre>
                </div>
            </div>

            <h3>Option B: Railway (Zero DevOps)</h3>
            <div class="card">
                <h4>Cost: ~$20-50/month (usage-based)</h4>
                <p>Railway is perfect if you want zero server management.</p>
                <ol>
                    <li>Go to <a href="https://railway.app">https://railway.app</a></li>
                    <li>Create account and new project</li>
                    <li>Add PostgreSQL and Redis databases</li>
                    <li>Deploy each service from your repository</li>
                    <li>Configure environment variables</li>
                    <li>Setup custom domains</li>
                </ol>
            </div>
        </section>

        <section id="phase2">
            <h2>Phase 2: Growth Deployment <span class="cost-badge warning-badge">$100-200/month</span></h2>

            <p>When you reach 500+ users or need higher availability:</p>

            <h3>Upgrade Path</h3>
            <div class="grid">
                <div class="card">
                    <h4>1. Separate Database Server</h4>
                    <p>Use managed PostgreSQL (Hetzner Managed DB, DigitalOcean, or Supabase)</p>
                    <p><strong>Cost:</strong> ~$15-30/month</p>
                </div>
                <div class="card">
                    <h4>2. Add Second App Server</h4>
                    <p>Deploy identical app server and add load balancer (Hetzner LB: €5/month)</p>
                </div>
                <div class="card">
                    <h4>3. Use Managed Redis</h4>
                    <p>Upstash (serverless) with free tier, or Redis Cloud (~$7/month)</p>
                </div>
            </div>
        </section>

        <section id="phase3">
            <h2>Phase 3: Scale Deployment <span class="cost-badge warning-badge">$300-500/month</span></h2>

            <p>For 1000+ users, consider Kubernetes:</p>

            <h3>Managed Kubernetes Costs</h3>
            <table>
                <thead>
                    <tr>
                        <th>Provider</th>
                        <th>Base Cost</th>
                        <th>Notes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>DigitalOcean</td>
                        <td>$12/month + nodes</td>
                        <td>Easy to use</td>
                    </tr>
                    <tr>
                        <td>Linode</td>
                        <td>$12/month + nodes</td>
                        <td>Good performance</td>
                    </tr>
                    <tr>
                        <td>Vultr</td>
                        <td>$10/month + nodes</td>
                        <td>Budget option</td>
                    </tr>
                </tbody>
            </table>

            <h3>AWS Alternative Architecture</h3>
            <div class="diagram">┌─────────────────────────────────────────────────────────┐
│                    AWS Architecture                      │
├─────────────────────────────────────────────────────────┤
│  CloudFront (CDN)           - Free tier: 1TB/month      │
│  ↓                                                       │
│  ALB (Load Balancer)        - ~$16/month                │
│  ↓                                                       │
│  ECS Fargate                - ~$30-50/month             │
│  (API + Web + Realtime)                                 │
│  ↓                                                       │
│  RDS PostgreSQL             - ~$15/month (t4g.micro)    │
│  ElastiCache Redis          - ~$12/month (t4g.micro)    │
│  S3 (file storage)          - ~$5/month                 │
├─────────────────────────────────────────────────────────┤
│  Total: ~$80-100/month                                  │
└─────────────────────────────────────────────────────────┘</div>
        </section>

        <section id="storage">
            <h2>File Storage Options</h2>

            <table>
                <thead>
                    <tr>
                        <th>Option</th>
                        <th>Free Tier</th>
                        <th>Paid</th>
                        <th>Best For</th>
                    </tr>
                </thead>
                <tbody>
                    <tr style="background: #ecfdf5;">
                        <td><strong>Cloudflare R2</strong></td>
                        <td>10GB + 10M requests</td>
                        <td>$0.015/GB</td>
                        <td>Best value (no egress fees!)</td>
                    </tr>
                    <tr>
                        <td>Backblaze B2</td>
                        <td>10GB</td>
                        <td>$0.005/GB</td>
                        <td>Cheapest storage</td>
                    </tr>
                    <tr>
                        <td>AWS S3</td>
                        <td>5GB (12 months)</td>
                        <td>$0.023/GB</td>
                        <td>AWS ecosystem</td>
                    </tr>
                    <tr>
                        <td>DigitalOcean Spaces</td>
                        <td>-</td>
                        <td>$5/250GB</td>
                        <td>Simple setup</td>
                    </tr>
                </tbody>
            </table>

            <div class="info-box">
                <h4>Recommendation: Cloudflare R2</h4>
                <p>No egress fees make R2 ideal for serving media content to displays. Setup with S3-compatible API.</p>
            </div>
        </section>

        <section id="security">
            <h2>Security Checklist</h2>

            <h3>Server Security</h3>
            <pre><code># Disable root SSH login
sed -i 's/PermitRootLogin yes/PermitRootLogin no/' /etc/ssh/sshd_config

# Create deploy user
adduser deploy
usermod -aG docker deploy
usermod -aG sudo deploy

# Setup firewall
ufw default deny incoming
ufw default allow outgoing
ufw allow ssh
ufw allow 80/tcp
ufw allow 443/tcp
ufw enable

# Install fail2ban
apt install fail2ban -y
systemctl enable fail2ban</code></pre>

            <h3>Application Security</h3>
            <ul class="checklist">
                <li>HTTPS everywhere (via Cloudflare/Let's Encrypt)</li>
                <li>Secure JWT secrets (randomly generated)</li>
                <li>Rate limiting (nginx config)</li>
                <li>CORS properly configured</li>
                <li>SQL injection prevention (Prisma ORM)</li>
                <li>XSS prevention (React escaping)</li>
                <li>CSRF protection (token validation)</li>
            </ul>
        </section>

        <section id="costs">
            <h2>Cost Summary</h2>

            <div class="grid">
                <div class="card">
                    <h4>Startup Phase (100 Users)</h4>
                    <table>
                        <tr><td>Hetzner CX32 (8GB RAM)</td><td>~$9</td></tr>
                        <tr><td>Hetzner Backup</td><td>~$1</td></tr>
                        <tr><td>Cloudflare (CDN, DNS)</td><td>Free</td></tr>
                        <tr><td>Domain (.com)</td><td>~$0.80</td></tr>
                        <tr style="font-weight: bold; background: #ecfdf5;"><td>Total</td><td>~$11/month</td></tr>
                    </table>
                </div>

                <div class="card">
                    <h4>Growth Phase (500 Users)</h4>
                    <table>
                        <tr><td>2x Hetzner CX32</td><td>~$18</td></tr>
                        <tr><td>Hetzner Load Balancer</td><td>~$6</td></tr>
                        <tr><td>Supabase (PostgreSQL)</td><td>Free tier</td></tr>
                        <tr><td>Upstash Redis</td><td>Free tier</td></tr>
                        <tr><td>Cloudflare R2 (50GB)</td><td>~$0.75</td></tr>
                        <tr style="font-weight: bold; background: #fef3c7;"><td>Total</td><td>~$25-30/month</td></tr>
                    </table>
                </div>

                <div class="card">
                    <h4>Scale Phase (1000+ Users)</h4>
                    <table>
                        <tr><td>3x Hetzner CX42</td><td>~$49</td></tr>
                        <tr><td>Hetzner Load Balancer</td><td>~$6</td></tr>
                        <tr><td>Managed PostgreSQL</td><td>~$30</td></tr>
                        <tr><td>Managed Redis</td><td>~$15</td></tr>
                        <tr><td>Cloudflare R2 (200GB)</td><td>~$3</td></tr>
                        <tr style="font-weight: bold; background: #fef3c7;"><td>Total</td><td>~$100-120/month</td></tr>
                    </table>
                </div>
            </div>
        </section>

        <section>
            <h2>Quick Start Commands</h2>
            <pre><code># 1. Build production images
docker build -t vizora/api:v1.0.0 ./middleware
docker build -t vizora/realtime:v1.0.0 ./realtime
docker build -t vizora/web:v1.0.0 ./web

# 2. Push to registry
docker push vizora/api:v1.0.0
docker push vizora/realtime:v1.0.0
docker push vizora/web:v1.0.0

# 3. On production server
cd /opt/vizora
docker compose pull
docker compose up -d

# 4. Run database migrations
docker exec vizora-api npx prisma migrate deploy

# 5. Verify
curl https://api.yourdomain.com/health
curl https://yourdomain.com</code></pre>
        </section>

        <section>
            <h2>Next Steps</h2>
            <ol>
                <li><strong>Choose your hosting</strong> (Hetzner recommended for startups)</li>
                <li><strong>Setup domain</strong> with Cloudflare</li>
                <li><strong>Deploy using Docker Compose</strong></li>
                <li><strong>Configure monitoring</strong> (UptimeRobot + Sentry)</li>
                <li><strong>Test thoroughly</strong> before going live</li>
                <li><strong>Launch!</strong></li>
            </ol>
        </section>
    </div>

    <footer>
        <p>Vizora Production Deployment Guide &copy; 2024</p>
        <p>For questions or issues, check Vizora Documentation, GitHub Issues, or Community Discord</p>
    </footer>
</body>
</html>
