# Vizora Environment Configuration
# Copy this file to .env and fill in your values
# IMPORTANT: Never commit .env to version control!

# =============================================================================
# Node Environment
# =============================================================================
NODE_ENV=development

# =============================================================================
# API Ports - FIXED ASSIGNMENTS (DO NOT CHANGE)
# =============================================================================
# Middleware API: 3000 (fail if occupied)
# Web Frontend: 3001 (fail if occupied)
# Realtime WebSocket: 3002 (fail if occupied)
PORT=3000
MIDDLEWARE_PORT=3000
WEB_PORT=3001
REALTIME_PORT=3002

# =============================================================================
# CORS Origins
# =============================================================================
# Comma-separated list of allowed origins
# Production example: https://app.vizora.io,https://admin.vizora.io
CORS_ORIGIN=http://localhost:3001,http://localhost:3002

# =============================================================================
# PostgreSQL Database
# =============================================================================
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?options
# Production: Use strong passwords and SSL connections
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/vizora?connection_limit=100&pool_timeout=60
POSTGRES_URL=postgresql://postgres:postgres@localhost:5432/vizora

# =============================================================================
# MongoDB (Analytics & Time-series data)
# =============================================================================
MONGODB_URL=mongodb://localhost:27017/vizora

# =============================================================================
# Redis (Caching & Real-time state)
# =============================================================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=redis_secure_pass_change_me

# =============================================================================
# MinIO / S3 (File Storage)
# =============================================================================
MINIO_ENDPOINT=localhost
MINIO_PORT=9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET=vizora-assets
MINIO_USE_SSL=false

# =============================================================================
# JWT Authentication
# =============================================================================
# IMPORTANT: Generate strong secrets for production!
# Use: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# Minimum length: 32 characters

# User authentication secret
JWT_SECRET=GENERATE_A_SECURE_64_CHAR_HEX_SECRET_HERE
JWT_EXPIRES_IN=7d

# Device authentication secret (separate from user auth)
DEVICE_JWT_SECRET=GENERATE_ANOTHER_SECURE_64_CHAR_HEX_SECRET_HERE

# =============================================================================
# Logging
# =============================================================================
# Options: error, warn, info, debug
LOG_LEVEL=info

# =============================================================================
# Frontend URLs
# =============================================================================
# REQUIRED in production - the backend API URL that the web frontend connects to
NEXT_PUBLIC_API_URL=http://localhost:3000

# WebSocket URL for real-time updates (used by web frontend)
NEXT_PUBLIC_SOCKET_URL=http://localhost:3002

# Backend URL used by next.config.js for server-side API proxying
BACKEND_URL=http://localhost:3000

# =============================================================================
# Production URLs (uncomment and configure for deployment)
# =============================================================================
# API_BASE_URL=https://api.vizora.io
# WEB_URL=https://app.vizora.io

# =============================================================================
# Optional: Sentry Error Tracking (Production)
# =============================================================================
# Sentry DSN for error tracking (optional, skip if not set)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
# Release version for Sentry (optional, used for release tracking)
# SENTRY_RELEASE=vizora-middleware@1.0.0

# =============================================================================
# Database Backup Configuration
# =============================================================================
# Directory where database backups are stored (daily/, weekly/, monthly/ subdirs)
BACKUP_DIR=/var/backups/vizora

# Number of days to keep daily backups (default: 7)
BACKUP_RETENTION_DAYS=7
