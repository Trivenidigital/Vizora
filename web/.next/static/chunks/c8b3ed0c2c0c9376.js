(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63358,e=>{"use strict";var t=e.i(56908);function s({size:e="md"}){return(0,t.jsx)("div",{className:"flex items-center justify-center",children:(0,t.jsx)("div",{className:`${{sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[e]} border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin`})})}e.s(["default",()=>s])},62821,e=>{"use strict";var t=e.i(56908),s=e.i(1845),a=e.i(29554);function i({message:e,type:i,onClose:r,duration:l=5e3}){let[n,d]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let e=setTimeout(()=>{d(!1),setTimeout(r,300)},l);return()=>clearTimeout(e)},[l,r]),(0,t.jsxs)("div",{className:`fixed top-4 right-4 z-50 flex items-center gap-3 px-6 py-4 rounded-lg shadow-lg text-white ${{success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500",warning:"bg-yellow-500"}[i]} transform transition-all duration-300 ${n?"translate-x-0 opacity-100":"translate-x-full opacity-0"}`,children:[(0,t.jsx)(a.Icon,{name:{success:"success",error:"delete",info:"info",warning:"warning"}[i],size:"md",className:"text-white"}),(0,t.jsx)("span",{className:"font-medium",children:e}),(0,t.jsx)("button",{onClick:()=>{d(!1),setTimeout(r,300)},className:"ml-4 hover:opacity-75 transition",children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})}function r(){let[e,a]=(0,s.useState)([]),r=(0,s.useCallback)(e=>{a(t=>t.filter(t=>t.id!==e))},[]),l=(0,s.useCallback)((e,t="info",s=5e3)=>{let i=Math.random().toString(36).substring(7);a(s=>[...s,{id:i,message:e,type:t}]),s>0&&setTimeout(()=>{r(i)},s)},[r]);return{showToast:l,success:e=>l(e,"success"),error:e=>l(e,"error"),info:e=>l(e,"info"),warning:e=>l(e,"warning"),ToastContainer:(0,s.useCallback)(()=>(0,t.jsx)(t.Fragment,{children:e.map(e=>(0,t.jsx)(i,{message:e.message,type:e.type,onClose:()=>r(e.id)},e.id))}),[e,r])}}e.s(["useToast",()=>r],62821)},10621,67236,51430,e=>{"use strict";var t=e.i(56908),s=e.i(1845);function a({isOpen:e,onClose:a,title:i,children:r,size:l="md"}){let n=(0,s.useRef)(null);return((0,s.useEffect)(()=>{if(e){document.body.style.overflow="hidden";let e=e=>{"Escape"===e.key&&a()};return document.addEventListener("keydown",e),()=>{document.body.style.overflow="unset",document.removeEventListener("keydown",e)}}document.body.style.overflow="unset"},[e,a]),e)?(0,t.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:(0,t.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:a,"aria-hidden":"true"}),(0,t.jsxs)("div",{className:`relative bg-white rounded-lg shadow-xl ${{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[l]} w-full transform transition-all`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,t.jsx)("h3",{id:"modal-title",className:"text-xl font-semibold text-gray-900",children:i}),(0,t.jsx)("button",{ref:n,onClick:a,className:"text-gray-400 hover:text-gray-600 transition focus:outline-none focus:ring-2 focus:ring-blue-500 rounded","aria-label":"Close modal",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsx)("div",{className:"p-6",children:r})]})]})}):null}e.s(["default",()=>a],10621);var i=e.i(29554);function r({isOpen:e,onClose:s,onConfirm:a,title:r,message:l,confirmText:n="Confirm",cancelText:d="Cancel",type:o="danger"}){return e?(0,t.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,t.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:s}),(0,t.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full transform transition-all",children:[(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:`flex-shrink-0 ${{danger:"text-red-600",warning:"text-yellow-600",info:"text-blue-600"}[o]}`,children:["danger"===o&&(0,t.jsx)(i.Icon,{name:"error",size:"2xl"}),"warning"===o&&(0,t.jsx)(i.Icon,{name:"warning",size:"2xl"}),"info"===o&&(0,t.jsx)(i.Icon,{name:"info",size:"2xl"})]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:r}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:l})]})]})}),(0,t.jsxs)("div",{className:"bg-gray-50 px-6 py-4 flex justify-end gap-3 rounded-b-lg",children:[(0,t.jsx)("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition",children:d}),(0,t.jsx)("button",{onClick:()=>{a(),s()},className:`px-4 py-2 text-sm font-medium text-white rounded-md transition ${{danger:"bg-red-600 hover:bg-red-700",warning:"bg-yellow-600 hover:bg-yellow-700",info:"bg-blue-600 hover:bg-blue-700"}[o]}`,children:n})]})]})]})}):null}function l(e,t=300){let[a,i]=(0,s.useState)(e);return(0,s.useEffect)(()=>{let s=setTimeout(()=>{i(e)},t);return()=>{clearTimeout(s)}},[e,t]),a}e.s(["default",()=>r],67236),e.s(["useDebounce",()=>l],51430)},28885,e=>{"use strict";var t=e.i(56908),s=e.i(1845),a=e.i(46562),i=e.i(24741),r=e.i(10621),l=e.i(67236),n=e.i(63358),d=e.i(62821),o=e.i(51430),c=e.i(29554);function x(){let e=(0,a.useRouter)(),x=(0,d.useToast)(),[u,m]=(0,s.useState)([]),[g,h]=(0,s.useState)([]),[p,b]=(0,s.useState)(!0),[y,f]=(0,s.useState)(null),[j,v]=(0,s.useState)(!1),[w,N]=(0,s.useState)(!1),[k,C]=(0,s.useState)(!1),[S,L]=(0,s.useState)(""),[D,T]=(0,s.useState)({nickname:"",location:""}),[z,M]=(0,s.useState)(!1),[P,E]=(0,s.useState)(""),I=(0,o.useDebounce)(P,300),[$,F]=(0,s.useState)(null),[A,B]=(0,s.useState)("asc"),[O,R]=(0,s.useState)(1),[W,H]=(0,s.useState)(10);(0,s.useEffect)(()=>{K(),U()},[]);let K=async()=>{try{b(!0);let e=await i.apiClient.getDisplays();m(e.data||e||[])}catch(e){x.error(e.message||"Failed to load devices")}finally{b(!1)}},U=async()=>{try{let e=await i.apiClient.getPlaylists();h(e.data||e||[])}catch(e){}},G=e=>{if(!e)return null;let t=g.find(t=>t.id===e);return t?.name||null},q=async()=>{if(y)try{M(!0),await i.apiClient.updateDisplay(y.id,D),x.success("Device updated successfully"),v(!1),K()}catch(e){x.error(e.message||"Failed to update device")}finally{M(!1)}},J=async()=>{if(y)try{M(!0),await i.apiClient.deleteDisplay(y.id),x.success("Device deleted successfully"),K()}catch(e){x.error(e.message||"Failed to delete device")}finally{M(!1)}},Q=async e=>{try{M(!0);let t=await i.apiClient.generatePairingToken(e.id);L(t.pairingCode||"N/A"),f(e),C(!0)}catch(e){x.error(e.message||"Failed to generate pairing code")}finally{M(!1)}},V=e=>{$===e?"asc"===A?B("desc"):F(null):(F(e),B("asc"))},X=u.filter(e=>!I||e.nickname.toLowerCase().includes(I.toLowerCase())||e.location&&e.location.toLowerCase().includes(I.toLowerCase())).sort((e,t)=>{if(!$)return 0;let s=e[$],a=t[$];return null==s&&null==a?0:null==s?1:null==a?-1:s<a?"asc"===A?-1:1:s>a?"asc"===A?1:-1:0}),Y=X.length,Z=Math.ceil(Y/W),_=(O-1)*W,ee=_+W,et=X.slice(_,ee);(0,s.useEffect)(()=>{R(1)},[I]);let es=e=>$!==e?null:"asc"===A?" ↑":" ↓";return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(x.ToastContainer,{}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Devices"}),(0,t.jsxs)("p",{className:"mt-2 text-gray-600",children:["Manage your paired display devices (",u.length," total)"]})]}),(0,t.jsxs)("button",{onClick:()=>e.push("/dashboard/devices/pair"),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition font-semibold shadow-md hover:shadow-lg flex items-center gap-2",children:[(0,t.jsx)(c.Icon,{name:"add",size:"lg",className:"text-white"}),(0,t.jsx)("span",{children:"Pair New Device"})]})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",value:P,onChange:e=>E(e.target.value),placeholder:"Search devices by name or location...",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",autoComplete:"off"}),(0,t.jsx)("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),P&&(0,t.jsx)("button",{onClick:()=>E(""),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),p?(0,t.jsx)("div",{className:"bg-white rounded-lg shadow p-12",children:(0,t.jsx)(n.default,{size:"lg"})}):0===u.length?(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[(0,t.jsx)(c.Icon,{name:"devices",size:"6xl",className:"mx-auto mb-4 text-gray-400"}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No devices yet"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"Get started by pairing your first display device"}),(0,t.jsx)("button",{onClick:()=>e.push("/dashboard/devices/pair"),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition font-semibold",children:"Pair Device"})]}):(0,t.jsxs)(t.Fragment,{children:[I&&(0,t.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:(0,t.jsxs)("p",{className:"text-sm text-blue-800",children:[et.length," ",1===et.length?"result":"results"," found"]})}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none",onClick:()=>V("nickname"),children:["Device",es("nickname")]}),(0,t.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none",onClick:()=>V("status"),children:["Status",es("status")]}),(0,t.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none",onClick:()=>V("location"),children:["Location",es("location")]}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Currently Playing"}),(0,t.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none",onClick:()=>V("lastHeartbeat"),children:["Last Seen",es("lastHeartbeat")]}),(0,t.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:et.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50 transition",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(c.Icon,{name:"devices",size:"xl",className:"mr-3 text-gray-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:e.nickname}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["ID: ",e.id]})]})]})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:`w-2 h-2 rounded-full ${"online"===e.status?"bg-green-500":"bg-gray-400"}`}),(0,t.jsx)("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${"online"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e.status})]})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:e.location||"—"}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:G(e.currentPlaylistId)?(0,t.jsxs)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-semibold flex items-center gap-1 w-fit",children:[(0,t.jsx)(c.Icon,{name:"playlists",size:"sm",className:"text-blue-800"}),(0,t.jsx)("span",{children:G(e.currentPlaylistId)})]}):(0,t.jsx)("span",{className:"text-gray-400 italic",children:"No playlist"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.lastSeen?new Date(e.lastSeen).toLocaleString():"Never"}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)("button",{onClick:()=>{f(e),T({nickname:e.nickname,location:e.location||""}),v(!0)},className:"text-blue-600 hover:text-blue-800 hover:bg-blue-50 px-3 py-1 rounded transition font-medium",children:"Edit"}),(0,t.jsx)("button",{onClick:()=>Q(e),className:"text-purple-600 hover:text-purple-800 hover:bg-purple-50 px-3 py-1 rounded transition font-medium",children:"Pair"}),(0,t.jsx)("button",{onClick:()=>{f(e),N(!0)},className:"text-red-600 hover:text-red-800 hover:bg-red-50 px-3 py-1 rounded transition font-medium",children:"Delete"})]})})]},e.id))})]})}),Y>0&&(0,t.jsxs)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6 rounded-b-lg",children:[(0,t.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,t.jsx)("button",{onClick:()=>R(e=>Math.max(1,e-1)),disabled:1===O,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,t.jsx)("button",{onClick:()=>R(e=>Math.min(Z,e+1)),disabled:O===Z,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),(0,t.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing ",(0,t.jsx)("span",{className:"font-medium",children:_+1})," to"," ",(0,t.jsx)("span",{className:"font-medium",children:Math.min(ee,Y)})," of"," ",(0,t.jsx)("span",{className:"font-medium",children:Y})," devices"]}),(0,t.jsxs)("select",{value:W,onChange:e=>{H(Number(e.target.value)),R(1)},className:"text-sm border-gray-300 rounded-md",children:[(0,t.jsx)("option",{value:10,children:"10 per page"}),(0,t.jsx)("option",{value:25,children:"25 per page"}),(0,t.jsx)("option",{value:50,children:"50 per page"}),(0,t.jsx)("option",{value:100,children:"100 per page"})]})]}),(0,t.jsx)("div",{children:(0,t.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[(0,t.jsx)("button",{onClick:()=>R(e=>Math.max(1,e-1)),disabled:1===O,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"← Previous"}),Array.from({length:Math.min(5,Z)},(e,s)=>{let a;return a=Z<=5||O<=3?s+1:O>=Z-2?Z-4+s:O-2+s,(0,t.jsx)("button",{onClick:()=>R(a),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${O===a?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:a},a)}),(0,t.jsx)("button",{onClick:()=>R(e=>Math.min(Z,e+1)),disabled:O===Z,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next →"})]})})]})]})]}),(0,t.jsx)(r.default,{isOpen:j,onClose:()=>v(!1),title:"Edit Device",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Device Nickname"}),(0,t.jsx)("input",{type:"text",value:D.nickname,onChange:e=>T({...D,nickname:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Store Front Display"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location (Optional)"}),(0,t.jsx)("input",{type:"text",value:D.location,onChange:e=>T({...D,location:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Main Entrance"})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,t.jsx)("button",{onClick:()=>v(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition",disabled:z,children:"Cancel"}),(0,t.jsxs)("button",{onClick:q,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition disabled:opacity-50 flex items-center gap-2",disabled:z||!D.nickname.trim(),children:[z&&(0,t.jsx)(n.default,{size:"sm"}),"Save Changes"]})]})]})}),(0,t.jsx)(r.default,{isOpen:k,onClose:()=>C(!1),title:"Pairing Code",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("p",{className:"text-gray-600",children:"Enter this code on your display device to pair it:"}),(0,t.jsx)("div",{className:"bg-gray-100 rounded-lg p-6",children:(0,t.jsx)("div",{className:"text-4xl font-bold text-blue-600 tracking-widest",children:S})}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"This code will expire in 5 minutes"}),(0,t.jsx)("button",{onClick:()=>C(!1),className:"w-full px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition",children:"Done"})]})}),(0,t.jsx)(l.default,{isOpen:w,onClose:()=>N(!1),onConfirm:J,title:"Delete Device",message:`Are you sure you want to delete "${y?.nickname}"? This action cannot be undone.`,confirmText:"Delete",type:"danger"})]})}e.s(["default",()=>x])}]);