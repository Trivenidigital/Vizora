(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,10621,67236,e=>{"use strict";var t=e.i(13509),a=e.i(26670);function r({isOpen:e,onClose:r,title:n,children:s,size:i="md"}){let l=(0,a.useRef)(null);return((0,a.useEffect)(()=>{if(e){document.body.style.overflow="hidden";let e=e=>{"Escape"===e.key&&r()};return document.addEventListener("keydown",e),()=>{document.body.style.overflow="unset",document.removeEventListener("keydown",e)}}document.body.style.overflow="unset"},[e,r]),e)?(0,t.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:(0,t.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:r,"aria-hidden":"true"}),(0,t.jsxs)("div",{className:`relative bg-white rounded-lg shadow-xl ${{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[i]} w-full transform transition-all`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,t.jsx)("h3",{id:"modal-title",className:"text-xl font-semibold text-gray-900",children:n}),(0,t.jsx)("button",{ref:l,onClick:r,className:"text-gray-400 hover:text-gray-600 transition focus:outline-none focus:ring-2 focus:ring-blue-500 rounded","aria-label":"Close modal",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsx)("div",{className:"p-6",children:s})]})]})}):null}e.s(["default",()=>r],10621);var n=e.i(29554);function s({isOpen:e,onClose:a,onConfirm:r,title:s,message:i,confirmText:l="Confirm",cancelText:o="Cancel",type:c="danger"}){return e?(0,t.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,t.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:a}),(0,t.jsxs)("div",{className:"relative bg-white dark:bg-gray-900 rounded-lg shadow-xl max-w-md w-full transform transition-all",children:[(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:`flex-shrink-0 ${{danger:"text-error-600 dark:text-error-500",warning:"text-warning-600 dark:text-warning-500",info:"text-info-600 dark:text-info-500"}[c]}`,children:["danger"===c&&(0,t.jsx)(n.Icon,{name:"error",size:"2xl"}),"warning"===c&&(0,t.jsx)(n.Icon,{name:"warning",size:"2xl"}),"info"===c&&(0,t.jsx)(n.Icon,{name:"info",size:"2xl"})]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-50 mb-2",children:s}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:i})]})]})}),(0,t.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 px-6 py-4 flex justify-end gap-3 rounded-b-lg",children:[(0,t.jsx)("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 transition",children:o}),(0,t.jsx)("button",{onClick:()=>{r(),a()},className:`px-4 py-2 text-sm font-medium text-white rounded-md transition ${{danger:"bg-error-600 dark:bg-error-500 hover:bg-error-700 dark:hover:bg-error-600",warning:"bg-warning-600 dark:bg-warning-500 hover:bg-warning-700 dark:hover:bg-warning-600",info:"bg-info-600 dark:bg-info-500 hover:bg-info-700 dark:hover:bg-info-600"}[c]}`,children:l})]})]})]})}):null}e.s(["default",()=>s],67236)},69684,e=>{"use strict";var t=e.i(13509),a=e.i(29554);function r({icon:e,title:r,description:n,action:s,variant:i="default"}){return"minimal"===i?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[(0,t.jsx)(a.Icon,{name:e,size:"2xl",className:"text-gray-300 mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:r}),(0,t.jsx)("p",{className:"text-sm text-gray-500 text-center max-w-sm",children:n}),s&&(0,t.jsx)("button",{onClick:s.onClick,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:s.label})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 px-4 bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg border border-blue-100",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center mb-6 shadow-sm",children:(0,t.jsx)(a.Icon,{name:e,size:"2xl",className:"text-blue-600"})}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:r}),(0,t.jsx)("p",{className:"text-gray-600 text-center max-w-sm mb-6",children:n}),s&&(0,t.jsx)("button",{onClick:s.onClick,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium",children:s.label})]})}e.s(["default",()=>r])},63358,e=>{"use strict";var t=e.i(13509);function a({size:e="md"}){return(0,t.jsx)("div",{className:"flex items-center justify-center",role:"status","aria-live":"polite","aria-label":"Loading",children:(0,t.jsx)("div",{className:`${{sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[e]} border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin`,"aria-hidden":"true"})})}e.s(["default",()=>a])},62821,e=>{"use strict";var t=e.i(13509),a=e.i(26670),r=e.i(29554);function n({message:e,type:n,onClose:s,duration:i=5e3}){let[l,o]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=setTimeout(()=>{o(!1),setTimeout(s,300)},i);return()=>clearTimeout(e)},[i,s]),(0,t.jsxs)("div",{role:"alert","aria-live":"assertive","aria-atomic":"true",className:`fixed top-4 right-4 z-50 flex items-center gap-3 px-6 py-4 rounded-lg shadow-lg text-white ${{success:"bg-success-500 text-white",error:"bg-error-500 text-white",info:"bg-info-500 text-white",warning:"bg-warning-500 text-white"}[n]} transform transition-all duration-300 ${l?"translate-x-0 opacity-100":"translate-x-full opacity-0"}`,children:[(0,t.jsx)(r.Icon,{name:{success:"success",error:"delete",info:"info",warning:"warning"}[n],size:"md",className:"text-white"}),(0,t.jsx)("span",{className:"font-medium",children:e}),(0,t.jsx)("button",{onClick:()=>{o(!1),setTimeout(s,300)},className:"ml-4 hover:opacity-75 transition",children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})}function s(){let[e,r]=(0,a.useState)([]),s=(0,a.useCallback)(e=>{r(t=>t.filter(t=>t.id!==e))},[]),i=(0,a.useCallback)((e,t="info",a=5e3)=>{let n=Math.random().toString(36).substring(7);r(a=>[...a,{id:n,message:e,type:t}]),a>0&&setTimeout(()=>{s(n)},a)},[s]);return{showToast:i,success:e=>i(e,"success"),error:e=>i(e,"error"),info:e=>i(e,"info"),warning:e=>i(e,"warning"),ToastContainer:(0,a.useCallback)(()=>(0,t.jsx)(t.Fragment,{children:e.map(e=>(0,t.jsx)(n,{message:e.message,type:e.type,onClose:()=>s(e.id)},e.id))}),[e,s])}}e.s(["useToast",()=>s],62821)},51430,e=>{"use strict";var t=e.i(26670);function a(e,r=300){let[n,s]=(0,t.useState)(e);return(0,t.useEffect)(()=>{let t=setTimeout(()=>{s(e)},r);return()=>{clearTimeout(t)}},[e,r]),n}e.s(["useDebounce",()=>a])},35830,e=>{"use strict";e.i(92762),e.s([])},69381,50079,65255,62211,47348,e=>{"use strict";e.i(69461);var t=e.i(82580);e.i(62821),e.i(35830),e.i(51430);var a=e.i(26670),r=e.i(24741);function n(e="month"){let[t,s]=(0,a.useState)([]),[i,l]=(0,a.useState)(!0),[o,c]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async()=>{try{l(!0),c(null);let t={week:7,month:30,year:365}[e];try{let t=await r.apiClient.getDeviceMetrics?.(e);if(t&&t.length>0)return void s(t)}catch(e){console.log("Analytics API not available, using mock data")}let a=Array.from({length:t},(e,a)=>({date:new Date(Date.now()-(t-1-a)*864e5).toLocaleDateString("en-US",{month:"short",day:"numeric"}),mobile:85+10*Math.random(),tablet:92+8*Math.random(),desktop:98+2*Math.random()}));s(a)}catch(e){c(e instanceof Error?e.message:"Failed to fetch device metrics"),s([])}finally{l(!1)}})()},[e]),{data:t,loading:i,error:o,dateRange:e}}function s(e="month"){let[t,n]=(0,a.useState)([]),[i,l]=(0,a.useState)(!0),[o,c]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async()=>{try{l(!0),c(null);try{let t=await r.apiClient.getContentPerformance?.(e);if(t&&t.length>0)return void n(t)}catch(e){console.log("Content performance API not available, using mock data")}n([{title:"Welcome Video",views:1240,engagement:87,shares:45},{title:"Product Demo",views:980,engagement:76,shares:32},{title:"Tutorial Series",views:2100,engagement:92,shares:58},{title:"Company Overview",views:650,engagement:64,shares:18},{title:"Customer Testimonials",views:1580,engagement:89,shares:42},{title:"FAQ Section",views:420,engagement:45,shares:12}])}catch(e){c(e instanceof Error?e.message:"Failed to fetch content performance"),n([])}finally{l(!1)}})()},[e]),{data:t,loading:i,error:o,dateRange:e}}function i(e="month"){let[t,n]=(0,a.useState)([]),[s,l]=(0,a.useState)(!0),[o,c]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async()=>{try{l(!0),c(null);let t={week:7,month:30,year:365}[e];try{let t=await r.apiClient.getUsageTrends?.(e);if(t&&t.length>0)return void n(t)}catch(e){console.log("Usage trends API not available, using mock data")}let a=Array.from({length:t},(e,a)=>({date:new Date(Date.now()-(t-1-a)*864e5).toLocaleDateString("en-US",{month:"short",day:"numeric"}),video:2400+800*Math.random(),image:1200+400*Math.random(),text:600+300*Math.random(),interactive:800+400*Math.random()}));n(a)}catch(e){c(e instanceof Error?e.message:"Failed to fetch usage trends"),n([])}finally{l(!1)}})()},[e]),{data:t,loading:s,error:o,dateRange:e}}function l(){let[e,t]=(0,a.useState)([]),[n,s]=(0,a.useState)(!0),[i,l]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async()=>{try{s(!0),l(null);try{let e=await r.apiClient.getDeviceDistribution?.();if(e&&e.length>0)return void t(e)}catch(e){console.log("Device distribution API not available, using mock data")}t([{name:"Smartphones",value:35,color:"#3B82F6"},{name:"Tablets",value:25,color:"#8B5CF6"},{name:"Desktop Displays",value:28,color:"#EC4899"},{name:"Smart TVs",value:8,color:"#F59E0B"},{name:"Interactive Kiosks",value:4,color:"#10B981"}])}catch(e){l(e instanceof Error?e.message:"Failed to fetch device distribution"),t([])}finally{s(!1)}})()},[]),{data:e,loading:n,error:i}}function o(e="month"){let[t,n]=(0,a.useState)([]),[s,i]=(0,a.useState)(!0),[l,c]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async()=>{try{i(!0),c(null);let t={week:7,month:30,year:365}[e];try{let t=await r.apiClient.getBandwidthUsage?.(e);if(t&&t.length>0)return void n(t)}catch(e){console.log("Bandwidth usage API not available, using mock data")}let a=Array.from({length:t},(e,a)=>({date:new Date(Date.now()-(t-1-a)*864e5).toLocaleDateString("en-US",{month:"short",day:"numeric"}),current:2400+1e3*Math.random(),average:2200,peak:3200}));n(a)}catch(e){c(e instanceof Error?e.message:"Failed to fetch bandwidth usage"),n([])}finally{i(!1)}})()},[e]),{data:t,loading:s,error:l,dateRange:e}}function c(e="month"){let[t,n]=(0,a.useState)([]),[s,i]=(0,a.useState)(!0),[l,o]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async()=>{try{i(!0),o(null);try{let t=await r.apiClient.getPlaylistPerformance?.(e);if(t&&t.length>0)return void n(t)}catch(e){console.log("Playlist performance API not available, using mock data")}n([{name:"Morning Promotions",plays:234,engagement:87,uniqueDevices:12},{name:"Lunch Specials",plays:189,engagement:92,uniqueDevices:10},{name:"Evening Content",plays:156,engagement:78,uniqueDevices:8},{name:"Educational Videos",plays:298,engagement:85,uniqueDevices:15},{name:"Emergency Alerts",plays:45,engagement:95,uniqueDevices:5}])}catch(e){o(e instanceof Error?e.message:"Failed to fetch playlist performance"),n([])}finally{i(!1)}})()},[e]),{data:t,loading:s,error:l,dateRange:e}}function u(e={}){let{enabled:r=!0,onDeviceStatusChange:n,onPlaylistChange:s,onHealthAlert:i,onScheduleExecution:l,onConnectionChange:o,onSyncStateChange:c,offlineQueueSize:d=50,retryAttempts:m=3}=e,{socket:g,isConnected:f,on:h}=(0,t.useSocket)(),[p,y]=(0,a.useState)(!1),[v,x]=(0,a.useState)({lastSyncTime:Date.now(),pendingChanges:new Map,conflictedChanges:new Map});(0,a.useRef)([]);let b=(0,a.useRef)([]),w=(0,a.useCallback)((e,t,a)=>{if(!g)return;let r=`${e}_${Date.now()}_${Math.random()}`;if(a?.optimistic&&x(a=>({...a,pendingChanges:new Map(a.pendingChanges).set(r,{event:e,data:t})})),f&&g)g.emit(e,{...t,eventId:r});else{let a={id:r,event:e,data:{...t,eventId:r},timestamp:Date.now(),retryCount:0};b.current.push(a),b.current.length>d&&b.current.shift(),console.log("[RealtimeEvents] Event queued offline:",e,a)}},[g,f,d]),C=(0,a.useCallback)((e,t)=>"object"!=typeof e||"object"!=typeof t||Array.isArray(e)?t:{...e,...t,_localTimestamp:e._localTimestamp,_remoteTimestamp:t._remoteTimestamp},[]),k=(0,a.useCallback)(async()=>{if(!f||!g)return;let e=[...b.current];for(let t of(console.log("[RealtimeEvents] Syncing offline queue, items:",e.length),e)){if(t.retryCount>=m){console.warn("[RealtimeEvents] Max retries exceeded for:",t.event,t.id),x(e=>({...e,conflictedChanges:new Map(e.conflictedChanges).set(t.id,t)}));continue}try{g.emit(t.event,t.data),t.retryCount++,b.current=b.current.filter(e=>e.id!==t.id),console.log("[RealtimeEvents] Successfully synced:",t.event)}catch(e){console.error("[RealtimeEvents] Failed to sync event:",e),t.retryCount++}}x(e=>({...e,lastSyncTime:Date.now()}))},[f,g,m]),E=(0,a.useCallback)(e=>{console.log("[RealtimeEvents] Device status update:",e),n?.(e),x(t=>({...t,pendingChanges:new Map([...t.pendingChanges].filter(([t,a])=>a.deviceId!==e.deviceId))}))},[n]),j=(0,a.useCallback)(e=>{console.log("[RealtimeEvents] Playlist update:",e),s?.(e),x(t=>{let a=[...t.pendingChanges.entries()].filter(([t,a])=>a.playlistId===e.playlistId);return a.length>0?(C(a[0][1],e.payload),{...t,pendingChanges:new Map([...t.pendingChanges].filter(([e])=>!a.some(([t])=>t===e)))}):t})},[s,C]),S=(0,a.useCallback)(e=>{console.log("[RealtimeEvents] Health alert:",e),i?.(e)},[i]),D=(0,a.useCallback)(e=>{console.log("[RealtimeEvents] Schedule execution:",e),l?.(e)},[l]);return(0,a.useEffect)(()=>{if(!r||!g)return;let e=h("device:status-update",E),t=h("playlist:updated",j),a=h("health:alert",S),n=h("schedule:executed",D),s=h("connect",()=>{y(!1),o?.(!0),console.log("[RealtimeEvents] Connected, syncing offline queue..."),k()}),i=h("disconnect",()=>{y(!0),o?.(!1),console.log("[RealtimeEvents] Disconnected, offline mode enabled")});return c&&c(v),()=>{e?.(),t?.(),a?.(),n?.(),s?.(),i?.()}},[r,g,h,E,j,S,D,o,c,v,k]),(0,a.useEffect)(()=>{let e=()=>{console.log("[RealtimeEvents] Browser online, attempting to sync..."),y(!1),f&&k()},t=()=>{console.log("[RealtimeEvents] Browser offline, queuing events..."),y(!0)};return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[f,k]),{isConnected:f,isOffline:p,syncState:v,offlineQueueLength:b.current.length,emitDeviceUpdate:e=>{w("device:update",e,{optimistic:!0})},emitPlaylistUpdate:e=>{w("playlist:update",e,{optimistic:!0})},emitScheduleUpdate:e=>{w("schedule:update",e,{optimistic:!0})},emitCustomEvent:(e,t,a)=>{w(e,t,a)},syncOfflineQueue:k,clearOfflineQueue:()=>{console.log("[RealtimeEvents] Clearing offline queue"),b.current=[]},getOfflineQueue:()=>[...b.current],getConflictedChanges:()=>new Map(v.conflictedChanges),resolveConflict:C}}function d(e,t={}){let{onRollback:r,onCommit:n,enableLogging:s=!0}=t,[i,l]=(0,a.useState)(e),[o,c]=(0,a.useState)(new Map),u=(0,a.useRef)([]),m=(0,a.useCallback)((e,t,a)=>{l(r=>{let n=t(r),i={id:e,previousState:r,optimisticState:n,timestamp:Date.now(),metadata:a};return c(t=>new Map(t).set(e,i)),u.current.push(i),s&&console.log("[OptimisticState] Applied optimistic update:",e,{previous:r,optimistic:n}),n})},[s]),g=(0,a.useCallback)(e=>{c(t=>{let a=new Map(t),r=a.get(e);return r&&(s&&console.log("[OptimisticState] Committed update:",e),n?.(r),a.delete(e)),a})},[s,n]),f=(0,a.useCallback)((e,t)=>{c(a=>{let n=new Map(a),i=n.get(e);return i&&(l(t??i.previousState),s&&console.log("[OptimisticState] Rolled back update:",e,{previousState:i.previousState}),r?.(i),n.delete(e)),n})},[s,r]);return{state:i,pendingUpdates:o,updateOptimistic:m,commitOptimistic:g,rollbackOptimistic:f,rollbackAll:(0,a.useCallback)(()=>{c(e=>{if(0===e.size)return e;let t=Array.from(e.values()),a=t[0]?.previousState;return a&&(l(a),s&&console.log("[OptimisticState] Rolled back all updates:",e.size),t.forEach(e=>r?.(e))),new Map})},[s,r]),batchUpdate:(0,a.useCallback)(e=>{l(t=>{let a=t;return e.forEach(({id:e,updater:r,metadata:n})=>{let i={id:e,previousState:t,optimisticState:a=r(a),timestamp:Date.now(),metadata:n};c(t=>new Map(t).set(e,i)),u.current.push(i),s&&console.log("[OptimisticState] Batched update:",e)}),a})},[s]),getPendingCount:()=>o.size,hasPendingUpdates:()=>o.size>0,getUpdateQueue:()=>[...u.current]}}function m(e={}){let{onError:t,onRetry:r,onCircuitBreakerChange:n,retryConfig:s,circuitBreakerConfig:i,enableLogging:l=!0}=e,o={maxAttempts:3,initialDelay:1e3,maxDelay:3e4,backoffMultiplier:2,jitter:!0,...s},c={failureThreshold:5,successThreshold:2,timeout:6e4,...i},[u,d]=(0,a.useState)(new Map),[g,f]=(0,a.useState)({state:"CLOSED",failureCount:0,successCount:0,lastStateChangeTime:Date.now()}),h=(0,a.useRef)(new Map),p=(0,a.useCallback)(e=>{let t=Math.min(o.initialDelay*Math.pow(o.backoffMultiplier,e),o.maxDelay);return Math.floor(o.jitter?t*(.5+Math.random()):t)},[o]),y=(0,a.useCallback)(e=>{f(t=>{let a=t.state,r=t.failureCount,s=t.successCount;return e?(r=0,s=t.successCount+1,"HALF_OPEN"===t.state&&s>=c.successThreshold&&(a="CLOSED",s=0,l&&console.log("[ErrorRecovery] Circuit breaker CLOSED after successful recovery"),n?.(!1))):(s=0,(r=t.failureCount+1)>=c.failureThreshold&&"CLOSED"===t.state&&(a="OPEN",l&&console.log("[ErrorRecovery] Circuit breaker OPENED due to repeated failures"),n?.(!0))),{...t,state:a,failureCount:r,successCount:s,lastFailureTime:e?t.lastFailureTime:Date.now(),lastStateChangeTime:a!==t.state?Date.now():t.lastStateChangeTime}})},[c,l,n]),v=(0,a.useCallback)(()=>{f(e=>"OPEN"===e.state&&Date.now()-e.lastStateChangeTime>=c.timeout?(l&&console.log("[ErrorRecovery] Circuit breaker transitioning to HALF_OPEN"),{...e,state:"HALF_OPEN",successCount:0,failureCount:0,lastStateChangeTime:Date.now()}):e)},[c.timeout,l]),x=(0,a.useCallback)((e,a,r="warning",n)=>{let s={id:e,error:a,severity:r,timestamp:Date.now(),retryCount:0,context:n};d(t=>new Map(t).set(e,s)),y(!1),t?.(s),l&&console.error("[ErrorRecovery] Error recorded:",{id:e,error:a instanceof Error?a.message:a,severity:r})},[y,t,l]),b=(0,a.useCallback)((e,t,a,n)=>{if(v(),"OPEN"===g.state){let t=Error("Circuit breaker is OPEN - too many failures");return x(e,t,"critical"),n?.(t),Promise.reject(t)}let s=(i=0)=>{if(i>=o.maxAttempts){let t=Error(`Max retry attempts (${o.maxAttempts}) exceeded for ${e}`);return x(e,t,"critical",{retryCount:i}),n?.(t),Promise.reject(t)}return t().then(t=>(h.current.delete(e),d(t=>{let a=new Map(t);return a.delete(e),a}),y(!0),a?.(t),l&&console.log("[ErrorRecovery] Operation succeeded:",{id:e,retryCount:i}),t)).catch(t=>{let a=p(i),n=Date.now()+a;return d(a=>{let r=new Map(a),s=r.get(e)??{id:e,error:t,severity:"warning",timestamp:Date.now(),retryCount:0};return s.retryCount=i+1,s.lastRetryTime=Date.now(),s.nextRetryTime=n,r.set(e,s),r}),r?.({id:e,error:t,severity:"warning",timestamp:Date.now(),retryCount:i+1,lastRetryTime:Date.now(),nextRetryTime:n}),l&&console.log("[ErrorRecovery] Retrying after",a,"ms:",{id:e,attempt:i+1,maxAttempts:o.maxAttempts}),new Promise((t,r)=>{let n=setTimeout(()=>s(i+1).then(t).catch(r),a),l=h.current.get(e)??{count:0};l.timeout=n,h.current.set(e,l)})})};return s()},[o,g,p,x,y,v,l]),w=(0,a.useCallback)(e=>{d(t=>{let a=new Map(t);return a.delete(e),a});let t=h.current.get(e);t?.timeout&&clearTimeout(t.timeout),h.current.delete(e)},[]),C=(0,a.useCallback)(()=>{h.current.forEach(({timeout:e})=>{e&&clearTimeout(e)}),h.current.clear(),d(new Map)},[]),k=(0,a.useCallback)(()=>{f({state:"CLOSED",failureCount:0,successCount:0,lastStateChangeTime:Date.now()}),l&&console.log("[ErrorRecovery] Circuit breaker reset to CLOSED"),n?.(!1)},[l,n]);return{errors:u,circuitBreaker:g,isCircuitBreakerOpen:"OPEN"===g.state,recordError:x,retry:b,clearError:w,clearAllErrors:C,resetCircuitBreaker:k,getError:e=>u.get(e),getAllErrors:()=>new Map(u),getErrorCount:()=>u.size,hasCriticalErrors:()=>Array.from(u.values()).some(e=>"critical"===e.severity)}}e.s(["useBandwidthUsage",()=>o,"useContentPerformance",()=>s,"useDeviceDistribution",()=>l,"useDeviceMetrics",()=>n,"usePlaylistPerformance",()=>c,"useUsageTrends",()=>i],50079),e.s(["useRealtimeEvents",()=>u],65255),e.s(["useOptimisticState",()=>d],62211),e.s(["useErrorRecovery",()=>m],47348),e.s([],69381)},39280,e=>{"use strict";var t=e.i(13509);function a({value:e,onChange:a,placeholder:r="Search...",className:n=""}){return(0,t.jsx)("div",{className:`bg-white dark:bg-gray-900 rounded-lg shadow p-4 ${n}`,children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",value:e,onChange:e=>a(e.target.value),placeholder:r,className:"w-full pl-10 pr-10 py-2 border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-50 placeholder-gray-400 dark:placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",autoComplete:"off"}),(0,t.jsx)("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e&&(0,t.jsx)("button",{onClick:()=>a(""),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":"Clear search",children:(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}e.s(["default",()=>a])}]);