module.exports=[58894,a=>{"use strict";var b=a.i(41423),c=a.i(26063),d=a.i(920),e=a.i(79412),f=a.i(31893),g=a.i(61027),h=a.i(51355),i=a.i(57052),j=a.i(38982),k=a.i(31525);function l(){let a=(0,d.useRouter)(),l=(0,i.useToast)(),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)(!0),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)({nickname:"",location:""}),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(""),I=(0,j.useDebounce)(G,300),[J,K]=(0,c.useState)(null),[L,M]=(0,c.useState)("asc"),[N,O]=(0,c.useState)(1),[P,Q]=(0,c.useState)(10);(0,c.useEffect)(()=>{R(),S()},[]);let R=async()=>{try{r(!0);let a=await e.apiClient.getDisplays();n(a.data||a||[])}catch(a){l.error(a.message||"Failed to load devices")}finally{r(!1)}},S=async()=>{try{let a=await e.apiClient.getPlaylists();p(a.data||a||[])}catch(a){}},T=a=>{if(!a)return null;let b=o.find(b=>b.id===a);return b?.name||null},U=async()=>{if(s)try{F(!0),await e.apiClient.updateDisplay(s.id,C),l.success("Device updated successfully"),v(!1),R()}catch(a){l.error(a.message||"Failed to update device")}finally{F(!1)}},V=async()=>{if(s)try{F(!0),await e.apiClient.deleteDisplay(s.id),l.success("Device deleted successfully"),R()}catch(a){l.error(a.message||"Failed to delete device")}finally{F(!1)}},W=async a=>{try{F(!0);let b=await e.apiClient.generatePairingToken(a.id);B(b.pairingCode||"N/A"),t(a),z(!0)}catch(a){l.error(a.message||"Failed to generate pairing code")}finally{F(!1)}},X=a=>{J===a?"asc"===L?M("desc"):K(null):(K(a),M("asc"))},Y=m.filter(a=>!I||a.nickname.toLowerCase().includes(I.toLowerCase())||a.location&&a.location.toLowerCase().includes(I.toLowerCase())).sort((a,b)=>{if(!J)return 0;let c=a[J],d=b[J];return null==c&&null==d?0:null==c?1:null==d?-1:c<d?"asc"===L?-1:1:c>d?"asc"===L?1:-1:0}),Z=Y.length,$=Math.ceil(Z/P),_=(N-1)*P,aa=_+P,ab=Y.slice(_,aa);(0,c.useEffect)(()=>{O(1)},[I]);let ac=a=>J!==a?null:"asc"===L?" ↑":" ↓";return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(l.ToastContainer,{}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Devices"}),(0,b.jsxs)("p",{className:"mt-2 text-gray-600",children:["Manage your paired display devices (",m.length," total)"]})]}),(0,b.jsxs)("button",{onClick:()=>a.push("/dashboard/devices/pair"),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition font-semibold shadow-md hover:shadow-lg flex items-center gap-2",children:[(0,b.jsx)(k.Icon,{name:"add",size:"lg",className:"text-white"}),(0,b.jsx)("span",{children:"Pair New Device"})]})]}),(0,b.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:"text",value:G,onChange:a=>H(a.target.value),placeholder:"Search devices by name or location...",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",autoComplete:"off"}),(0,b.jsx)("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),G&&(0,b.jsx)("button",{onClick:()=>H(""),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),q?(0,b.jsx)("div",{className:"bg-white rounded-lg shadow p-12",children:(0,b.jsx)(h.default,{size:"lg"})}):0===m.length?(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[(0,b.jsx)(k.Icon,{name:"devices",size:"6xl",className:"mx-auto mb-4 text-gray-400"}),(0,b.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No devices yet"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:"Get started by pairing your first display device"}),(0,b.jsx)("button",{onClick:()=>a.push("/dashboard/devices/pair"),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition font-semibold",children:"Pair Device"})]}):(0,b.jsxs)(b.Fragment,{children:[I&&(0,b.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:(0,b.jsxs)("p",{className:"text-sm text-blue-800",children:[ab.length," ",1===ab.length?"result":"results"," found"]})}),(0,b.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none",onClick:()=>X("nickname"),children:["Device",ac("nickname")]}),(0,b.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none",onClick:()=>X("status"),children:["Status",ac("status")]}),(0,b.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none",onClick:()=>X("location"),children:["Location",ac("location")]}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Currently Playing"}),(0,b.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none",onClick:()=>X("lastHeartbeat"),children:["Last Seen",ac("lastHeartbeat")]}),(0,b.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:ab.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50 transition",children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(k.Icon,{name:"devices",size:"xl",className:"mr-3 text-gray-600"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:a.nickname}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:["ID: ",a.id]})]})]})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:`w-2 h-2 rounded-full ${"online"===a.status?"bg-green-500":"bg-gray-400"}`}),(0,b.jsx)("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${"online"===a.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:a.status})]})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:a.location||"—"}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:T(a.currentPlaylistId)?(0,b.jsxs)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-semibold flex items-center gap-1 w-fit",children:[(0,b.jsx)(k.Icon,{name:"playlists",size:"sm",className:"text-blue-800"}),(0,b.jsx)("span",{children:T(a.currentPlaylistId)})]}):(0,b.jsx)("span",{className:"text-gray-400 italic",children:"No playlist"})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.lastSeen?new Date(a.lastSeen).toLocaleString():"Never"}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)("button",{onClick:()=>{t(a),D({nickname:a.nickname,location:a.location||""}),v(!0)},className:"text-blue-600 hover:text-blue-800 hover:bg-blue-50 px-3 py-1 rounded transition font-medium",children:"Edit"}),(0,b.jsx)("button",{onClick:()=>W(a),className:"text-purple-600 hover:text-purple-800 hover:bg-purple-50 px-3 py-1 rounded transition font-medium",children:"Pair"}),(0,b.jsx)("button",{onClick:()=>{t(a),x(!0)},className:"text-red-600 hover:text-red-800 hover:bg-red-50 px-3 py-1 rounded transition font-medium",children:"Delete"})]})})]},a.id))})]})}),Z>0&&(0,b.jsxs)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6 rounded-b-lg",children:[(0,b.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,b.jsx)("button",{onClick:()=>O(a=>Math.max(1,a-1)),disabled:1===N,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,b.jsx)("button",{onClick:()=>O(a=>Math.min($,a+1)),disabled:N===$,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),(0,b.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing ",(0,b.jsx)("span",{className:"font-medium",children:_+1})," to"," ",(0,b.jsx)("span",{className:"font-medium",children:Math.min(aa,Z)})," of"," ",(0,b.jsx)("span",{className:"font-medium",children:Z})," devices"]}),(0,b.jsxs)("select",{value:P,onChange:a=>{Q(Number(a.target.value)),O(1)},className:"text-sm border-gray-300 rounded-md",children:[(0,b.jsx)("option",{value:10,children:"10 per page"}),(0,b.jsx)("option",{value:25,children:"25 per page"}),(0,b.jsx)("option",{value:50,children:"50 per page"}),(0,b.jsx)("option",{value:100,children:"100 per page"})]})]}),(0,b.jsx)("div",{children:(0,b.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[(0,b.jsx)("button",{onClick:()=>O(a=>Math.max(1,a-1)),disabled:1===N,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"← Previous"}),Array.from({length:Math.min(5,$)},(a,c)=>{let d;return d=$<=5||N<=3?c+1:N>=$-2?$-4+c:N-2+c,(0,b.jsx)("button",{onClick:()=>O(d),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${N===d?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:d},d)}),(0,b.jsx)("button",{onClick:()=>O(a=>Math.min($,a+1)),disabled:N===$,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next →"})]})})]})]})]}),(0,b.jsx)(f.default,{isOpen:u,onClose:()=>v(!1),title:"Edit Device",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Device Nickname"}),(0,b.jsx)("input",{type:"text",value:C.nickname,onChange:a=>D({...C,nickname:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Store Front Display"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location (Optional)"}),(0,b.jsx)("input",{type:"text",value:C.location,onChange:a=>D({...C,location:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Main Entrance"})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,b.jsx)("button",{onClick:()=>v(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition",disabled:E,children:"Cancel"}),(0,b.jsxs)("button",{onClick:U,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition disabled:opacity-50 flex items-center gap-2",disabled:E||!C.nickname.trim(),children:[E&&(0,b.jsx)(h.default,{size:"sm"}),"Save Changes"]})]})]})}),(0,b.jsx)(f.default,{isOpen:y,onClose:()=>z(!1),title:"Pairing Code",children:(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)("p",{className:"text-gray-600",children:"Enter this code on your display device to pair it:"}),(0,b.jsx)("div",{className:"bg-gray-100 rounded-lg p-6",children:(0,b.jsx)("div",{className:"text-4xl font-bold text-blue-600 tracking-widest",children:A})}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"This code will expire in 5 minutes"}),(0,b.jsx)("button",{onClick:()=>z(!1),className:"w-full px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition",children:"Done"})]})}),(0,b.jsx)(g.default,{isOpen:w,onClose:()=>x(!1),onConfirm:V,title:"Delete Device",message:`Are you sure you want to delete "${s?.nickname}"? This action cannot be undone.`,confirmText:"Delete",type:"danger"})]})}a.s(["default",()=>l])}];

//# sourceMappingURL=web_src_app_dashboard_devices_page_tsx_e8aef0d9._.js.map