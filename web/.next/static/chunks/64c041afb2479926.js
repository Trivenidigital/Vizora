(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,69684,e=>{"use strict";var t=e.i(13509),a=e.i(29554);function r({icon:e,title:r,description:s,action:l,variant:n="default"}){return"minimal"===n?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[(0,t.jsx)(a.Icon,{name:e,size:"2xl",className:"text-gray-300 mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:r}),(0,t.jsx)("p",{className:"text-sm text-gray-500 text-center max-w-sm",children:s}),l&&(0,t.jsx)("button",{onClick:l.onClick,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:l.label})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 px-4 bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg border border-blue-100",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center mb-6 shadow-sm",children:(0,t.jsx)(a.Icon,{name:e,size:"2xl",className:"text-blue-600"})}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:r}),(0,t.jsx)("p",{className:"text-gray-600 text-center max-w-sm mb-6",children:s}),l&&(0,t.jsx)("button",{onClick:l.onClick,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium",children:l.label})]})}e.s(["default",()=>r])},63358,e=>{"use strict";var t=e.i(13509);function a({size:e="md"}){return(0,t.jsx)("div",{className:"flex items-center justify-center",role:"status","aria-live":"polite","aria-label":"Loading",children:(0,t.jsx)("div",{className:`${{sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[e]} border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin`,"aria-hidden":"true"})})}e.s(["default",()=>a])},62821,e=>{"use strict";var t=e.i(13509),a=e.i(26670),r=e.i(29554);function s({message:e,type:s,onClose:l,duration:n=5e3}){let[i,o]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=setTimeout(()=>{o(!1),setTimeout(l,300)},n);return()=>clearTimeout(e)},[n,l]),(0,t.jsxs)("div",{role:"alert","aria-live":"assertive","aria-atomic":"true",className:`fixed top-4 right-4 z-50 flex items-center gap-3 px-6 py-4 rounded-lg shadow-lg text-white ${{success:"bg-success-500 text-white",error:"bg-error-500 text-white",info:"bg-info-500 text-white",warning:"bg-warning-500 text-white"}[s]} transform transition-all duration-300 ${i?"translate-x-0 opacity-100":"translate-x-full opacity-0"}`,children:[(0,t.jsx)(r.Icon,{name:{success:"success",error:"delete",info:"info",warning:"warning"}[s],size:"md",className:"text-white"}),(0,t.jsx)("span",{className:"font-medium",children:e}),(0,t.jsx)("button",{onClick:()=>{o(!1),setTimeout(l,300)},className:"ml-4 hover:opacity-75 transition",children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})}function l(){let[e,r]=(0,a.useState)([]),l=(0,a.useCallback)(e=>{r(t=>t.filter(t=>t.id!==e))},[]),n=(0,a.useCallback)((e,t="info",a=5e3)=>{let s=Math.random().toString(36).substring(7);r(a=>[...a,{id:s,message:e,type:t}]),a>0&&setTimeout(()=>{l(s)},a)},[l]);return{showToast:n,success:e=>n(e,"success"),error:e=>n(e,"error"),info:e=>n(e,"info"),warning:e=>n(e,"warning"),ToastContainer:(0,a.useCallback)(()=>(0,t.jsx)(t.Fragment,{children:e.map(e=>(0,t.jsx)(s,{message:e.message,type:e.type,onClose:()=>l(e.id)},e.id))}),[e,l])}}e.s(["useToast",()=>l],62821)},51430,e=>{"use strict";var t=e.i(26670);function a(e,r=300){let[s,l]=(0,t.useState)(e);return(0,t.useEffect)(()=>{let t=setTimeout(()=>{l(e)},r);return()=>{clearTimeout(t)}},[e,r]),s}e.s(["useDebounce",()=>a])},35830,e=>{"use strict";e.i(92762),e.s([])},69381,50079,65255,62211,47348,e=>{"use strict";e.i(69461);var t=e.i(82580);e.i(62821),e.i(35830),e.i(51430);var a=e.i(26670),r=e.i(24741);function s(e="month"){let[t,l]=(0,a.useState)([]),[n,i]=(0,a.useState)(!0),[o,c]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async()=>{try{i(!0),c(null);let t={week:7,month:30,year:365}[e];try{let t=await r.apiClient.getDeviceMetrics?.(e);if(t&&t.length>0)return void l(t)}catch(e){console.log("Analytics API not available, using mock data")}let a=Array.from({length:t},(e,a)=>({date:new Date(Date.now()-(t-1-a)*864e5).toLocaleDateString("en-US",{month:"short",day:"numeric"}),mobile:85+10*Math.random(),tablet:92+8*Math.random(),desktop:98+2*Math.random()}));l(a)}catch(e){c(e instanceof Error?e.message:"Failed to fetch device metrics"),l([])}finally{i(!1)}})()},[e]),{data:t,loading:n,error:o,dateRange:e}}function l(e="month"){let[t,s]=(0,a.useState)([]),[n,i]=(0,a.useState)(!0),[o,c]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async()=>{try{i(!0),c(null);try{let t=await r.apiClient.getContentPerformance?.(e);if(t&&t.length>0)return void s(t)}catch(e){console.log("Content performance API not available, using mock data")}s([{title:"Welcome Video",views:1240,engagement:87,shares:45},{title:"Product Demo",views:980,engagement:76,shares:32},{title:"Tutorial Series",views:2100,engagement:92,shares:58},{title:"Company Overview",views:650,engagement:64,shares:18},{title:"Customer Testimonials",views:1580,engagement:89,shares:42},{title:"FAQ Section",views:420,engagement:45,shares:12}])}catch(e){c(e instanceof Error?e.message:"Failed to fetch content performance"),s([])}finally{i(!1)}})()},[e]),{data:t,loading:n,error:o,dateRange:e}}function n(e="month"){let[t,s]=(0,a.useState)([]),[l,i]=(0,a.useState)(!0),[o,c]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async()=>{try{i(!0),c(null);let t={week:7,month:30,year:365}[e];try{let t=await r.apiClient.getUsageTrends?.(e);if(t&&t.length>0)return void s(t)}catch(e){console.log("Usage trends API not available, using mock data")}let a=Array.from({length:t},(e,a)=>({date:new Date(Date.now()-(t-1-a)*864e5).toLocaleDateString("en-US",{month:"short",day:"numeric"}),video:2400+800*Math.random(),image:1200+400*Math.random(),text:600+300*Math.random(),interactive:800+400*Math.random()}));s(a)}catch(e){c(e instanceof Error?e.message:"Failed to fetch usage trends"),s([])}finally{i(!1)}})()},[e]),{data:t,loading:l,error:o,dateRange:e}}function i(){let[e,t]=(0,a.useState)([]),[s,l]=(0,a.useState)(!0),[n,i]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async()=>{try{l(!0),i(null);try{let e=await r.apiClient.getDeviceDistribution?.();if(e&&e.length>0)return void t(e)}catch(e){console.log("Device distribution API not available, using mock data")}t([{name:"Smartphones",value:35,color:"#3B82F6"},{name:"Tablets",value:25,color:"#8B5CF6"},{name:"Desktop Displays",value:28,color:"#EC4899"},{name:"Smart TVs",value:8,color:"#F59E0B"},{name:"Interactive Kiosks",value:4,color:"#10B981"}])}catch(e){i(e instanceof Error?e.message:"Failed to fetch device distribution"),t([])}finally{l(!1)}})()},[]),{data:e,loading:s,error:n}}function o(e="month"){let[t,s]=(0,a.useState)([]),[l,n]=(0,a.useState)(!0),[i,c]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async()=>{try{n(!0),c(null);let t={week:7,month:30,year:365}[e];try{let t=await r.apiClient.getBandwidthUsage?.(e);if(t&&t.length>0)return void s(t)}catch(e){console.log("Bandwidth usage API not available, using mock data")}let a=Array.from({length:t},(e,a)=>({date:new Date(Date.now()-(t-1-a)*864e5).toLocaleDateString("en-US",{month:"short",day:"numeric"}),current:2400+1e3*Math.random(),average:2200,peak:3200}));s(a)}catch(e){c(e instanceof Error?e.message:"Failed to fetch bandwidth usage"),s([])}finally{n(!1)}})()},[e]),{data:t,loading:l,error:i,dateRange:e}}function c(e="month"){let[t,s]=(0,a.useState)([]),[l,n]=(0,a.useState)(!0),[i,o]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async()=>{try{n(!0),o(null);try{let t=await r.apiClient.getPlaylistPerformance?.(e);if(t&&t.length>0)return void s(t)}catch(e){console.log("Playlist performance API not available, using mock data")}s([{name:"Morning Promotions",plays:234,engagement:87,uniqueDevices:12},{name:"Lunch Specials",plays:189,engagement:92,uniqueDevices:10},{name:"Evening Content",plays:156,engagement:78,uniqueDevices:8},{name:"Educational Videos",plays:298,engagement:85,uniqueDevices:15},{name:"Emergency Alerts",plays:45,engagement:95,uniqueDevices:5}])}catch(e){o(e instanceof Error?e.message:"Failed to fetch playlist performance"),s([])}finally{n(!1)}})()},[e]),{data:t,loading:l,error:i,dateRange:e}}function d(e={}){let{enabled:r=!0,onDeviceStatusChange:s,onPlaylistChange:l,onHealthAlert:n,onScheduleExecution:i,onConnectionChange:o,onSyncStateChange:c,offlineQueueSize:u=50,retryAttempts:m=3}=e,{socket:g,isConnected:h,on:x}=(0,t.useSocket)(),[b,p]=(0,a.useState)(!1),[y,f]=(0,a.useState)({lastSyncTime:Date.now(),pendingChanges:new Map,conflictedChanges:new Map});(0,a.useRef)([]);let v=(0,a.useRef)([]),w=(0,a.useCallback)((e,t,a)=>{if(!g)return;let r=`${e}_${Date.now()}_${Math.random()}`;if(a?.optimistic&&f(a=>({...a,pendingChanges:new Map(a.pendingChanges).set(r,{event:e,data:t})})),h&&g)g.emit(e,{...t,eventId:r});else{let a={id:r,event:e,data:{...t,eventId:r},timestamp:Date.now(),retryCount:0};v.current.push(a),v.current.length>u&&v.current.shift(),console.log("[RealtimeEvents] Event queued offline:",e,a)}},[g,h,u]),k=(0,a.useCallback)((e,t)=>"object"!=typeof e||"object"!=typeof t||Array.isArray(e)?t:{...e,...t,_localTimestamp:e._localTimestamp,_remoteTimestamp:t._remoteTimestamp},[]),j=(0,a.useCallback)(async()=>{if(!h||!g)return;let e=[...v.current];for(let t of(console.log("[RealtimeEvents] Syncing offline queue, items:",e.length),e)){if(t.retryCount>=m){console.warn("[RealtimeEvents] Max retries exceeded for:",t.event,t.id),f(e=>({...e,conflictedChanges:new Map(e.conflictedChanges).set(t.id,t)}));continue}try{g.emit(t.event,t.data),t.retryCount++,v.current=v.current.filter(e=>e.id!==t.id),console.log("[RealtimeEvents] Successfully synced:",t.event)}catch(e){console.error("[RealtimeEvents] Failed to sync event:",e),t.retryCount++}}f(e=>({...e,lastSyncTime:Date.now()}))},[h,g,m]),C=(0,a.useCallback)(e=>{console.log("[RealtimeEvents] Device status update:",e),s?.(e),f(t=>({...t,pendingChanges:new Map([...t.pendingChanges].filter(([t,a])=>a.deviceId!==e.deviceId))}))},[s]),N=(0,a.useCallback)(e=>{console.log("[RealtimeEvents] Playlist update:",e),l?.(e),f(t=>{let a=[...t.pendingChanges.entries()].filter(([t,a])=>a.playlistId===e.playlistId);return a.length>0?(k(a[0][1],e.payload),{...t,pendingChanges:new Map([...t.pendingChanges].filter(([e])=>!a.some(([t])=>t===e)))}):t})},[l,k]),E=(0,a.useCallback)(e=>{console.log("[RealtimeEvents] Health alert:",e),n?.(e)},[n]),S=(0,a.useCallback)(e=>{console.log("[RealtimeEvents] Schedule execution:",e),i?.(e)},[i]);return(0,a.useEffect)(()=>{if(!r||!g)return;let e=x("device:status-update",C),t=x("playlist:updated",N),a=x("health:alert",E),s=x("schedule:executed",S),l=x("connect",()=>{p(!1),o?.(!0),console.log("[RealtimeEvents] Connected, syncing offline queue..."),j()}),n=x("disconnect",()=>{p(!0),o?.(!1),console.log("[RealtimeEvents] Disconnected, offline mode enabled")});return c&&c(y),()=>{e?.(),t?.(),a?.(),s?.(),l?.(),n?.()}},[r,g,x,C,N,E,S,o,c,y,j]),(0,a.useEffect)(()=>{let e=()=>{console.log("[RealtimeEvents] Browser online, attempting to sync..."),p(!1),h&&j()},t=()=>{console.log("[RealtimeEvents] Browser offline, queuing events..."),p(!0)};return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[h,j]),{isConnected:h,isOffline:b,syncState:y,offlineQueueLength:v.current.length,emitDeviceUpdate:e=>{w("device:update",e,{optimistic:!0})},emitPlaylistUpdate:e=>{w("playlist:update",e,{optimistic:!0})},emitScheduleUpdate:e=>{w("schedule:update",e,{optimistic:!0})},emitCustomEvent:(e,t,a)=>{w(e,t,a)},syncOfflineQueue:j,clearOfflineQueue:()=>{console.log("[RealtimeEvents] Clearing offline queue"),v.current=[]},getOfflineQueue:()=>[...v.current],getConflictedChanges:()=>new Map(y.conflictedChanges),resolveConflict:k}}function u(e,t={}){let{onRollback:r,onCommit:s,enableLogging:l=!0}=t,[n,i]=(0,a.useState)(e),[o,c]=(0,a.useState)(new Map),d=(0,a.useRef)([]),m=(0,a.useCallback)((e,t,a)=>{i(r=>{let s=t(r),n={id:e,previousState:r,optimisticState:s,timestamp:Date.now(),metadata:a};return c(t=>new Map(t).set(e,n)),d.current.push(n),l&&console.log("[OptimisticState] Applied optimistic update:",e,{previous:r,optimistic:s}),s})},[l]),g=(0,a.useCallback)(e=>{c(t=>{let a=new Map(t),r=a.get(e);return r&&(l&&console.log("[OptimisticState] Committed update:",e),s?.(r),a.delete(e)),a})},[l,s]),h=(0,a.useCallback)((e,t)=>{c(a=>{let s=new Map(a),n=s.get(e);return n&&(i(t??n.previousState),l&&console.log("[OptimisticState] Rolled back update:",e,{previousState:n.previousState}),r?.(n),s.delete(e)),s})},[l,r]);return{state:n,pendingUpdates:o,updateOptimistic:m,commitOptimistic:g,rollbackOptimistic:h,rollbackAll:(0,a.useCallback)(()=>{c(e=>{if(0===e.size)return e;let t=Array.from(e.values()),a=t[0]?.previousState;return a&&(i(a),l&&console.log("[OptimisticState] Rolled back all updates:",e.size),t.forEach(e=>r?.(e))),new Map})},[l,r]),batchUpdate:(0,a.useCallback)(e=>{i(t=>{let a=t;return e.forEach(({id:e,updater:r,metadata:s})=>{let n={id:e,previousState:t,optimisticState:a=r(a),timestamp:Date.now(),metadata:s};c(t=>new Map(t).set(e,n)),d.current.push(n),l&&console.log("[OptimisticState] Batched update:",e)}),a})},[l]),getPendingCount:()=>o.size,hasPendingUpdates:()=>o.size>0,getUpdateQueue:()=>[...d.current]}}function m(e={}){let{onError:t,onRetry:r,onCircuitBreakerChange:s,retryConfig:l,circuitBreakerConfig:n,enableLogging:i=!0}=e,o={maxAttempts:3,initialDelay:1e3,maxDelay:3e4,backoffMultiplier:2,jitter:!0,...l},c={failureThreshold:5,successThreshold:2,timeout:6e4,...n},[d,u]=(0,a.useState)(new Map),[g,h]=(0,a.useState)({state:"CLOSED",failureCount:0,successCount:0,lastStateChangeTime:Date.now()}),x=(0,a.useRef)(new Map),b=(0,a.useCallback)(e=>{let t=Math.min(o.initialDelay*Math.pow(o.backoffMultiplier,e),o.maxDelay);return Math.floor(o.jitter?t*(.5+Math.random()):t)},[o]),p=(0,a.useCallback)(e=>{h(t=>{let a=t.state,r=t.failureCount,l=t.successCount;return e?(r=0,l=t.successCount+1,"HALF_OPEN"===t.state&&l>=c.successThreshold&&(a="CLOSED",l=0,i&&console.log("[ErrorRecovery] Circuit breaker CLOSED after successful recovery"),s?.(!1))):(l=0,(r=t.failureCount+1)>=c.failureThreshold&&"CLOSED"===t.state&&(a="OPEN",i&&console.log("[ErrorRecovery] Circuit breaker OPENED due to repeated failures"),s?.(!0))),{...t,state:a,failureCount:r,successCount:l,lastFailureTime:e?t.lastFailureTime:Date.now(),lastStateChangeTime:a!==t.state?Date.now():t.lastStateChangeTime}})},[c,i,s]),y=(0,a.useCallback)(()=>{h(e=>"OPEN"===e.state&&Date.now()-e.lastStateChangeTime>=c.timeout?(i&&console.log("[ErrorRecovery] Circuit breaker transitioning to HALF_OPEN"),{...e,state:"HALF_OPEN",successCount:0,failureCount:0,lastStateChangeTime:Date.now()}):e)},[c.timeout,i]),f=(0,a.useCallback)((e,a,r="warning",s)=>{let l={id:e,error:a,severity:r,timestamp:Date.now(),retryCount:0,context:s};u(t=>new Map(t).set(e,l)),p(!1),t?.(l),i&&console.error("[ErrorRecovery] Error recorded:",{id:e,error:a instanceof Error?a.message:a,severity:r})},[p,t,i]),v=(0,a.useCallback)((e,t,a,s)=>{if(y(),"OPEN"===g.state){let t=Error("Circuit breaker is OPEN - too many failures");return f(e,t,"critical"),s?.(t),Promise.reject(t)}let l=(n=0)=>{if(n>=o.maxAttempts){let t=Error(`Max retry attempts (${o.maxAttempts}) exceeded for ${e}`);return f(e,t,"critical",{retryCount:n}),s?.(t),Promise.reject(t)}return t().then(t=>(x.current.delete(e),u(t=>{let a=new Map(t);return a.delete(e),a}),p(!0),a?.(t),i&&console.log("[ErrorRecovery] Operation succeeded:",{id:e,retryCount:n}),t)).catch(t=>{let a=b(n),s=Date.now()+a;return u(a=>{let r=new Map(a),l=r.get(e)??{id:e,error:t,severity:"warning",timestamp:Date.now(),retryCount:0};return l.retryCount=n+1,l.lastRetryTime=Date.now(),l.nextRetryTime=s,r.set(e,l),r}),r?.({id:e,error:t,severity:"warning",timestamp:Date.now(),retryCount:n+1,lastRetryTime:Date.now(),nextRetryTime:s}),i&&console.log("[ErrorRecovery] Retrying after",a,"ms:",{id:e,attempt:n+1,maxAttempts:o.maxAttempts}),new Promise((t,r)=>{let s=setTimeout(()=>l(n+1).then(t).catch(r),a),i=x.current.get(e)??{count:0};i.timeout=s,x.current.set(e,i)})})};return l()},[o,g,b,f,p,y,i]),w=(0,a.useCallback)(e=>{u(t=>{let a=new Map(t);return a.delete(e),a});let t=x.current.get(e);t?.timeout&&clearTimeout(t.timeout),x.current.delete(e)},[]),k=(0,a.useCallback)(()=>{x.current.forEach(({timeout:e})=>{e&&clearTimeout(e)}),x.current.clear(),u(new Map)},[]),j=(0,a.useCallback)(()=>{h({state:"CLOSED",failureCount:0,successCount:0,lastStateChangeTime:Date.now()}),i&&console.log("[ErrorRecovery] Circuit breaker reset to CLOSED"),s?.(!1)},[i,s]);return{errors:d,circuitBreaker:g,isCircuitBreakerOpen:"OPEN"===g.state,recordError:f,retry:v,clearError:w,clearAllErrors:k,resetCircuitBreaker:j,getError:e=>d.get(e),getAllErrors:()=>new Map(d),getErrorCount:()=>d.size,hasCriticalErrors:()=>Array.from(d.values()).some(e=>"critical"===e.severity)}}e.s(["useBandwidthUsage",()=>o,"useContentPerformance",()=>l,"useDeviceDistribution",()=>i,"useDeviceMetrics",()=>s,"usePlaylistPerformance",()=>c,"useUsageTrends",()=>n],50079),e.s(["useRealtimeEvents",()=>d],65255),e.s(["useOptimisticState",()=>u],62211),e.s(["useErrorRecovery",()=>m],47348),e.s([],69381)},39280,e=>{"use strict";var t=e.i(13509);function a({value:e,onChange:a,placeholder:r="Search...",className:s=""}){return(0,t.jsx)("div",{className:`bg-white dark:bg-gray-900 rounded-lg shadow p-4 ${s}`,children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",value:e,onChange:e=>a(e.target.value),placeholder:r,className:"w-full pl-10 pr-10 py-2 border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-50 placeholder-gray-400 dark:placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",autoComplete:"off"}),(0,t.jsx)("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e&&(0,t.jsx)("button",{onClick:()=>a(""),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":"Clear search",children:(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}e.s(["default",()=>a])},54678,e=>{"use strict";var t=e.i(13509),a=e.i(26670),r=e.i(24741),s=e.i(29554);let l=({label:e,value:a,unit:r,thresholds:s})=>(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,t.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:e}),(0,t.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[a.toFixed(1),r]})]}),(0,t.jsx)("div",{className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:`h-full ${a>=s.critical?"bg-red-500":a>=s.warning?"bg-yellow-500":"bg-green-500"} transition-all`,style:{width:`${Math.min(a,100)}%`}})})]});function n({health:e,showTemperature:a=!0,showUptime:r=!0,compact:n=!1,className:i=""}){var o;let c=(o=e.score)>=90?{label:"Excellent",color:"text-green-600 dark:text-green-400",bgColor:"bg-green-100 dark:bg-green-900"}:o>=70?{label:"Good",color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-100 dark:bg-blue-900"}:o>=50?{label:"Fair",color:"text-yellow-600 dark:text-yellow-400",bgColor:"bg-yellow-100 dark:bg-yellow-900"}:{label:"Poor",color:"text-red-600 dark:text-red-400",bgColor:"bg-red-100 dark:bg-red-900"};return n?(0,t.jsxs)("div",{className:`flex items-center gap-2 ${i}`,children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Health:"}),(0,t.jsxs)("div",{className:`px-2 py-1 rounded text-xs font-semibold ${c.bgColor} ${c.color}`,children:[e.score,"%"]}),(0,t.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:c.label})]}):(0,t.jsxs)("div",{className:`bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-800 p-4 space-y-4 ${i}`,children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-50",children:"Device Health"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Updated ",new Date(e.lastHeartbeat).toLocaleTimeString()]})]}),(0,t.jsxs)("div",{className:`text-right ${c.color}`,children:[(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[e.score,"%"]}),(0,t.jsx)("div",{className:"text-xs font-medium",children:c.label})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsx)(l,{label:"CPU",value:e.cpuUsage,unit:"%",thresholds:{warning:70,critical:85}})}),(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsx)(l,{label:"Memory",value:e.memoryUsage,unit:"%",thresholds:{warning:75,critical:90}})}),(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsx)(l,{label:"Storage",value:e.storageUsage,unit:"%",thresholds:{warning:80,critical:95}})}),a&&(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsx)(l,{label:"Temperature",value:e.temperature,unit:"¬∞C",thresholds:{warning:50,critical:65}})})]}),r&&(0,t.jsx)("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-800",children:(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"Uptime"}),(0,t.jsx)("span",{className:"font-semibold text-gray-900 dark:text-gray-50",children:e.uptime>=24?`${(e.uptime/24).toFixed(1)} days`:`${e.uptime.toFixed(1)} hours`})]})}),e.score<70&&(0,t.jsx)("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-800",children:(0,t.jsxs)("div",{className:`px-3 py-2 rounded text-xs font-medium ${c.bgColor} ${c.color} flex items-center gap-2`,children:[(0,t.jsx)(s.Icon,{name:"alertTriangle",size:"sm"}),(0,t.jsx)("span",{children:e.score<50?"Device health is poor. Recommended immediate maintenance.":"Device health is degraded. Monitor closely."})]})})]})}var i=e.i(63358),o=e.i(69684),c=e.i(39280),d=e.i(62821),u=e.i(51430);e.i(69381);var m=e.i(65255);let g=(e,t)=>{let a=40*Math.random()+60;return{deviceId:e,cpuUsage:Math.floor(80*Math.random()),memoryUsage:Math.floor(75*Math.random()),storageUsage:Math.floor(60*Math.random()),temperature:Math.floor(30*Math.random()+35),uptime:Math.floor(720*Math.random()),lastHeartbeat:new Date(Date.now()-3e5*Math.random()),score:Math.floor(a)}};function h(){let e=(0,d.useToast)(),[l,h]=(0,a.useState)([]),[x,b]=(0,a.useState)({}),[p,y]=(0,a.useState)(!0),[f,v]=(0,a.useState)(""),w=(0,u.useDebounce)(f,300),[k,j]=(0,a.useState)("health"),[C,N]=(0,a.useState)("desc"),[E,S]=(0,a.useState)("offline"),[D,M]=(0,a.useState)({}),{isConnected:T,isOffline:R}=(0,m.useRealtimeEvents)({enabled:!0,onHealthAlert:t=>{switch(console.log("[HealthPage] Health alert received:",t),M(e=>({...e,[t.deviceId]:t})),b(e=>{let a=l.find(e=>e.id===t.deviceId);if(!a)return e;let r=e[t.deviceId]||g(t.deviceId,a.nickname),s=r.score;return"critical"===t.severity?s=Math.max(0,s-20):"warning"===t.severity&&(s=Math.max(0,s-10)),{...e,[t.deviceId]:{...r,score:s}}}),t.severity){case"critical":e.error(`Critical: ${t.message} (${t.deviceType||"Device"})`);break;case"warning":e.warning(`Warning: ${t.message} (${t.deviceType||"Device"})`);break;default:e.info(`${t.message} (${t.deviceType||"Device"})`)}setTimeout(()=>{M(e=>{let a={...e};return delete a[t.deviceId],a})},3e4)},onConnectionChange:t=>{S(t?"connected":"offline"),t?e.info("Real-time health monitoring connected"):e.warning("Real-time health monitoring disconnected")}});(0,a.useEffect)(()=>{P()},[]),(0,a.useEffect)(()=>{let e=setInterval(()=>{P()},1e4);return()=>clearInterval(e)},[]);let P=async()=>{try{y(!0);let e=await r.apiClient.getDisplays(),t=e.data||e||[];h(t);let a={};t.forEach(e=>{a[e.id]=g(e.id,e.nickname)}),b(a)}catch(t){e.error(t.message||"Failed to load device health")}finally{y(!1)}},L=[...l.filter(e=>!w||e.nickname.toLowerCase().includes(w.toLowerCase())||e.location&&e.location.toLowerCase().includes(w.toLowerCase()))].sort((e,t)=>{let a=0,r=x[e.id],s=x[t.id];switch(k){case"name":a=e.nickname.localeCompare(t.nickname);break;case"health":a=(r?.score||0)-(s?.score||0);break;case"cpu":a=(r?.cpuUsage||0)-(s?.cpuUsage||0);break;case"memory":a=(r?.memoryUsage||0)-(s?.memoryUsage||0);break;default:a=0}return"asc"===C?a:-a}),U={totalDevices:l.length,healthy:l.filter(e=>(x[e.id]?.score||0)>=80).length,warning:l.filter(e=>{let t=x[e.id]?.score||0;return t>=50&&t<80}).length,critical:l.filter(e=>50>(x[e.id]?.score||0)).length};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(e.ToastContainer,{}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-50",children:"Device Health"}),(0,t.jsxs)("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:["Monitor device performance and system health","connected"===E&&(0,t.jsxs)("span",{className:"ml-2 inline-flex items-center gap-1 text-xs text-green-600 dark:text-green-400",children:[(0,t.jsx)("span",{className:"w-2 h-2 bg-green-600 dark:bg-green-400 rounded-full animate-pulse"}),"Real-time monitoring active"]}),"offline"===E&&(0,t.jsxs)("span",{className:"ml-2 inline-flex items-center gap-1 text-xs text-yellow-600 dark:text-yellow-400",children:[(0,t.jsx)("span",{className:"w-2 h-2 bg-yellow-600 dark:bg-yellow-400 rounded-full"}),"Polling mode"]})]})]}),(0,t.jsxs)("button",{onClick:P,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition font-semibold shadow-md hover:shadow-lg flex items-center gap-2",children:[(0,t.jsx)(s.Icon,{name:"download",size:"lg",className:"text-white"}),(0,t.jsx)("span",{children:"Refresh"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsx)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow p-6 border-t-4 border-blue-500",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Devices"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-50 mt-2",children:U.totalDevices})]}),(0,t.jsx)(s.Icon,{name:"devices",size:"3xl",className:"text-blue-500 opacity-20"})]})}),(0,t.jsx)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow p-6 border-t-4 border-green-500",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Healthy"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-2",children:U.healthy})]}),(0,t.jsx)(s.Icon,{name:"success",size:"3xl",className:"text-green-500 opacity-20"})]})}),(0,t.jsx)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow p-6 border-t-4 border-yellow-500",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Warnings"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-2",children:U.warning})]}),(0,t.jsx)(s.Icon,{name:"warning",size:"3xl",className:"text-yellow-500 opacity-20"})]})}),(0,t.jsx)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow p-6 border-t-4 border-red-500",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Critical"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400 mt-2",children:U.critical})]}),(0,t.jsx)(s.Icon,{name:"error",size:"3xl",className:"text-red-500 opacity-20"})]})})]}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 md:items-end",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(c.default,{value:f,onChange:v,placeholder:"Search devices by name or location..."})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("select",{value:k,onChange:e=>j(e.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-50 focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"health",children:"Sort by Health"}),(0,t.jsx)("option",{value:"name",children:"Sort by Name"}),(0,t.jsx)("option",{value:"cpu",children:"Sort by CPU"}),(0,t.jsx)("option",{value:"memory",children:"Sort by Memory"})]}),(0,t.jsx)("button",{onClick:()=>N("asc"===C?"desc":"asc"),className:"px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-50 hover:bg-gray-50 dark:hover:bg-gray-700 transition font-medium",children:"asc"===C?"‚Üë":"‚Üì"})]})]}),p?(0,t.jsx)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow p-12",children:(0,t.jsx)(i.default,{size:"lg"})}):0===L.length?(0,t.jsx)(o.default,{icon:"devices",title:"No devices found",description:"Pair a device to begin monitoring health metrics",action:{label:"Pair Device",onClick:()=>window.location.href="/dashboard/devices/pair"}}):(0,t.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:L.map(e=>{var a,r;let s=x[e.id];if(!s)return null;let l=(a=s.score)>=90?{label:"Excellent",color:"text-green-700 dark:text-green-300"}:a>=70?{label:"Good",color:"text-blue-700 dark:text-blue-300"}:a>=50?{label:"Fair",color:"text-yellow-700 dark:text-yellow-300"}:{label:"Poor",color:"text-red-700 dark:text-red-300"};return(0,t.jsxs)("div",{className:`rounded-lg shadow border p-6 transition-all hover:shadow-lg ${(r=s.score)>=90?"bg-green-50 dark:bg-green-900 border-green-200 dark:border-green-700":r>=70?"bg-blue-50 dark:bg-blue-900 border-blue-200 dark:border-blue-700":r>=50?"bg-yellow-50 dark:bg-yellow-900 border-yellow-200 dark:border-yellow-700":"bg-red-50 dark:bg-red-900 border-red-200 dark:border-red-700"}`,children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-50",children:e.nickname}),e.location&&(0,t.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["üìç ",e.location]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:`text-2xl font-bold ${l.color}`,children:s.score}),(0,t.jsx)("p",{className:`text-xs font-semibold ${l.color}`,children:l.label})]})]}),(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(n,{health:s,showTemperature:!0,showUptime:!0,compact:!1})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,t.jsxs)("div",{className:"bg-white/50 dark:bg-gray-800/50 p-2 rounded",children:[(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-xs",children:"Uptime"}),(0,t.jsxs)("p",{className:"font-medium text-gray-900 dark:text-gray-50",children:[Math.floor(s.uptime/24),"d ",s.uptime%24,"h"]})]}),(0,t.jsxs)("div",{className:"bg-white/50 dark:bg-gray-800/50 p-2 rounded",children:[(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-xs",children:"Temp"}),(0,t.jsxs)("p",{className:"font-medium text-gray-900 dark:text-gray-50",children:[s.temperature,"¬∞C"]})]}),(0,t.jsxs)("div",{className:"bg-white/50 dark:bg-gray-800/50 p-2 rounded col-span-2",children:[(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-xs mb-1",children:"Last Heartbeat"}),(0,t.jsxs)("p",{className:"font-medium text-gray-900 dark:text-gray-50 text-xs",children:[Math.round((Date.now()-s.lastHeartbeat.getTime())/1e3),"s ago"]})]})]}),D[e.id]&&(0,t.jsx)("div",{className:`mt-4 border rounded p-3 animate-pulse ${"critical"===D[e.id].severity?"bg-red-100 dark:bg-red-900 border-red-300 dark:border-red-700":"warning"===D[e.id].severity?"bg-yellow-100 dark:bg-yellow-900 border-yellow-300 dark:border-yellow-700":"bg-blue-100 dark:bg-blue-900 border-blue-300 dark:border-blue-700"}`,children:(0,t.jsxs)("p",{className:`text-sm font-semibold ${"critical"===D[e.id].severity?"text-red-800 dark:text-red-200":"warning"===D[e.id].severity?"text-yellow-800 dark:text-yellow-200":"text-blue-800 dark:text-blue-200"}`,children:["üî¥ ",D[e.id].message]})}),!D[e.id]&&s.score<50&&(0,t.jsx)("div",{className:"mt-4 bg-red-100 dark:bg-red-900 border border-red-300 dark:border-red-700 rounded p-3",children:(0,t.jsx)("p",{className:"text-sm font-semibold text-red-800 dark:text-red-200",children:"‚ö†Ô∏è Critical: Device performance degraded. Consider maintenance."})}),!D[e.id]&&s.score<70&&s.score>=50&&(0,t.jsx)("div",{className:"mt-4 bg-yellow-100 dark:bg-yellow-900 border border-yellow-300 dark:border-yellow-700 rounded p-3",children:(0,t.jsx)("p",{className:"text-sm font-semibold text-yellow-800 dark:text-yellow-200",children:"‚ö° Warning: Some metrics need attention."})})]},e.id)})})]})}e.s(["default",()=>h],54678)}]);