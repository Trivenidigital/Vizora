{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/vizora/vizora/web/src/components/providers/ThemeProvider.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useEffect, useState } from 'react';\n\nexport type ThemeMode = 'light' | 'dark' | 'system';\n\ninterface ThemeContextType {\n  mode: ThemeMode;\n  isDark: boolean;\n  setMode: (mode: ThemeMode) => void;\n}\n\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\n\nexport function ThemeProvider({ children }: { children: React.ReactNode }) {\n  const [mode, setModeState] = useState<ThemeMode>('system');\n  const [isDark, setIsDark] = useState(false);\n  const [isMounted, setIsMounted] = useState(false);\n\n  // Initialize theme from localStorage and system preference\n  useEffect(() => {\n    setIsMounted(true);\n\n    // Get saved preference\n    const savedMode = localStorage.getItem('theme-mode') as ThemeMode | null;\n    const initialMode: ThemeMode = savedMode || 'system';\n    setModeState(initialMode);\n\n    // Determine if dark mode should be active\n    const shouldBeDark = determineDarkMode(initialMode);\n    setIsDark(shouldBeDark);\n    applyTheme(shouldBeDark);\n  }, []);\n\n  // Listen for system theme changes\n  useEffect(() => {\n    if (!isMounted) return;\n\n    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n\n    const handleChange = (e: MediaQueryListEvent) => {\n      if (mode === 'system') {\n        const newIsDark = e.matches;\n        setIsDark(newIsDark);\n        applyTheme(newIsDark);\n      }\n    };\n\n    mediaQuery.addEventListener('change', handleChange);\n    return () => mediaQuery.removeEventListener('change', handleChange);\n  }, [mode, isMounted]);\n\n  const determineDarkMode = (themeMode: ThemeMode): boolean => {\n    if (themeMode === 'dark') return true;\n    if (themeMode === 'light') return false;\n    // System preference\n    return window.matchMedia('(prefers-color-scheme: dark)').matches;\n  };\n\n  const applyTheme = (dark: boolean) => {\n    const html = document.documentElement;\n    if (dark) {\n      html.classList.add('dark');\n    } else {\n      html.classList.remove('dark');\n    }\n  };\n\n  const setMode = (newMode: ThemeMode) => {\n    setModeState(newMode);\n    localStorage.setItem('theme-mode', newMode);\n\n    const newIsDark = determineDarkMode(newMode);\n    setIsDark(newIsDark);\n    applyTheme(newIsDark);\n  };\n\n  // Don't render until client-side hydration is complete\n  if (!isMounted) {\n    return <>{children}</>;\n  }\n\n  return (\n    <ThemeContext.Provider value={{ mode, isDark, setMode }}>\n      {children}\n    </ThemeContext.Provider>\n  );\n}\n\nexport function useTheme() {\n  const context = useContext(ThemeContext);\n  if (!context) {\n    throw new Error('useTheme must be used within ThemeProvider');\n  }\n  return context;\n}\n"],"names":[],"mappings":";;;;;;;AAEA;;;AAFA;;AAYA,MAAM,6BAAe,IAAA,6RAAa,EAA+B;AAE1D,SAAS,cAAc,EAAE,QAAQ,EAAiC;;IACvE,MAAM,CAAC,MAAM,aAAa,GAAG,IAAA,wRAAQ,EAAY;IACjD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,wRAAQ,EAAC;IACrC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,wRAAQ,EAAC;IAE3C,2DAA2D;IAC3D,IAAA,yRAAS;mCAAC;YACR,aAAa;YAEb,uBAAuB;YACvB,MAAM,YAAY,aAAa,OAAO,CAAC;YACvC,MAAM,cAAyB,aAAa;YAC5C,aAAa;YAEb,0CAA0C;YAC1C,MAAM,eAAe,kBAAkB;YACvC,UAAU;YACV,WAAW;QACb;kCAAG,EAAE;IAEL,kCAAkC;IAClC,IAAA,yRAAS;mCAAC;YACR,IAAI,CAAC,WAAW;YAEhB,MAAM,aAAa,OAAO,UAAU,CAAC;YAErC,MAAM;wDAAe,CAAC;oBACpB,IAAI,SAAS,UAAU;wBACrB,MAAM,YAAY,EAAE,OAAO;wBAC3B,UAAU;wBACV,WAAW;oBACb;gBACF;;YAEA,WAAW,gBAAgB,CAAC,UAAU;YACtC;2CAAO,IAAM,WAAW,mBAAmB,CAAC,UAAU;;QACxD;kCAAG;QAAC;QAAM;KAAU;IAEpB,MAAM,oBAAoB,CAAC;QACzB,IAAI,cAAc,QAAQ,OAAO;QACjC,IAAI,cAAc,SAAS,OAAO;QAClC,oBAAoB;QACpB,OAAO,OAAO,UAAU,CAAC,gCAAgC,OAAO;IAClE;IAEA,MAAM,aAAa,CAAC;QAClB,MAAM,OAAO,SAAS,eAAe;QACrC,IAAI,MAAM;YACR,KAAK,SAAS,CAAC,GAAG,CAAC;QACrB,OAAO;YACL,KAAK,SAAS,CAAC,MAAM,CAAC;QACxB;IACF;IAEA,MAAM,UAAU,CAAC;QACf,aAAa;QACb,aAAa,OAAO,CAAC,cAAc;QAEnC,MAAM,YAAY,kBAAkB;QACpC,UAAU;QACV,WAAW;IACb;IAEA,uDAAuD;IACvD,IAAI,CAAC,WAAW;QACd,qBAAO;sBAAG;;IACZ;IAEA,qBACE,4SAAC,aAAa,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAQ;QAAQ;kBACnD;;;;;;AAGP;GAzEgB;KAAA;AA2ET,SAAS;;IACd,MAAM,UAAU,IAAA,0RAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANgB"}},
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/vizora/vizora/web/src/lib/customization.ts"],"sourcesContent":["/**\n * White-Label Customization System\n * Provides brand customization configuration and utilities\n */\n\nexport interface BrandConfig {\n  id: string;\n  name: string;\n  logo?: string;\n  logoAlt?: string;\n  primaryColor: string;\n  secondaryColor: string;\n  accentColor?: string;\n  fontFamily?: 'sans' | 'serif' | 'mono';\n  showPoweredBy: boolean;\n  customDomain?: string;\n  customCSS?: string;\n}\n\n// Default brand configuration\nconst defaultBrandConfig: BrandConfig = {\n  id: 'default',\n  name: 'Vizora',\n  primaryColor: '#0284c7',\n  secondaryColor: '#38bdf8',\n  accentColor: '#0ea5e9',\n  fontFamily: 'sans',\n  showPoweredBy: true,\n};\n\n// Store for brand configuration (would be replaced with API call in production)\nlet currentBrandConfig: BrandConfig = defaultBrandConfig;\n\n/**\n * Load brand configuration\n * In production, this would fetch from an API or environment variables\n */\nexport function loadBrandConfig(config?: BrandConfig): BrandConfig {\n  if (config) {\n    currentBrandConfig = config;\n  }\n  return currentBrandConfig;\n}\n\n/**\n * Get current brand configuration\n */\nexport function getBrandConfig(): BrandConfig {\n  return currentBrandConfig;\n}\n\n/**\n * Update brand configuration\n */\nexport function updateBrandConfig(updates: Partial<BrandConfig>): BrandConfig {\n  currentBrandConfig = {\n    ...currentBrandConfig,\n    ...updates,\n  };\n  return currentBrandConfig;\n}\n\n/**\n * Get logo URL\n */\nexport function getLogoUrl(): string | undefined {\n  return currentBrandConfig.logo;\n}\n\n/**\n * Get primary color\n */\nexport function getPrimaryColor(): string {\n  return currentBrandConfig.primaryColor;\n}\n\n/**\n * Get secondary color\n */\nexport function getSecondaryColor(): string {\n  return currentBrandConfig.secondaryColor;\n}\n\n/**\n * Get accent color\n */\nexport function getAccentColor(): string {\n  return currentBrandConfig.accentColor || currentBrandConfig.primaryColor;\n}\n\n/**\n * Apply CSS variables for customization\n */\nexport function applyCSSVariables(config: BrandConfig = currentBrandConfig): void {\n  if (typeof window === 'undefined') return;\n\n  const root = document.documentElement;\n  root.style.setProperty('--brand-primary', config.primaryColor);\n  root.style.setProperty('--brand-secondary', config.secondaryColor);\n  root.style.setProperty('--brand-accent', config.accentColor || config.primaryColor);\n\n  // Font family\n  if (config.fontFamily) {\n    const fontMap: Record<string, string> = {\n      sans: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif',\n      serif: 'Georgia, \"Times New Roman\", serif',\n      mono: '\"Courier New\", monospace',\n    };\n    root.style.setProperty('--brand-font-family', fontMap[config.fontFamily]);\n  }\n\n  // Custom CSS\n  if (config.customCSS) {\n    let styleEl = document.getElementById('brand-custom-styles');\n    if (!styleEl) {\n      styleEl = document.createElement('style');\n      styleEl.id = 'brand-custom-styles';\n      document.head.appendChild(styleEl);\n    }\n    styleEl.textContent = config.customCSS;\n  }\n}\n\n/**\n * Get styled logo component JSX\n */\nexport function getLogoComponent(): {\n  src?: string;\n  alt: string;\n  fallback: string;\n} {\n  return {\n    src: currentBrandConfig.logo,\n    alt: currentBrandConfig.logoAlt || currentBrandConfig.name,\n    fallback: currentBrandConfig.name.substring(0, 2).toUpperCase(),\n  };\n}\n\n/**\n * Check if powered by badge should be shown\n */\nexport function shouldShowPoweredBy(): boolean {\n  return currentBrandConfig.showPoweredBy;\n}\n\n/**\n * Get brand name\n */\nexport function getBrandName(): string {\n  return currentBrandConfig.name;\n}\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;;;;;;;;;;;;;;;;;AAgBD,8BAA8B;AAC9B,MAAM,qBAAkC;IACtC,IAAI;IACJ,MAAM;IACN,cAAc;IACd,gBAAgB;IAChB,aAAa;IACb,YAAY;IACZ,eAAe;AACjB;AAEA,gFAAgF;AAChF,IAAI,qBAAkC;AAM/B,SAAS,gBAAgB,MAAoB;IAClD,IAAI,QAAQ;QACV,qBAAqB;IACvB;IACA,OAAO;AACT;AAKO,SAAS;IACd,OAAO;AACT;AAKO,SAAS,kBAAkB,OAA6B;IAC7D,qBAAqB;QACnB,GAAG,kBAAkB;QACrB,GAAG,OAAO;IACZ;IACA,OAAO;AACT;AAKO,SAAS;IACd,OAAO,mBAAmB,IAAI;AAChC;AAKO,SAAS;IACd,OAAO,mBAAmB,YAAY;AACxC;AAKO,SAAS;IACd,OAAO,mBAAmB,cAAc;AAC1C;AAKO,SAAS;IACd,OAAO,mBAAmB,WAAW,IAAI,mBAAmB,YAAY;AAC1E;AAKO,SAAS,kBAAkB,SAAsB,kBAAkB;IACxE;;IAEA,MAAM,OAAO,SAAS,eAAe;IACrC,KAAK,KAAK,CAAC,WAAW,CAAC,mBAAmB,OAAO,YAAY;IAC7D,KAAK,KAAK,CAAC,WAAW,CAAC,qBAAqB,OAAO,cAAc;IACjE,KAAK,KAAK,CAAC,WAAW,CAAC,kBAAkB,OAAO,WAAW,IAAI,OAAO,YAAY;IAElF,cAAc;IACd,IAAI,OAAO,UAAU,EAAE;QACrB,MAAM,UAAkC;YACtC,MAAM;YACN,OAAO;YACP,MAAM;QACR;QACA,KAAK,KAAK,CAAC,WAAW,CAAC,uBAAuB,OAAO,CAAC,OAAO,UAAU,CAAC;IAC1E;IAEA,aAAa;IACb,IAAI,OAAO,SAAS,EAAE;QACpB,IAAI,UAAU,SAAS,cAAc,CAAC;QACtC,IAAI,CAAC,SAAS;YACZ,UAAU,SAAS,aAAa,CAAC;YACjC,QAAQ,EAAE,GAAG;YACb,SAAS,IAAI,CAAC,WAAW,CAAC;QAC5B;QACA,QAAQ,WAAW,GAAG,OAAO,SAAS;IACxC;AACF;AAKO,SAAS;IAKd,OAAO;QACL,KAAK,mBAAmB,IAAI;QAC5B,KAAK,mBAAmB,OAAO,IAAI,mBAAmB,IAAI;QAC1D,UAAU,mBAAmB,IAAI,CAAC,SAAS,CAAC,GAAG,GAAG,WAAW;IAC/D;AACF;AAKO,SAAS;IACd,OAAO,mBAAmB,aAAa;AACzC;AAKO,SAAS;IACd,OAAO,mBAAmB,IAAI;AAChC"}},
    {"offset": {"line": 233, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/vizora/vizora/web/src/components/providers/CustomizationProvider.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useEffect, useState } from 'react';\nimport { BrandConfig, loadBrandConfig, updateBrandConfig, applyCSSVariables } from '@/lib/customization';\n\ninterface CustomizationContextType {\n  brandConfig: BrandConfig;\n  updateBrandConfig: (updates: Partial<BrandConfig>) => void;\n}\n\nconst CustomizationContext = createContext<CustomizationContextType | undefined>(undefined);\n\nexport function CustomizationProvider({ children }: { children: React.ReactNode }) {\n  const [brandConfig, setBrandConfig] = useState<BrandConfig | null>(null);\n  const [isMounted, setIsMounted] = useState(false);\n\n  // Initialize customization from API or config\n  useEffect(() => {\n    setIsMounted(true);\n\n    // Load brand config\n    const config = loadBrandConfig();\n    setBrandConfig(config);\n\n    // Apply CSS variables\n    applyCSSVariables(config);\n\n    // Listen for storage changes (multi-tab sync)\n    const handleStorageChange = (e: StorageEvent) => {\n      if (e.key === 'brand-config' && e.newValue) {\n        try {\n          const newConfig = JSON.parse(e.newValue) as BrandConfig;\n          setBrandConfig(newConfig);\n          applyCSSVariables(newConfig);\n        } catch (error) {\n          console.error('Failed to parse brand config from storage:', error);\n        }\n      }\n    };\n\n    window.addEventListener('storage', handleStorageChange);\n    return () => window.removeEventListener('storage', handleStorageChange);\n  }, []);\n\n  const handleUpdateBrandConfig = (updates: Partial<BrandConfig>) => {\n    const newConfig = updateBrandConfig(updates);\n    setBrandConfig(newConfig);\n    applyCSSVariables(newConfig);\n\n    // Save to localStorage for persistence\n    if (typeof window !== 'undefined') {\n      localStorage.setItem('brand-config', JSON.stringify(newConfig));\n    }\n  };\n\n  // Don't render until client-side hydration is complete\n  if (!isMounted || !brandConfig) {\n    return <>{children}</>;\n  }\n\n  return (\n    <CustomizationContext.Provider\n      value={{\n        brandConfig,\n        updateBrandConfig: handleUpdateBrandConfig,\n      }}\n    >\n      {children}\n    </CustomizationContext.Provider>\n  );\n}\n\nexport function useCustomization() {\n  const context = useContext(CustomizationContext);\n  if (!context) {\n    throw new Error('useCustomization must be used within CustomizationProvider');\n  }\n  return context;\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;;;AAHA;;;AAUA,MAAM,qCAAuB,IAAA,6RAAa,EAAuC;AAE1E,SAAS,sBAAsB,EAAE,QAAQ,EAAiC;;IAC/E,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,wRAAQ,EAAqB;IACnE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,wRAAQ,EAAC;IAE3C,8CAA8C;IAC9C,IAAA,yRAAS;2CAAC;YACR,aAAa;YAEb,oBAAoB;YACpB,MAAM,SAAS,IAAA,wJAAe;YAC9B,eAAe;YAEf,sBAAsB;YACtB,IAAA,0JAAiB,EAAC;YAElB,8CAA8C;YAC9C,MAAM;uEAAsB,CAAC;oBAC3B,IAAI,EAAE,GAAG,KAAK,kBAAkB,EAAE,QAAQ,EAAE;wBAC1C,IAAI;4BACF,MAAM,YAAY,KAAK,KAAK,CAAC,EAAE,QAAQ;4BACvC,eAAe;4BACf,IAAA,0JAAiB,EAAC;wBACpB,EAAE,OAAO,OAAO;4BACd,QAAQ,KAAK,CAAC,8CAA8C;wBAC9D;oBACF;gBACF;;YAEA,OAAO,gBAAgB,CAAC,WAAW;YACnC;mDAAO,IAAM,OAAO,mBAAmB,CAAC,WAAW;;QACrD;0CAAG,EAAE;IAEL,MAAM,0BAA0B,CAAC;QAC/B,MAAM,YAAY,IAAA,0JAAiB,EAAC;QACpC,eAAe;QACf,IAAA,0JAAiB,EAAC;QAElB,uCAAuC;QACvC,wCAAmC;YACjC,aAAa,OAAO,CAAC,gBAAgB,KAAK,SAAS,CAAC;QACtD;IACF;IAEA,uDAAuD;IACvD,IAAI,CAAC,aAAa,CAAC,aAAa;QAC9B,qBAAO;sBAAG;;IACZ;IAEA,qBACE,4SAAC,qBAAqB,QAAQ;QAC5B,OAAO;YACL;YACA,mBAAmB;QACrB;kBAEC;;;;;;AAGP;GA1DgB;KAAA;AA4DT,SAAS;;IACd,MAAM,UAAU,IAAA,0RAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANgB"}},
    {"offset": {"line": 328, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/vizora/vizora/web/src/lib/hooks/useSocket.ts"],"sourcesContent":["import { useEffect, useState, useCallback, useRef } from 'react';\nimport io, { Socket } from 'socket.io-client';\n\ninterface UseSocketOptions {\n  url?: string;\n  autoConnect?: boolean;\n  reconnection?: boolean;\n  reconnectionDelay?: number;\n  reconnectionDelayMax?: number;\n  reconnectionAttempts?: number;\n}\n\nexport function useSocket(options: UseSocketOptions = {}) {\n  const {\n    url = process.env.NEXT_PUBLIC_SOCKET_URL || 'http://localhost:3000',\n    autoConnect = true,\n    reconnection = true,\n    reconnectionDelay = 1000,\n    reconnectionDelayMax = 5000,\n    reconnectionAttempts = 5,\n  } = options;\n\n  const [isConnected, setIsConnected] = useState(false);\n  const [lastMessage, setLastMessage] = useState<any>(null);\n  const socketRef = useRef<Socket | null>(null);\n\n  useEffect(() => {\n    if (!autoConnect) return;\n\n    // Create socket connection\n    const socket = io(url, {\n      reconnection,\n      reconnectionDelay,\n      reconnectionDelayMax,\n      reconnectionAttempts,\n      transports: ['websocket', 'polling'],\n    });\n\n    socketRef.current = socket;\n\n    // Connection event handlers\n    socket.on('connect', () => {\n      setIsConnected(true);\n      console.log('Socket.io connected:', socket.id);\n    });\n\n    socket.on('disconnect', () => {\n      setIsConnected(false);\n      console.log('Socket.io disconnected');\n    });\n\n    socket.on('error', (error) => {\n      console.error('Socket.io error:', error);\n    });\n\n    // Generic message handler for testing\n    socket.on('message', (data) => {\n      setLastMessage(data);\n    });\n\n    return () => {\n      socket.close();\n      socketRef.current = null;\n    };\n  }, [url, autoConnect, reconnection, reconnectionDelay, reconnectionDelayMax, reconnectionAttempts]);\n\n  // Emit event\n  const emit = useCallback((event: string, data?: any) => {\n    if (socketRef.current && isConnected) {\n      socketRef.current.emit(event, data);\n    }\n  }, [isConnected]);\n\n  // Listen to event\n  const on = useCallback((event: string, callback: (data: any) => void) => {\n    if (socketRef.current) {\n      socketRef.current.on(event, callback);\n\n      // Return unsubscribe function\n      return () => {\n        if (socketRef.current) {\n          socketRef.current.off(event, callback);\n        }\n      };\n    }\n    return () => {};\n  }, []);\n\n  // Listen to event once\n  const once = useCallback((event: string, callback: (data: any) => void) => {\n    if (socketRef.current) {\n      socketRef.current.once(event, callback);\n    }\n  }, []);\n\n  return {\n    socket: socketRef.current,\n    isConnected,\n    lastMessage,\n    emit,\n    on,\n    once,\n  };\n}\n"],"names":[],"mappings":";;;;AAcU;AAdV;AACA;;;;AAWO,SAAS,UAAU,UAA4B,CAAC,CAAC;;IACtD,MAAM,EACJ,MAAM,6DAAsC,uBAAuB,EACnE,cAAc,IAAI,EAClB,eAAe,IAAI,EACnB,oBAAoB,IAAI,EACxB,uBAAuB,IAAI,EAC3B,uBAAuB,CAAC,EACzB,GAAG;IAEJ,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,wRAAQ,EAAC;IAC/C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,wRAAQ,EAAM;IACpD,MAAM,YAAY,IAAA,sRAAM,EAAgB;IAExC,IAAA,yRAAS;+BAAC;YACR,IAAI,CAAC,aAAa;YAElB,2BAA2B;YAC3B,MAAM,SAAS,IAAA,gQAAE,EAAC,KAAK;gBACrB;gBACA;gBACA;gBACA;gBACA,YAAY;oBAAC;oBAAa;iBAAU;YACtC;YAEA,UAAU,OAAO,GAAG;YAEpB,4BAA4B;YAC5B,OAAO,EAAE,CAAC;uCAAW;oBACnB,eAAe;oBACf,QAAQ,GAAG,CAAC,wBAAwB,OAAO,EAAE;gBAC/C;;YAEA,OAAO,EAAE,CAAC;uCAAc;oBACtB,eAAe;oBACf,QAAQ,GAAG,CAAC;gBACd;;YAEA,OAAO,EAAE,CAAC;uCAAS,CAAC;oBAClB,QAAQ,KAAK,CAAC,oBAAoB;gBACpC;;YAEA,sCAAsC;YACtC,OAAO,EAAE,CAAC;uCAAW,CAAC;oBACpB,eAAe;gBACjB;;YAEA;uCAAO;oBACL,OAAO,KAAK;oBACZ,UAAU,OAAO,GAAG;gBACtB;;QACF;8BAAG;QAAC;QAAK;QAAa;QAAc;QAAmB;QAAsB;KAAqB;IAElG,aAAa;IACb,MAAM,OAAO,IAAA,2RAAW;uCAAC,CAAC,OAAe;YACvC,IAAI,UAAU,OAAO,IAAI,aAAa;gBACpC,UAAU,OAAO,CAAC,IAAI,CAAC,OAAO;YAChC;QACF;sCAAG;QAAC;KAAY;IAEhB,kBAAkB;IAClB,MAAM,KAAK,IAAA,2RAAW;qCAAC,CAAC,OAAe;YACrC,IAAI,UAAU,OAAO,EAAE;gBACrB,UAAU,OAAO,CAAC,EAAE,CAAC,OAAO;gBAE5B,8BAA8B;gBAC9B;iDAAO;wBACL,IAAI,UAAU,OAAO,EAAE;4BACrB,UAAU,OAAO,CAAC,GAAG,CAAC,OAAO;wBAC/B;oBACF;;YACF;YACA;6CAAO,KAAO;;QAChB;oCAAG,EAAE;IAEL,uBAAuB;IACvB,MAAM,OAAO,IAAA,2RAAW;uCAAC,CAAC,OAAe;YACvC,IAAI,UAAU,OAAO,EAAE;gBACrB,UAAU,OAAO,CAAC,IAAI,CAAC,OAAO;YAChC;QACF;sCAAG,EAAE;IAEL,OAAO;QACL,QAAQ,UAAU,OAAO;QACzB;QACA;QACA;QACA;QACA;IACF;AACF;GA3FgB"}},
    {"offset": {"line": 452, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/vizora/vizora/web/src/lib/api.ts"],"sourcesContent":["// API Client for Vizora Middleware\n\nimport type { Display, Content, Playlist, PlaylistItem, Schedule, PaginatedResponse } from './types';\n\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3000/api';\n\nclass ApiClient {\n  private baseUrl: string;\n  private token: string | null = null;\n\n  constructor(baseUrl: string) {\n    this.baseUrl = baseUrl;\n    // Load token from localStorage if available\n    if (typeof window !== 'undefined') {\n      this.token = localStorage.getItem('authToken');\n    }\n  }\n\n  setToken(token: string) {\n    this.token = token;\n    if (typeof window !== 'undefined') {\n      localStorage.setItem('authToken', token);\n      // Also set as cookie for middleware to access\n      document.cookie = `authToken=${token}; path=/; max-age=604800; SameSite=Lax`;\n      if (process.env.NODE_ENV === 'development') {\n        console.log('[API] Token saved securely');\n      }\n    }\n  }\n\n  clearToken() {\n    this.token = null;\n    if (typeof window !== 'undefined') {\n      localStorage.removeItem('authToken');\n      // Also clear cookie\n      document.cookie = 'authToken=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT';\n      if (process.env.NODE_ENV === 'development') {\n        console.log('[API] Token cleared');\n      }\n    }\n  }\n\n  private async request<T>(\n    endpoint: string,\n    options: RequestInit = {},\n    retries = 3\n  ): Promise<T> {\n    const headers: HeadersInit = {\n      'Content-Type': 'application/json',\n      ...(this.token && { Authorization: `Bearer ${this.token}` }),\n      ...options.headers,\n    };\n\n    if (process.env.NODE_ENV === 'development') {\n      console.log(`[API] Request: ${options.method || 'GET'} ${this.baseUrl}${endpoint}`);\n    }\n\n    // Create abort controller for timeout\n    const controller = new AbortController();\n    const timeoutMs = options.method === 'GET' ? 30000 : 30000; // 30s timeout\n    const timeoutId = setTimeout(() => controller.abort(), timeoutMs);\n\n    try {\n      const response = await fetch(`${this.baseUrl}${endpoint}`, {\n        ...options,\n        headers,\n        signal: controller.signal,\n      });\n\n      clearTimeout(timeoutId);\n\n      if (process.env.NODE_ENV === 'development') {\n        console.log(`[API] Response status: ${response.status} ${response.statusText}`);\n      }\n\n      if (!response.ok) {\n        if (process.env.NODE_ENV === 'development') {\n          console.error(`[API] Request failed with status ${response.status}`);\n        }\n        // Handle authentication errors\n        if (response.status === 401 || response.status === 403) {\n          this.clearToken();\n          if (typeof window !== 'undefined') {\n            // Redirect to login with return URL\n            const currentPath = window.location.pathname;\n            window.location.href = `/login?redirect=${encodeURIComponent(currentPath)}`;\n          }\n        }\n\n        const error = await response.json().catch(() => ({ message: 'Request failed' }));\n        throw new Error(error.message || `HTTP ${response.status}`);\n      }\n\n      const data = await response.json();\n      if (process.env.NODE_ENV === 'development') {\n        console.log('[API] Response received');\n      }\n      return data;\n    } catch (error) {\n      clearTimeout(timeoutId);\n\n      // Handle timeout\n      if (error instanceof Error && error.name === 'AbortError') {\n        if (retries > 0 && (options.method === 'GET' || !options.method)) {\n          if (process.env.NODE_ENV === 'development') {\n            console.warn(`[API] Request timeout, retrying... (${retries} attempts left)`);\n          }\n          return this.request<T>(endpoint, options, retries - 1);\n        }\n        throw new Error('Request timeout');\n      }\n\n      throw error;\n    }\n  }\n\n  // Auth\n  async login(email: string, password: string) {\n    if (process.env.NODE_ENV === 'development') {\n      console.log('[API] Login called');\n    }\n    const response = await this.request<{\n      success: boolean;\n      data: {\n        user: any;\n        token: string;\n        expiresIn: number;\n      }\n    }>('/auth/login', {\n      method: 'POST',\n      body: JSON.stringify({ email, password }),\n    });\n\n    if (response.data && response.data.token) {\n      this.setToken(response.data.token);\n    } else {\n      if (process.env.NODE_ENV === 'development') {\n        console.error('[API] Token not found in response');\n      }\n      throw new Error('Authentication failed: no token received');\n    }\n    return response.data;\n  }\n\n  async register(\n    email: string,\n    password: string,\n    organizationName: string,\n    firstName: string,\n    lastName: string\n  ) {\n    if (process.env.NODE_ENV === 'development') {\n      console.log('[API] Register called');\n    }\n    const response = await this.request<{\n      success: boolean;\n      data: {\n        user: any;\n        organization: any;\n        token: string;\n        expiresIn: number;\n      }\n    }>('/auth/register', {\n      method: 'POST',\n      body: JSON.stringify({\n        email,\n        password,\n        organizationName,\n        firstName,\n        lastName,\n      }),\n    });\n\n    if (response.data && response.data.token) {\n      this.setToken(response.data.token);\n    } else {\n      if (process.env.NODE_ENV === 'development') {\n        console.error('[API] Token not found in register response');\n      }\n      throw new Error('Registration failed: no token received');\n    }\n    return response.data;\n  }\n\n  // Displays\n  async getDisplays(params?: { page?: number; limit?: number }): Promise<PaginatedResponse<Display>> {\n    const query = new URLSearchParams(params as any).toString();\n    return this.request<PaginatedResponse<Display>>(`/displays${query ? `?${query}` : ''}`);\n  }\n\n  async getDisplay(id: string): Promise<Display> {\n    return this.request<Display>(`/displays/${id}`);\n  }\n\n  async createDisplay(data: { nickname: string; location?: string }): Promise<Display> {\n    // Backend expects 'name' and 'deviceId', frontend uses 'nickname'\n    const payload = {\n      name: data.nickname,\n      location: data.location,\n      deviceId: `device-${Date.now()}-${Math.random().toString(36).substring(7)}`, // Generate unique device ID\n    };\n    return this.request<Display>('/displays', {\n      method: 'POST',\n      body: JSON.stringify(payload),\n    });\n  }\n\n  async updateDisplay(id: string, data: Partial<{ nickname: string; location?: string; currentPlaylistId?: string }>): Promise<Display> {\n    // Backend expects 'name', frontend uses 'nickname'\n    const payload: any = {};\n    if (data.nickname !== undefined) payload.name = data.nickname;\n    if (data.location !== undefined) payload.location = data.location;\n    if (data.currentPlaylistId !== undefined) payload.currentPlaylistId = data.currentPlaylistId;\n    \n    return this.request<Display>(`/displays/${id}`, {\n      method: 'PATCH',\n      body: JSON.stringify(payload),\n    });\n  }\n\n  async deleteDisplay(id: string): Promise<void> {\n    return this.request<void>(`/displays/${id}`, {\n      method: 'DELETE',\n    });\n  }\n\n  async generatePairingToken(id: string): Promise<{ pairingCode: string }> {\n    return this.request<{ pairingCode: string }>(`/displays/${id}/pair`, {\n      method: 'POST',\n    });\n  }\n\n  async completePairing(data: { code: string; nickname: string; location?: string }): Promise<any> {\n    return this.request<any>('/devices/pairing/complete', {\n      method: 'POST',\n      body: JSON.stringify(data),\n    });\n  }\n\n  // Content\n  async getContent(params?: { page?: number; limit?: number; type?: string; status?: string }): Promise<PaginatedResponse<Content>> {\n    const query = new URLSearchParams(params as any).toString();\n    return this.request<PaginatedResponse<Content>>(`/content${query ? `?${query}` : ''}`);\n  }\n\n  async getContentItem(id: string): Promise<Content> {\n    return this.request<Content>(`/content/${id}`);\n  }\n\n  async createContent(data: {\n    title: string;\n    type: string;\n    url?: string;\n    file?: File;\n    metadata?: any;\n  }): Promise<Content> {\n    // If file is provided, use multipart upload endpoint\n    if (data.file) {\n      const formData = new FormData();\n      formData.append('file', data.file);\n      formData.append('name', data.title);\n      formData.append('type', data.type);\n\n      // Use raw fetch for multipart/form-data (bypass request() which sets Content-Type: application/json)\n      const headers: HeadersInit = {\n        ...(this.token && { Authorization: `Bearer ${this.token}` }),\n        // Don't set Content-Type - let browser set it with boundary\n      };\n\n      if (process.env.NODE_ENV === 'development') {\n        console.log(`[API] Request: POST ${this.baseUrl}/content/upload (multipart/form-data)`);\n      }\n\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 60000); // 60s timeout for uploads\n\n      try {\n        const response = await fetch(`${this.baseUrl}/content/upload`, {\n          method: 'POST',\n          headers,\n          body: formData,\n          signal: controller.signal,\n        });\n\n        clearTimeout(timeoutId);\n\n        if (process.env.NODE_ENV === 'development') {\n          console.log(`[API] Response status: ${response.status} ${response.statusText}`);\n        }\n\n        if (!response.ok) {\n          if (response.status === 401 || response.status === 403) {\n            this.clearToken();\n            if (typeof window !== 'undefined') {\n              const currentPath = window.location.pathname;\n              window.location.href = `/login?redirect=${encodeURIComponent(currentPath)}`;\n            }\n          }\n          const error = await response.json().catch(() => ({ message: 'Upload failed' }));\n          throw new Error(error.message || `HTTP ${response.status}`);\n        }\n\n        const result = await response.json();\n        if (process.env.NODE_ENV === 'development') {\n          console.log('[API] File upload successful');\n        }\n        return result.content || result;\n      } catch (error) {\n        clearTimeout(timeoutId);\n        if (error instanceof Error && error.name === 'AbortError') {\n          throw new Error('Upload timeout');\n        }\n        throw error;\n      }\n    }\n\n    // Otherwise use JSON endpoint (for URLs)\n    const payload = {\n      name: data.title,\n      type: data.type === 'pdf' ? 'url' : data.type, // Map pdf to url type\n      url: data.url || '',\n      metadata: data.metadata,\n    };\n    return this.request<Content>('/content', {\n      method: 'POST',\n      body: JSON.stringify(payload),\n    });\n  }\n\n  async updateContent(id: string, data: Partial<{ title: string; metadata?: any }>): Promise<Content> {\n    return this.request<Content>(`/content/${id}`, {\n      method: 'PATCH',\n      body: JSON.stringify(data),\n    });\n  }\n\n  async deleteContent(id: string): Promise<void> {\n    return this.request<void>(`/content/${id}`, {\n      method: 'DELETE',\n    });\n  }\n\n  async archiveContent(id: string): Promise<Content> {\n    return this.request<Content>(`/content/${id}/archive`, {\n      method: 'POST',\n    });\n  }\n\n  // Playlists\n  async getPlaylists(params?: { page?: number; limit?: number }): Promise<PaginatedResponse<Playlist>> {\n    const query = new URLSearchParams(params as any).toString();\n    return this.request<PaginatedResponse<Playlist>>(`/playlists${query ? `?${query}` : ''}`);\n  }\n\n  async getPlaylist(id: string): Promise<Playlist> {\n    return this.request<Playlist>(`/playlists/${id}`);\n  }\n\n  async createPlaylist(data: {\n    name: string;\n    description?: string;\n    items?: Array<{ contentId: string; duration?: number }>;\n  }): Promise<Playlist> {\n    return this.request<Playlist>('/playlists', {\n      method: 'POST',\n      body: JSON.stringify(data),\n    });\n  }\n\n  async updatePlaylist(id: string, data: Partial<{\n    name: string;\n    description?: string;\n  }>): Promise<Playlist> {\n    return this.request<Playlist>(`/playlists/${id}`, {\n      method: 'PATCH',\n      body: JSON.stringify(data),\n    });\n  }\n\n  async deletePlaylist(id: string): Promise<void> {\n    return this.request<void>(`/playlists/${id}`, {\n      method: 'DELETE',\n    });\n  }\n\n  async addPlaylistItem(playlistId: string, contentId: string, duration?: number): Promise<PlaylistItem> {\n    return this.request<PlaylistItem>(`/playlists/${playlistId}/items`, {\n      method: 'POST',\n      body: JSON.stringify({ contentId, duration }),\n    });\n  }\n\n  async removePlaylistItem(playlistId: string, itemId: string): Promise<void> {\n    return this.request<void>(`/playlists/${playlistId}/items/${itemId}`, {\n      method: 'DELETE',\n    });\n  }\n\n  async updatePlaylistItem(playlistId: string, itemId: string, data: { duration?: number }): Promise<PlaylistItem> {\n    return this.request<PlaylistItem>(`/playlists/${playlistId}/items/${itemId}`, {\n      method: 'PATCH',\n      body: JSON.stringify(data),\n    });\n  }\n\n  // Schedules\n  async getSchedules(params?: { page?: number; limit?: number }) {\n    const query = new URLSearchParams(params as any).toString();\n    return this.request<any>(`/schedules${query ? `?${query}` : ''}`);\n  }\n\n  async createSchedule(data: any) {\n    return this.request<any>('/schedules', {\n      method: 'POST',\n      body: JSON.stringify(data),\n    });\n  }\n\n  async updateSchedule(id: string, data: any) {\n    return this.request<any>(`/schedules/${id}`, {\n      method: 'PATCH',\n      body: JSON.stringify(data),\n    });\n  }\n\n  async deleteSchedule(id: string) {\n    return this.request<any>(`/schedules/${id}`, {\n      method: 'DELETE',\n    });\n  }\n\n  // Generic HTTP methods\n  async post<T = any>(endpoint: string, body?: any): Promise<T> {\n    return this.request<T>(endpoint, {\n      method: 'POST',\n      body: body ? JSON.stringify(body) : undefined,\n    });\n  }\n\n  async get<T = any>(endpoint: string): Promise<T> {\n    return this.request<T>(endpoint, {\n      method: 'GET',\n    });\n  }\n\n  async patch<T = any>(endpoint: string, body?: any): Promise<T> {\n    return this.request<T>(endpoint, {\n      method: 'PATCH',\n      body: body ? JSON.stringify(body) : undefined,\n    });\n  }\n\n  async delete<T = any>(endpoint: string): Promise<T> {\n    return this.request<T>(endpoint, {\n      method: 'DELETE',\n    });\n  }\n}\n\nexport const apiClient = new ApiClient(API_BASE_URL);\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 837, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/vizora/vizora/web/src/lib/context/DeviceStatusContext.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useEffect, useState, useCallback, ReactNode } from 'react';\nimport { useSocket } from '@/lib/hooks/useSocket';\nimport { apiClient } from '@/lib/api';\n\nexport type DeviceStatus = 'online' | 'offline' | 'idle' | 'error';\n\nexport interface DeviceStatusUpdate {\n  deviceId: string;\n  status: DeviceStatus;\n  timestamp: number;\n  lastHeartbeat?: number;\n  uptime?: number;\n  metadata?: Record<string, any>;\n}\n\ninterface DeviceStatusContextType {\n  deviceStatuses: Record<string, DeviceStatusUpdate>;\n  isConnected: boolean;\n  isInitialized: boolean;\n  updateDeviceStatus: (deviceId: string, status: DeviceStatus) => void;\n  getDeviceStatus: (deviceId: string) => DeviceStatusUpdate | undefined;\n  subscribeToDevice: (deviceId: string, callback: (update: DeviceStatusUpdate) => void) => () => void;\n  initializeDeviceStatuses: (updates: DeviceStatusUpdate[]) => void;\n}\n\nconst DeviceStatusContext = createContext<DeviceStatusContextType | undefined>(undefined);\n\nexport function DeviceStatusProvider({ children }: { children: ReactNode }) {\n  const { isConnected, on } = useSocket();\n  const [deviceStatuses, setDeviceStatuses] = useState<Record<string, DeviceStatusUpdate>>({});\n  const [subscribers, setSubscribers] = useState<Record<string, Set<Function>>>({});\n  const [isInitialized, setIsInitialized] = useState(false);\n  const [isInitializing, setIsInitializing] = useState(true);\n\n  // Initialize device statuses from API on mount\n  useEffect(() => {\n    const initializeFromAPI = async () => {\n      try {\n        setIsInitializing(true);\n        const response = await apiClient.getDisplays();\n        const devices = response.data || response || [];\n\n        // Convert API Display objects to DeviceStatusUpdate\n        const updates = devices.map((device: any) => ({\n          deviceId: device.id,\n          status: (device.status || 'offline') as DeviceStatus,\n          timestamp: Date.now(),\n          metadata: {\n            nickname: device.nickname,\n            location: device.location,\n            lastSeen: device.lastSeen,\n          },\n        }));\n\n        // Bulk load into context\n        initializeDeviceStatuses(updates);\n        setIsInitialized(true);\n      } catch (error: any) {\n        // Only log non-401 errors (401 = not authenticated yet, which is normal)\n        if (error?.response?.status !== 401 && error?.status !== 401) {\n          console.error('Failed to initialize device statuses from API:', error);\n        }\n        // Still mark as initialized to unblock UI, even if not authenticated\n        setIsInitialized(true);\n      } finally {\n        setIsInitializing(false);\n      }\n    };\n\n    // Only initialize if we're not on login/register pages\n    if (typeof window !== 'undefined') {\n      const pathname = window.location.pathname;\n      const isAuthPage = pathname.includes('/login') || pathname.includes('/register');\n\n      if (!isAuthPage) {\n        initializeFromAPI();\n      } else {\n        // On auth pages, just mark as initialized with empty state\n        setIsInitialized(true);\n        setIsInitializing(false);\n      }\n    }\n  }, []);\n\n  // Listen for device status updates from Socket.io\n  useEffect(() => {\n    if (!isConnected) return;\n\n    const unsubscribe = on('device:status', (data: DeviceStatusUpdate) => {\n      setDeviceStatuses(prev => {\n        const updated = { ...prev, [data.deviceId]: data };\n\n        // Notify subscribers for this specific device\n        setSubscribers(subs => {\n          if (subs[data.deviceId]) {\n            subs[data.deviceId].forEach(callback => {\n              callback(data);\n            });\n          }\n          return subs;\n        });\n\n        return updated;\n      });\n    });\n\n    return unsubscribe;\n  }, [isConnected, on]);\n\n  // Listen for batch status updates\n  useEffect(() => {\n    if (!isConnected) return;\n\n    const unsubscribe = on('device:status:batch', (data: DeviceStatusUpdate[]) => {\n      setDeviceStatuses(prev => {\n        const updated = { ...prev };\n        data.forEach(update => {\n          updated[update.deviceId] = update;\n        });\n\n        // Notify individual subscribers\n        setSubscribers(subs => {\n          data.forEach(update => {\n            if (subs[update.deviceId]) {\n              subs[update.deviceId].forEach(callback => {\n                callback(update);\n              });\n            }\n          });\n          return subs;\n        });\n\n        return updated;\n      });\n    });\n\n    return unsubscribe;\n  }, [isConnected, on]);\n\n  const initializeDeviceStatuses = (updates: DeviceStatusUpdate[]) => {\n    const statusMap: Record<string, DeviceStatusUpdate> = {};\n    updates.forEach(update => {\n      statusMap[update.deviceId] = update;\n    });\n\n    setDeviceStatuses(statusMap);\n  };\n\n  const updateDeviceStatus = (deviceId: string, status: DeviceStatus) => {\n    const update: DeviceStatusUpdate = {\n      deviceId,\n      status,\n      timestamp: Date.now(),\n    };\n\n    setDeviceStatuses(prev => ({\n      ...prev,\n      [deviceId]: update,\n    }));\n\n    // Notify subscribers\n    if (subscribers[deviceId]) {\n      subscribers[deviceId].forEach(callback => {\n        callback(update);\n      });\n    }\n  };\n\n  const getDeviceStatus = (deviceId: string) => {\n    return deviceStatuses[deviceId];\n  };\n\n  const subscribeToDevice = useCallback((deviceId: string, callback: (update: DeviceStatusUpdate) => void) => {\n    // Add callback to subscribers\n    setSubscribers(prev => {\n      const updated = { ...prev };\n      if (!updated[deviceId]) {\n        updated[deviceId] = new Set();\n      }\n      updated[deviceId].add(callback);\n      return updated;\n    });\n\n    // Call callback immediately with current status if available (no state update)\n    if (deviceStatuses[deviceId]) {\n      // Use a timeout to avoid calling setState during render\n      setTimeout(() => {\n        callback(deviceStatuses[deviceId]);\n      }, 0);\n    }\n\n    // Return unsubscribe function\n    return () => {\n      setSubscribers(prev => {\n        const updated = { ...prev };\n        if (updated[deviceId]) {\n          updated[deviceId].delete(callback);\n          if (updated[deviceId].size === 0) {\n            delete updated[deviceId];\n          }\n        }\n        return updated;\n      });\n    };\n  }, [deviceStatuses]);\n\n  return (\n    <DeviceStatusContext.Provider\n      value={{\n        deviceStatuses,\n        isConnected,\n        isInitialized,\n        updateDeviceStatus,\n        getDeviceStatus,\n        subscribeToDevice,\n        initializeDeviceStatuses,\n      }}\n    >\n      {children}\n    </DeviceStatusContext.Provider>\n  );\n}\n\nexport function useDeviceStatus() {\n  const context = useContext(DeviceStatusContext);\n  if (context === undefined) {\n    throw new Error('useDeviceStatus must be used within DeviceStatusProvider');\n  }\n  return context;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1107, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/vizora/vizora/web/src/theme/icons.tsx"],"sourcesContent":["import {\n  BarChart3,\n  Monitor,\n  Image,\n  List,\n  Calendar,\n  TrendingUp,\n  Settings,\n  Plus,\n  Trash2,\n  Edit,\n  Eye,\n  Download,\n  Search,\n  Video,\n  FileText,\n  Link as LinkIcon,\n  LogOut,\n  Zap,\n  AlertCircle,\n  AlertTriangle,\n  Info,\n  Upload,\n  Grid,\n  Menu,\n  Folder,\n  CheckCircle2,\n} from 'lucide-react';\n\nexport const ICON_SIZES = {\n  xs: 12,\n  sm: 16,\n  md: 20,\n  lg: 24,\n  xl: 32,\n  '2xl': 40,\n  '3xl': 48,\n  '4xl': 56,\n  '6xl': 96,\n} as const;\n\nexport type IconSize = keyof typeof ICON_SIZES;\n\nexport const iconMap = {\n  // Dashboard & Navigation\n  overview: BarChart3,\n  devices: Monitor,\n  content: Image,\n  playlists: List,\n  schedules: Calendar,\n  analytics: TrendingUp,\n  settings: Settings,\n\n  // Actions\n  add: Plus,\n  create: Plus,\n  delete: Trash2,\n  remove: Trash2,\n  edit: Edit,\n  view: Eye,\n  preview: Eye,\n  download: Download,\n  search: Search,\n  upload: Upload,\n  push: Upload,\n\n  // Content Types\n  image: Image,\n  video: Video,\n  pdf: FileText,\n  document: FileText,\n  link: LinkIcon,\n  folder: Folder,\n\n  // Status & Alerts\n  success: CheckCircle2,\n  warning: AlertTriangle,\n  error: AlertCircle,\n  info: Info,\n\n  // UI Elements\n  logout: LogOut,\n  power: Zap,\n  grid: Grid,\n  list: Menu,\n  storage: Folder,\n} as const;\n\nexport type IconName = keyof typeof iconMap;\n\n/**\n * Get icon component by name\n */\nexport function getIcon(name: IconName) {\n  return iconMap[name];\n}\n\n/**\n * React component for rendering an icon\n */\nexport function Icon({\n  name,\n  size = 'md',\n  className = '',\n  ...props\n}: {\n  name: IconName;\n  size?: IconSize;\n  className?: string;\n  [key: string]: any;\n}) {\n  const Component = iconMap[name] || iconMap.overview; // Fallback to overview icon\n  const sizePixels = ICON_SIZES[size];\n\n  if (!Component) {\n    console.error(`Invalid icon name: \"${name}\". Falling back to overview icon.`);\n    return null; // Fail gracefully\n  }\n\n  return (\n    <Component\n      width={sizePixels}\n      height={sizePixels}\n      className={className}\n      {...props}\n    />\n  );\n}\n\n/**\n * Get size in pixels\n */\nexport function getIconSize(size: IconSize): number {\n  return ICON_SIZES[size];\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AA6BO,MAAM,aAAa;IACxB,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,OAAO;IACP,OAAO;IACP,OAAO;IACP,OAAO;AACT;AAIO,MAAM,UAAU;IACrB,yBAAyB;IACzB,UAAU,wTAAS;IACnB,SAAS,0SAAO;IAChB,SAAS,oSAAK;IACd,WAAW,iSAAI;IACf,WAAW,6SAAQ;IACnB,WAAW,uTAAU;IACrB,UAAU,6SAAQ;IAElB,UAAU;IACV,KAAK,iSAAI;IACT,QAAQ,iSAAI;IACZ,QAAQ,2SAAM;IACd,QAAQ,2SAAM;IACd,MAAM,0SAAI;IACV,MAAM,8RAAG;IACT,SAAS,8RAAG;IACZ,UAAU,6SAAQ;IAClB,QAAQ,uSAAM;IACd,QAAQ,uSAAM;IACd,MAAM,uSAAM;IAEZ,gBAAgB;IAChB,OAAO,oSAAK;IACZ,OAAO,oSAAK;IACZ,KAAK,iTAAQ;IACb,UAAU,iTAAQ;IAClB,MAAM,iSAAQ;IACd,QAAQ,uSAAM;IAEd,kBAAkB;IAClB,SAAS,iUAAY;IACrB,SAAS,gUAAa;IACtB,OAAO,0TAAW;IAClB,MAAM,iSAAI;IAEV,cAAc;IACd,QAAQ,2SAAM;IACd,OAAO,8RAAG;IACV,MAAM,wSAAI;IACV,MAAM,iSAAI;IACV,SAAS,uSAAM;AACjB;AAOO,SAAS,QAAQ,IAAc;IACpC,OAAO,OAAO,CAAC,KAAK;AACtB;AAKO,SAAS,KAAK,EACnB,IAAI,EACJ,OAAO,IAAI,EACX,YAAY,EAAE,EACd,GAAG,OAMJ;IACC,MAAM,YAAY,OAAO,CAAC,KAAK,IAAI,QAAQ,QAAQ,EAAE,4BAA4B;IACjF,MAAM,aAAa,UAAU,CAAC,KAAK;IAEnC,IAAI,CAAC,WAAW;QACd,QAAQ,KAAK,CAAC,CAAC,oBAAoB,EAAE,KAAK,iCAAiC,CAAC;QAC5E,OAAO,MAAM,kBAAkB;IACjC;IAEA,qBACE,4SAAC;QACC,OAAO;QACP,QAAQ;QACR,WAAW;QACV,GAAG,KAAK;;;;;;AAGf;KA3BgB;AAgCT,SAAS,YAAY,IAAc;IACxC,OAAO,UAAU,CAAC,KAAK;AACzB"}},
    {"offset": {"line": 1233, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/vizora/vizora/web/src/components/CommandPalette.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState, useCallback } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { Icon } from '@/theme/icons';\n\ninterface Command {\n  id: string;\n  title: string;\n  description?: string;\n  category: 'navigation' | 'action' | 'quick-access';\n  icon?: string;\n  onExecute: () => void;\n  keywords?: string[];\n}\n\ninterface CommandPaletteProps {\n  commands: Command[];\n  open?: boolean;\n  onOpenChange?: (open: boolean) => void;\n}\n\nexport default function CommandPalette({ commands, open: controlledOpen, onOpenChange }: CommandPaletteProps) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [search, setSearch] = useState('');\n  const [selectedIndex, setSelectedIndex] = useState(0);\n  const router = useRouter();\n\n  // Use controlled or uncontrolled mode\n  const open = controlledOpen !== undefined ? controlledOpen : isOpen;\n\n  useEffect(() => {\n    if (controlledOpen !== undefined) {\n      setIsOpen(controlledOpen);\n    }\n  }, [controlledOpen]);\n\n  // Handle keyboard shortcut (Cmd+K or Ctrl+K)\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if ((e.metaKey || e.ctrlKey) && e.key === 'k') {\n        e.preventDefault();\n        setIsOpen(!open);\n        setSearch('');\n        setSelectedIndex(0);\n      }\n\n      // Only handle navigation keys when palette is open\n      if (!open) return;\n\n      switch (e.key) {\n        case 'Escape':\n          setIsOpen(false);\n          break;\n        case 'ArrowDown':\n          e.preventDefault();\n          setSelectedIndex(prev => (prev + 1) % filteredCommands.length);\n          break;\n        case 'ArrowUp':\n          e.preventDefault();\n          setSelectedIndex(prev => (prev - 1 + filteredCommands.length) % filteredCommands.length);\n          break;\n        case 'Enter':\n          e.preventDefault();\n          if (filteredCommands[selectedIndex]) {\n            filteredCommands[selectedIndex].onExecute();\n            setIsOpen(false);\n            setSearch('');\n          }\n          break;\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [open, search, selectedIndex]);\n\n  // Filter commands by search\n  const filteredCommands = commands.filter(cmd => {\n    const searchLower = search.toLowerCase();\n    return (\n      cmd.title.toLowerCase().includes(searchLower) ||\n      cmd.description?.toLowerCase().includes(searchLower) ||\n      cmd.keywords?.some(k => k.toLowerCase().includes(searchLower))\n    );\n  });\n\n  // Group by category\n  const groupedCommands = filteredCommands.reduce(\n    (acc, cmd) => {\n      const category = cmd.category;\n      if (!acc[category]) acc[category] = [];\n      acc[category].push(cmd);\n      return acc;\n    },\n    {} as Record<string, Command[]>\n  );\n\n  const categoryOrder = ['navigation', 'action', 'quick-access'];\n  const sortedGroups = categoryOrder.filter(cat => groupedCommands[cat]);\n\n  return (\n    <>\n      {/* Keyboard Shortcut Hint (optional, can be hidden) */}\n      {!open && (\n        <div className=\"fixed bottom-4 right-4 px-3 py-2 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 text-xs font-medium pointer-events-none z-40\">\n          K\n        </div>\n      )}\n\n      {/* Backdrop */}\n      {open && (\n        <div\n          className=\"fixed inset-0 bg-black/50 z-40\"\n          onClick={() => {\n            setIsOpen(false);\n            setSearch('');\n          }}\n        />\n      )}\n\n      {/* Command Palette Modal */}\n      {open && (\n        <div className=\"fixed inset-0 z-50 flex items-start justify-center pt-20\">\n          <div className=\"w-full max-w-xl mx-4 bg-white dark:bg-gray-900 rounded-lg shadow-2xl border border-gray-200 dark:border-gray-800 overflow-hidden\">\n            {/* Search Input */}\n            <div className=\"p-4 border-b border-gray-200 dark:border-gray-800\">\n              <div className=\"flex items-center gap-3\">\n                <Icon name=\"search\" size=\"sm\" className=\"text-gray-400\" />\n                <input\n                  type=\"text\"\n                  value={search}\n                  onChange={e => {\n                    setSearch(e.target.value);\n                    setSelectedIndex(0);\n                  }}\n                  placeholder=\"Search commands...\"\n                  className=\"flex-1 bg-transparent text-gray-900 dark:text-gray-50 focus:outline-none text-sm\"\n                  autoFocus\n                />\n                <div className=\"text-xs text-gray-400 font-medium\">ESC</div>\n              </div>\n            </div>\n\n            {/* Commands List */}\n            <div className=\"max-h-96 overflow-y-auto\">\n              {filteredCommands.length === 0 ? (\n                <div className=\"p-8 text-center\">\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400\">No commands found</p>\n                </div>\n              ) : (\n                sortedGroups.map(category => (\n                  <div key={category}>\n                    {/* Category Header */}\n                    <div className=\"px-4 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider bg-gray-50 dark:bg-gray-800\">\n                      {category.replace('-', ' ')}\n                    </div>\n\n                    {/* Commands in Category */}\n                    {groupedCommands[category].map((cmd, idx) => {\n                      const globalIndex = filteredCommands.indexOf(cmd);\n                      const isSelected = globalIndex === selectedIndex;\n\n                      return (\n                        <button\n                          key={cmd.id}\n                          onClick={() => {\n                            cmd.onExecute();\n                            setIsOpen(false);\n                            setSearch('');\n                          }}\n                          className={`w-full px-4 py-3 text-left flex items-center gap-3 transition-colors ${\n                            isSelected\n                              ? 'bg-blue-600 dark:bg-blue-700 text-white'\n                              : 'text-gray-900 dark:text-gray-50 hover:bg-gray-100 dark:hover:bg-gray-800'\n                          }`}\n                        >\n                          {cmd.icon && (\n                            <Icon name={cmd.icon as any} size=\"sm\" />\n                          )}\n                          <div className=\"flex-1 min-w-0\">\n                            <div className=\"font-medium text-sm\">{cmd.title}</div>\n                            {cmd.description && (\n                              <div className=\"text-xs opacity-75\">{cmd.description}</div>\n                            )}\n                          </div>\n                        </button>\n                      );\n                    })}\n                  </div>\n                ))\n              )}\n            </div>\n\n            {/* Footer Help */}\n            {filteredCommands.length > 0 && (\n              <div className=\"px-4 py-3 border-t border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-gray-800 text-xs text-gray-500 dark:text-gray-400 flex items-center justify-between\">\n                <div className=\"flex items-center gap-4\">\n                  <span> Navigate</span>\n                  <span> Select</span>\n                </div>\n                <span>Esc to close</span>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </>\n  );\n}\n\n// Default commands factory\nexport function getDefaultCommands(router: any): Command[] {\n  return [\n    // Navigation\n    {\n      id: 'nav-dashboard',\n      title: 'Go to Dashboard',\n      description: 'View dashboard overview',\n      category: 'navigation',\n      icon: 'overview',\n      onExecute: () => router.push('/dashboard'),\n      keywords: ['home', 'overview', 'dashboard'],\n    },\n    {\n      id: 'nav-devices',\n      title: 'Go to Devices',\n      description: 'Manage your devices',\n      category: 'navigation',\n      icon: 'devices',\n      onExecute: () => router.push('/dashboard/devices'),\n      keywords: ['devices', 'displays', 'screens'],\n    },\n    {\n      id: 'nav-content',\n      title: 'Go to Content',\n      description: 'Manage your content library',\n      category: 'navigation',\n      icon: 'content',\n      onExecute: () => router.push('/dashboard/content'),\n      keywords: ['content', 'media', 'upload'],\n    },\n    {\n      id: 'nav-playlists',\n      title: 'Go to Playlists',\n      description: 'Manage your playlists',\n      category: 'navigation',\n      icon: 'playlists',\n      onExecute: () => router.push('/dashboard/playlists'),\n      keywords: ['playlists', 'schedule', 'content'],\n    },\n    {\n      id: 'nav-schedules',\n      title: 'Go to Schedules',\n      description: 'Manage your schedules',\n      category: 'navigation',\n      icon: 'schedules',\n      onExecute: () => router.push('/dashboard/schedules'),\n      keywords: ['schedules', 'automation', 'timing'],\n    },\n    {\n      id: 'nav-analytics',\n      title: 'Go to Analytics',\n      description: 'View analytics and reports',\n      category: 'navigation',\n      icon: 'analytics',\n      onExecute: () => router.push('/dashboard/analytics'),\n      keywords: ['analytics', 'reports', 'metrics', 'insights'],\n    },\n    {\n      id: 'nav-settings',\n      title: 'Go to Settings',\n      description: 'Manage your account settings',\n      category: 'navigation',\n      icon: 'settings',\n      onExecute: () => router.push('/dashboard/settings'),\n      keywords: ['settings', 'preferences', 'account'],\n    },\n  ];\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1661, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/vizora/vizora/web/src/components/CommandPaletteWrapper.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState, useCallback } from 'react';\nimport { useRouter } from 'next/navigation';\nimport CommandPalette, { getDefaultCommands, Command } from './CommandPalette';\n\nexport default function CommandPaletteWrapper() {\n  const router = useRouter();\n  const [isOpen, setIsOpen] = useState(false);\n  const [commands] = useState<Command[]>(() => getDefaultCommands(router));\n\n  // Handle Cmd+K / Ctrl+K keyboard shortcut\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if ((e.metaKey || e.ctrlKey) && e.key === 'k') {\n        e.preventDefault();\n        setIsOpen(prev => !prev);\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, []);\n\n  const handleOpenChange = useCallback((open: boolean) => {\n    setIsOpen(open);\n  }, []);\n\n  return (\n    <CommandPalette\n      commands={commands}\n      open={isOpen}\n      onOpenChange={handleOpenChange}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMe,SAAS;;IACtB,MAAM,SAAS,IAAA,iQAAS;IACxB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,wRAAQ,EAAC;IACrC,MAAM,CAAC,SAAS,GAAG,IAAA,wRAAQ;0CAAY,IAAM,IAAA,oKAAkB,EAAC;;IAEhE,0CAA0C;IAC1C,IAAA,yRAAS;2CAAC;YACR,MAAM;iEAAgB,CAAC;oBACrB,IAAI,CAAC,EAAE,OAAO,IAAI,EAAE,OAAO,KAAK,EAAE,GAAG,KAAK,KAAK;wBAC7C,EAAE,cAAc;wBAChB;6EAAU,CAAA,OAAQ,CAAC;;oBACrB;gBACF;;YAEA,OAAO,gBAAgB,CAAC,WAAW;YACnC;mDAAO,IAAM,OAAO,mBAAmB,CAAC,WAAW;;QACrD;0CAAG,EAAE;IAEL,MAAM,mBAAmB,IAAA,2RAAW;+DAAC,CAAC;YACpC,UAAU;QACZ;8DAAG,EAAE;IAEL,qBACE,4SAAC,yJAAc;QACb,UAAU;QACV,MAAM;QACN,cAAc;;;;;;AAGpB;GA7BwB;;QACP,iQAAS;;;KADF"}},
    {"offset": {"line": 1731, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/vizora/vizora/web/src/components/ErrorBoundary.tsx"],"sourcesContent":["'use client';\n\nimport React, { ReactNode } from 'react';\n\ninterface Props {\n  children: ReactNode;\n  fallback?: (error: Error, reset: () => void) => ReactNode;\n}\n\ninterface State {\n  hasError: boolean;\n  error: Error | null;\n}\n\nexport class ErrorBoundary extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null,\n    };\n  }\n\n  static getDerivedStateFromError(error: Error): State {\n    return {\n      hasError: true,\n      error,\n    };\n  }\n\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n    // Log to error tracking service (Sentry, LogRocket, etc.)\n    if (typeof window !== 'undefined' && process.env.NODE_ENV === 'production') {\n      console.error('Error Boundary caught:', error, errorInfo);\n      // TODO: Send to error tracking service\n    } else {\n      console.error('[DEV] Error Boundary:', error, errorInfo);\n    }\n  }\n\n  handleReset = () => {\n    this.setState({ hasError: false, error: null });\n  };\n\n  render() {\n    const { hasError, error } = this.state;\n    const { children, fallback } = this.props;\n\n    if (hasError && error) {\n      return (\n        fallback?.(error, this.handleReset) || (\n          <div className=\"min-h-screen flex items-center justify-center bg-gray-50 px-4\">\n            <div className=\"max-w-md w-full bg-white rounded-lg shadow-md p-8\">\n              <div className=\"text-center\">\n                <h1 className=\"text-2xl font-bold text-gray-900 mb-4\">\n                  Something went wrong\n                </h1>\n                <p className=\"text-gray-600 mb-4\">\n                  An unexpected error occurred. Please try again.\n                </p>\n                {process.env.NODE_ENV === 'development' && (\n                  <details className=\"mt-4 text-left\">\n                    <summary className=\"text-sm font-mono text-red-600 cursor-pointer\">\n                      Error details (dev only)\n                    </summary>\n                    <pre className=\"mt-2 text-xs bg-gray-100 p-2 rounded overflow-auto\">\n                      {error.message}\n                      {'\\n\\n'}\n                      {error.stack}\n                    </pre>\n                  </details>\n                )}\n                <button\n                  onClick={this.handleReset}\n                  className=\"mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded transition\"\n                >\n                  Try Again\n                </button>\n              </div>\n            </div>\n          </div>\n        )\n      );\n    }\n\n    return children;\n  }\n}\n\nexport default ErrorBoundary;\n"],"names":[],"mappings":";;;;;;AAgCyC;;AA9BzC;AAFA;;;AAcO,MAAM,sBAAsB,uRAAK,CAAC,SAAS;IAChD,YAAY,KAAY,CAAE;QACxB,KAAK,CAAC;QACN,IAAI,CAAC,KAAK,GAAG;YACX,UAAU;YACV,OAAO;QACT;IACF;IAEA,OAAO,yBAAyB,KAAY,EAAS;QACnD,OAAO;YACL,UAAU;YACV;QACF;IACF;IAEA,kBAAkB,KAAY,EAAE,SAA0B,EAAE;QAC1D,0DAA0D;QAC1D;;aAGO;YACL,QAAQ,KAAK,CAAC,yBAAyB,OAAO;QAChD;IACF;IAEA,cAAc;QACZ,IAAI,CAAC,QAAQ,CAAC;YAAE,UAAU;YAAO,OAAO;QAAK;IAC/C,EAAE;IAEF,SAAS;QACP,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,KAAK;QACtC,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,IAAI,CAAC,KAAK;QAEzC,IAAI,YAAY,OAAO;YACrB,OACE,WAAW,OAAO,IAAI,CAAC,WAAW,mBAChC,4SAAC;gBAAI,WAAU;0BACb,cAAA,4SAAC;oBAAI,WAAU;8BACb,cAAA,4SAAC;wBAAI,WAAU;;0CACb,4SAAC;gCAAG,WAAU;0CAAwC;;;;;;0CAGtD,4SAAC;gCAAE,WAAU;0CAAqB;;;;;;4BAGjC,oDAAyB,+BACxB,4SAAC;gCAAQ,WAAU;;kDACjB,4SAAC;wCAAQ,WAAU;kDAAgD;;;;;;kDAGnE,4SAAC;wCAAI,WAAU;;4CACZ,MAAM,OAAO;4CACb;4CACA,MAAM,KAAK;;;;;;;;;;;;;0CAIlB,4SAAC;gCACC,SAAS,IAAI,CAAC,WAAW;gCACzB,WAAU;0CACX;;;;;;;;;;;;;;;;;;;;;;QAQb;QAEA,OAAO;IACT;AACF;uCAEe"}}]
}