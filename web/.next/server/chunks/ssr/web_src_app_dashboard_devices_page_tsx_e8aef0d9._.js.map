{"version":3,"sources":["../../../../../web/src/app/dashboard/devices/page.tsx","../../../../../web/src/components/DeviceStatusIndicator.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { apiClient } from '@/lib/api';\r\nimport { Display, Playlist } from '@/lib/types';\r\nimport Modal from '@/components/Modal';\r\nimport ConfirmDialog from '@/components/ConfirmDialog';\r\nimport LoadingSpinner from '@/components/LoadingSpinner';\r\nimport EmptyState from '@/components/EmptyState';\r\nimport SearchFilter from '@/components/SearchFilter';\r\nimport DeviceStatusIndicator from '@/components/DeviceStatusIndicator';\r\nimport DeviceGroupSelector, { DeviceGroup } from '@/components/DeviceGroupSelector';\r\nimport { useToast } from '@/lib/hooks/useToast';\r\nimport { useDebounce } from '@/lib/hooks/useDebounce';\r\nimport { Icon } from '@/theme/icons';\r\n\r\nexport default function DevicesPage() {\r\n  const router = useRouter();\r\n  const toast = useToast();\r\n  const [devices, setDevices] = useState<Display[]>([]);\r\n  const [playlists, setPlaylists] = useState<Playlist[]>([]);\r\n  const [deviceGroups, setDeviceGroups] = useState<DeviceGroup[]>([\r\n    {\r\n      id: 'group-1',\r\n      name: 'Store Locations',\r\n      description: 'All retail store displays',\r\n      deviceIds: [],\r\n    },\r\n    {\r\n      id: 'group-2',\r\n      name: 'Corporate Office',\r\n      description: 'Main office lobby and conference rooms',\r\n      deviceIds: [],\r\n    },\r\n    {\r\n      id: 'group-3',\r\n      name: 'Digital Kiosks',\r\n      description: 'Self-service kiosks',\r\n      parentGroupId: undefined,\r\n      deviceIds: [],\r\n    },\r\n  ]);\r\n  const [selectedGroups, setSelectedGroups] = useState<string[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedDevice, setSelectedDevice] = useState<Display | null>(null);\r\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\r\n  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\r\n  const [isPairingModalOpen, setIsPairingModalOpen] = useState(false);\r\n  const [pairingCode, setPairingCode] = useState('');\r\n  const [editForm, setEditForm] = useState({ nickname: '', location: '' });\r\n  const [actionLoading, setActionLoading] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const debouncedSearch = useDebounce(searchQuery, 300);\r\n  const [sortField, setSortField] = useState<keyof Display | null>(null);\r\n  const [sortDirection, setSortDirection] = useState<'asc' | 'desc'>('asc');\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [itemsPerPage, setItemsPerPage] = useState(10);\r\n  const [showGroupFilter, setShowGroupFilter] = useState(false);\r\n\r\n  useEffect(() => {\r\n    loadDevices();\r\n    loadPlaylists();\r\n  }, []);\r\n\r\n  const loadDevices = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await apiClient.getDisplays();\r\n      setDevices(response.data || response || []);\r\n    } catch (error: any) {\r\n      toast.error(error.message || 'Failed to load devices');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadPlaylists = async () => {\r\n    try {\r\n      const response = await apiClient.getPlaylists();\r\n      setPlaylists(response.data || response || []);\r\n    } catch (error) {\r\n      // Silent fail\r\n    }\r\n  };\r\n\r\n  const getCurrentPlaylistName = (playlistId?: string) => {\r\n    if (!playlistId) return null;\r\n    const playlist = playlists.find(p => p.id === playlistId);\r\n    return playlist?.name || null;\r\n  };\r\n\r\n  const handleEdit = (device: Display) => {\r\n    setSelectedDevice(device);\r\n    setEditForm({ nickname: device.nickname, location: device.location || '' });\r\n    setIsEditModalOpen(true);\r\n  };\r\n\r\n  const handleSaveEdit = async () => {\r\n    if (!selectedDevice) return;\r\n    \r\n    try {\r\n      setActionLoading(true);\r\n      await apiClient.updateDisplay(selectedDevice.id, editForm);\r\n      toast.success('Device updated successfully');\r\n      setIsEditModalOpen(false);\r\n      loadDevices();\r\n    } catch (error: any) {\r\n      toast.error(error.message || 'Failed to update device');\r\n    } finally {\r\n      setActionLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = (device: Display) => {\r\n    setSelectedDevice(device);\r\n    setIsDeleteModalOpen(true);\r\n  };\r\n\r\n  const confirmDelete = async () => {\r\n    if (!selectedDevice) return;\r\n\r\n    try {\r\n      setActionLoading(true);\r\n      await apiClient.deleteDisplay(selectedDevice.id);\r\n      toast.success('Device deleted successfully');\r\n      loadDevices();\r\n    } catch (error: any) {\r\n      toast.error(error.message || 'Failed to delete device');\r\n    } finally {\r\n      setActionLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleGeneratePairingCode = async (device: Display) => {\r\n    try {\r\n      setActionLoading(true);\r\n      const response = await apiClient.generatePairingToken(device.id);\r\n      setPairingCode(response.pairingCode || 'N/A');\r\n      setSelectedDevice(device);\r\n      setIsPairingModalOpen(true);\r\n    } catch (error: any) {\r\n      toast.error(error.message || 'Failed to generate pairing code');\r\n    } finally {\r\n      setActionLoading(false);\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case 'online':\r\n        return 'bg-success-100 dark:bg-success-900 text-success-800 dark:text-success-200';\r\n      case 'offline':\r\n        return 'bg-error-100 dark:bg-error-900 text-error-800 dark:text-error-200';\r\n      case 'idle':\r\n        return 'bg-warning-100 dark:bg-warning-900 text-warning-800 dark:text-warning-200';\r\n      default:\r\n        return 'bg-neutral-100 dark:bg-neutral-900 text-neutral-800 dark:text-neutral-200';\r\n    }\r\n  };\r\n\r\n  const getStatusDot = (status: string) => {\r\n    switch (status) {\r\n      case 'online':\r\n        return 'bg-success-500';\r\n      case 'offline':\r\n        return 'bg-error-500';\r\n      case 'idle':\r\n        return 'bg-warning-500';\r\n      default:\r\n        return 'bg-neutral-400';\r\n    }\r\n  };\r\n\r\n  const handleSort = (field: keyof Display) => {\r\n    if (sortField === field) {\r\n      // Toggle direction or clear sort\r\n      if (sortDirection === 'asc') {\r\n        setSortDirection('desc');\r\n      } else {\r\n        setSortField(null);\r\n      }\r\n    } else {\r\n      setSortField(field);\r\n      setSortDirection('asc');\r\n    }\r\n  };\r\n\r\n  // Filter and sort devices\r\n  const filteredAndSortedDevices = devices\r\n    .filter(d => \r\n      !debouncedSearch || \r\n      d.nickname.toLowerCase().includes(debouncedSearch.toLowerCase()) ||\r\n      (d.location && d.location.toLowerCase().includes(debouncedSearch.toLowerCase()))\r\n    )\r\n    .sort((a, b) => {\r\n      if (!sortField) return 0;\r\n      \r\n      const aVal = a[sortField];\r\n      const bVal = b[sortField];\r\n      \r\n      // Handle null/undefined\r\n      if (aVal == null && bVal == null) return 0;\r\n      if (aVal == null) return 1;\r\n      if (bVal == null) return -1;\r\n      \r\n      // Compare\r\n      if (aVal < bVal) return sortDirection === 'asc' ? -1 : 1;\r\n      if (aVal > bVal) return sortDirection === 'asc' ? 1 : -1;\r\n      return 0;\r\n    });\r\n\r\n  // Pagination\r\n  const totalItems = filteredAndSortedDevices.length;\r\n  const totalPages = Math.ceil(totalItems / itemsPerPage);\r\n  const startIndex = (currentPage - 1) * itemsPerPage;\r\n  const endIndex = startIndex + itemsPerPage;\r\n  const displayDevices = filteredAndSortedDevices.slice(startIndex, endIndex);\r\n\r\n  // Reset to page 1 when search changes\r\n  useEffect(() => {\r\n    setCurrentPage(1);\r\n  }, [debouncedSearch]);\r\n\r\n  const getSortIcon = (field: keyof Display) => {\r\n    if (sortField !== field) return null;\r\n    return sortDirection === 'asc' ? ' ↑' : ' ↓';\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <toast.ToastContainer />\r\n\r\n      <div className=\"flex justify-between items-center\">\r\n        <div>\r\n          <h2 className=\"text-3xl font-bold text-gray-900 dark:text-gray-50\">Devices</h2>\r\n          <p className=\"mt-2 text-gray-600 dark:text-gray-400\">\r\n            Manage your paired display devices ({devices.length} total)\r\n          </p>\r\n        </div>\r\n        <button\r\n          onClick={() => router.push('/dashboard/devices/pair')}\r\n          className=\"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition font-semibold shadow-md hover:shadow-lg flex items-center gap-2\"\r\n        >\r\n          <Icon name=\"add\" size=\"lg\" className=\"text-white\" />\r\n          <span>Pair New Device</span>\r\n        </button>\r\n      </div>\r\n\r\n      {/* Search Filter */}\r\n      <SearchFilter\r\n        value={searchQuery}\r\n        onChange={setSearchQuery}\r\n        placeholder=\"Search devices by name or location...\"\r\n      />\r\n\r\n      {/* Device List */}\r\n      {loading ? (\r\n        <div className=\"bg-white dark:bg-gray-900 rounded-lg shadow p-12\">\r\n          <LoadingSpinner size=\"lg\" />\r\n        </div>\r\n      ) : devices.length === 0 ? (\r\n        <EmptyState\r\n          icon=\"devices\"\r\n          title=\"No devices yet\"\r\n          description=\"Get started by pairing your first display device\"\r\n          action={{\r\n            label: 'Pair Device',\r\n            onClick: () => router.push('/dashboard/devices/pair'),\r\n          }}\r\n        />\r\n      ) : (\r\n        <>\r\n          {debouncedSearch && (\r\n            <div className=\"bg-info-50 dark:bg-info-900 border border-info-200 dark:border-info-700 rounded-lg p-3 mb-4\">\r\n              <p className=\"text-sm text-info-800 dark:text-info-200\">\r\n                {displayDevices.length}{' '}\r\n                {displayDevices.length === 1 ? 'result' : 'results'} found\r\n              </p>\r\n            </div>\r\n          )}\r\n          <div className=\"bg-white dark:bg-gray-900 rounded-lg shadow overflow-hidden\">\r\n            <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\r\n              <thead className=\"bg-gray-50 dark:bg-gray-800\">\r\n                <tr>\r\n                  <th\r\n                    className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 select-none\"\r\n                    onClick={() => handleSort('nickname')}\r\n                  >\r\n                    Device{getSortIcon('nickname')}\r\n                  </th>\r\n                  <th\r\n                    className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 select-none\"\r\n                    onClick={() => handleSort('status')}\r\n                  >\r\n                    Status{getSortIcon('status')}\r\n                  </th>\r\n                  <th\r\n                    className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 select-none\"\r\n                    onClick={() => handleSort('location')}\r\n                  >\r\n                    Location{getSortIcon('location')}\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\r\n                    Currently Playing\r\n                  </th>\r\n                  <th\r\n                    className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 select-none\"\r\n                    onClick={() => handleSort('lastSeen')}\r\n                  >\r\n                    Last Seen{getSortIcon('lastSeen')}\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\r\n                    Actions\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700\">\r\n                {displayDevices.map((device) => (\r\n                <tr key={device.id} className=\"hover:bg-gray-50 dark:hover:bg-gray-800 transition\">\r\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                    <div className=\"flex items-center\">\r\n                      <Icon name=\"devices\" size=\"xl\" className=\"mr-3 text-gray-600 dark:text-gray-400\" />\r\n                      <div>\r\n                        <div className=\"text-sm font-semibold text-gray-900 dark:text-gray-50\">\r\n                          {device.nickname}\r\n                        </div>\r\n                        <div className=\"text-xs text-gray-500 dark:text-gray-400\">ID: {device.id}</div>\r\n                      </div>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                    <DeviceStatusIndicator deviceId={device.id} showLabel showTime />\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400\">\r\n                    {device.location || '—'}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\r\n                    {getCurrentPlaylistName(device.currentPlaylistId) ? (\r\n                      <span className=\"px-3 py-1 bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-200 rounded-full text-xs font-semibold flex items-center gap-1 w-fit\">\r\n                        <Icon name=\"playlists\" size=\"sm\" className=\"text-primary-800 dark:text-primary-200\" />\r\n                        <span>{getCurrentPlaylistName(device.currentPlaylistId)}</span>\r\n                      </span>\r\n                    ) : (\r\n                      <span className=\"text-gray-400 dark:text-gray-600 italic\">No playlist</span>\r\n                    )}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400\">\r\n                    {device.lastSeen\r\n                      ? new Date(device.lastSeen).toLocaleString()\r\n                      : 'Never'}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\r\n                    <div className=\"flex justify-end gap-2\">\r\n                      <button\r\n                        onClick={() => handleEdit(device)}\r\n                        className=\"text-blue-600 hover:text-blue-800 hover:bg-blue-50 px-3 py-1 rounded transition font-medium\"\r\n                      >\r\n                        Edit\r\n                      </button>\r\n                      <button\r\n                        onClick={() => handleGeneratePairingCode(device)}\r\n                        className=\"text-purple-600 hover:text-purple-800 hover:bg-purple-50 px-3 py-1 rounded transition font-medium\"\r\n                      >\r\n                        Pair\r\n                      </button>\r\n                      <button\r\n                        onClick={() => handleDelete(device)}\r\n                        className=\"text-red-600 hover:text-red-800 hover:bg-red-50 px-3 py-1 rounded transition font-medium\"\r\n                      >\r\n                        Delete\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n          </div>\r\n\r\n          {/* Pagination */}\r\n          {totalItems > 0 && (\r\n            <div className=\"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6 rounded-b-lg\">\r\n              <div className=\"flex-1 flex justify-between sm:hidden\">\r\n                <button\r\n                  onClick={() => setCurrentPage(prev => Math.max(1, prev - 1))}\r\n                  disabled={currentPage === 1}\r\n                  className=\"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                  Previous\r\n                </button>\r\n                <button\r\n                  onClick={() => setCurrentPage(prev => Math.min(totalPages, prev + 1))}\r\n                  disabled={currentPage === totalPages}\r\n                  className=\"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                  Next\r\n                </button>\r\n              </div>\r\n              <div className=\"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between\">\r\n                <div className=\"flex items-center gap-4\">\r\n                  <p className=\"text-sm text-gray-700\">\r\n                    Showing <span className=\"font-medium\">{startIndex + 1}</span> to{' '}\r\n                    <span className=\"font-medium\">{Math.min(endIndex, totalItems)}</span> of{' '}\r\n                    <span className=\"font-medium\">{totalItems}</span> devices\r\n                  </p>\r\n                  <select\r\n                    value={itemsPerPage}\r\n                    onChange={(e) => {\r\n                      setItemsPerPage(Number(e.target.value));\r\n                      setCurrentPage(1);\r\n                    }}\r\n                    className=\"text-sm border-gray-300 rounded-md\"\r\n                  >\r\n                    <option value={10}>10 per page</option>\r\n                    <option value={25}>25 per page</option>\r\n                    <option value={50}>50 per page</option>\r\n                    <option value={100}>100 per page</option>\r\n                  </select>\r\n                </div>\r\n                <div>\r\n                  <nav className=\"relative z-0 inline-flex rounded-md shadow-sm -space-x-px\">\r\n                    <button\r\n                      onClick={() => setCurrentPage(prev => Math.max(1, prev - 1))}\r\n                      disabled={currentPage === 1}\r\n                      className=\"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                    >\r\n                      ← Previous\r\n                    </button>\r\n                    {Array.from({ length: Math.min(5, totalPages) }, (_, i) => {\r\n                      let pageNum;\r\n                      if (totalPages <= 5) {\r\n                        pageNum = i + 1;\r\n                      } else if (currentPage <= 3) {\r\n                        pageNum = i + 1;\r\n                      } else if (currentPage >= totalPages - 2) {\r\n                        pageNum = totalPages - 4 + i;\r\n                      } else {\r\n                        pageNum = currentPage - 2 + i;\r\n                      }\r\n                      return (\r\n                        <button\r\n                          key={pageNum}\r\n                          onClick={() => setCurrentPage(pageNum)}\r\n                          className={`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${\r\n                            currentPage === pageNum\r\n                              ? 'z-10 bg-blue-50 border-blue-500 text-blue-600'\r\n                              : 'bg-white border-gray-300 text-gray-500 hover:bg-gray-50'\r\n                          }`}\r\n                        >\r\n                          {pageNum}\r\n                        </button>\r\n                      );\r\n                    })}\r\n                    <button\r\n                      onClick={() => setCurrentPage(prev => Math.min(totalPages, prev + 1))}\r\n                      disabled={currentPage === totalPages}\r\n                      className=\"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                    >\r\n                      Next →\r\n                    </button>\r\n                  </nav>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n\r\n      {/* Edit Modal */}\r\n      <Modal\r\n        isOpen={isEditModalOpen}\r\n        onClose={() => setIsEditModalOpen(false)}\r\n        title=\"Edit Device\"\r\n      >\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Device Nickname\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={editForm.nickname}\r\n              onChange={(e) => setEditForm({ ...editForm, nickname: e.target.value })}\r\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              placeholder=\"e.g., Store Front Display\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Location (Optional)\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={editForm.location}\r\n              onChange={(e) => setEditForm({ ...editForm, location: e.target.value })}\r\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              placeholder=\"e.g., Main Entrance\"\r\n            />\r\n          </div>\r\n          <div className=\"flex justify-end gap-3 pt-4\">\r\n            <button\r\n              onClick={() => setIsEditModalOpen(false)}\r\n              className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition\"\r\n              disabled={actionLoading}\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              onClick={handleSaveEdit}\r\n              className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition disabled:opacity-50 flex items-center gap-2\"\r\n              disabled={actionLoading || !editForm.nickname.trim()}\r\n            >\r\n              {actionLoading && <LoadingSpinner size=\"sm\" />}\r\n              Save Changes\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      {/* Pairing Modal */}\r\n      <Modal\r\n        isOpen={isPairingModalOpen}\r\n        onClose={() => setIsPairingModalOpen(false)}\r\n        title=\"Pairing Code\"\r\n      >\r\n        <div className=\"text-center space-y-4\">\r\n          <p className=\"text-gray-600\">\r\n            Enter this code on your display device to pair it:\r\n          </p>\r\n          <div className=\"bg-gray-100 rounded-lg p-6\">\r\n            <div className=\"text-4xl font-bold text-blue-600 tracking-widest\">\r\n              {pairingCode}\r\n            </div>\r\n          </div>\r\n          <p className=\"text-sm text-gray-500\">\r\n            This code will expire in 5 minutes\r\n          </p>\r\n          <button\r\n            onClick={() => setIsPairingModalOpen(false)}\r\n            className=\"w-full px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition\"\r\n          >\r\n            Done\r\n          </button>\r\n        </div>\r\n      </Modal>\r\n\r\n      {/* Delete Confirmation */}\r\n      <ConfirmDialog\r\n        isOpen={isDeleteModalOpen}\r\n        onClose={() => setIsDeleteModalOpen(false)}\r\n        onConfirm={confirmDelete}\r\n        title=\"Delete Device\"\r\n        message={`Are you sure you want to delete \"${selectedDevice?.nickname}\"? This action cannot be undone.`}\r\n        confirmText=\"Delete\"\r\n        type=\"danger\"\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useDeviceStatus, DeviceStatus } from '@/lib/context/DeviceStatusContext';\nimport { Icon } from '@/theme/icons';\n\ninterface DeviceStatusIndicatorProps {\n  deviceId: string;\n  showLabel?: boolean;\n  showTime?: boolean;\n  className?: string;\n}\n\nconst statusConfig = {\n  online: {\n    color: 'text-green-600 dark:text-green-400',\n    bgColor: 'bg-green-100 dark:bg-green-900',\n    dotColor: 'bg-green-500',\n    label: 'Online',\n    icon: 'check',\n  },\n  offline: {\n    color: 'text-red-600 dark:text-red-400',\n    bgColor: 'bg-red-100 dark:bg-red-900',\n    dotColor: 'bg-red-500',\n    label: 'Offline',\n    icon: 'x',\n  },\n  idle: {\n    color: 'text-yellow-600 dark:text-yellow-400',\n    bgColor: 'bg-yellow-100 dark:bg-yellow-900',\n    dotColor: 'bg-yellow-500',\n    label: 'Idle',\n    icon: 'pause',\n  },\n  error: {\n    color: 'text-orange-600 dark:text-orange-400',\n    bgColor: 'bg-orange-100 dark:bg-orange-900',\n    dotColor: 'bg-orange-500',\n    label: 'Error',\n    icon: 'alertTriangle',\n  },\n};\n\nexport default function DeviceStatusIndicator({\n  deviceId,\n  showLabel = true,\n  showTime = false,\n  className = '',\n}: DeviceStatusIndicatorProps) {\n  const { getDeviceStatus, subscribeToDevice } = useDeviceStatus();\n  const [status, setStatus] = useState<DeviceStatus>('offline');\n  const [lastUpdate, setLastUpdate] = useState<Date | null>(null);\n  const [isUpdating, setIsUpdating] = useState(false);\n\n  useEffect(() => {\n    // Subscribe to device status updates\n    const unsubscribe = subscribeToDevice(deviceId, (update) => {\n      setStatus(update.status);\n      setLastUpdate(new Date(update.timestamp));\n      setIsUpdating(true);\n\n      // Remove animation after a brief moment\n      setTimeout(() => setIsUpdating(false), 600);\n    });\n\n    // Get initial status\n    const currentStatus = getDeviceStatus(deviceId);\n    if (currentStatus) {\n      setStatus(currentStatus.status);\n      setLastUpdate(new Date(currentStatus.timestamp));\n    }\n\n    return unsubscribe;\n  }, [deviceId, subscribeToDevice, getDeviceStatus]);\n\n  const config = statusConfig[status];\n\n  const formatTime = () => {\n    if (!lastUpdate) return '';\n\n    const now = new Date();\n    const diff = now.getTime() - lastUpdate.getTime();\n    const seconds = Math.floor(diff / 1000);\n    const minutes = Math.floor(seconds / 60);\n    const hours = Math.floor(minutes / 60);\n\n    if (seconds < 60) return `${seconds}s ago`;\n    if (minutes < 60) return `${minutes}m ago`;\n    if (hours < 24) return `${hours}h ago`;\n\n    return lastUpdate.toLocaleDateString();\n  };\n\n  return (\n    <div className={`flex items-center gap-2 ${className}`}>\n      {/* Animated pulse dot */}\n      <div className={`relative w-3 h-3 rounded-full ${config.dotColor}`}>\n        {status === 'online' && (\n          <div className={`absolute inset-0 rounded-full ${config.dotColor} animate-pulse opacity-75`} />\n        )}\n        {isUpdating && (\n          <div className={`absolute inset-0 rounded-full ${config.dotColor} animate-pulse`} />\n        )}\n      </div>\n\n      {/* Status badge */}\n      {showLabel && (\n        <div className={`px-2 py-1 rounded-md text-xs font-semibold ${config.bgColor} ${config.color}`}>\n          {config.label}\n        </div>\n      )}\n\n      {/* Time since update */}\n      {showTime && lastUpdate && (\n        <div className=\"text-xs text-gray-500 dark:text-gray-400 ml-1\">\n          {formatTime()}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}