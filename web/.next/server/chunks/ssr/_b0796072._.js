module.exports=[24848,(a,b,c)=>{"use strict";b.exports=a.r(13182).vendored["react-ssr"].ReactServerDOMTurbopackClient},79412,a=>{"use strict";let b=new class{baseUrl;token=null;constructor(a){this.baseUrl=a}setToken(a){this.token=a}clearToken(){this.token=null}async request(a,b={}){let c={"Content-Type":"application/json",...this.token&&{Authorization:`Bearer ${this.token}`},...b.headers};console.log(`[API] Request: ${b.method||"GET"} ${this.baseUrl}${a}`);let d=await fetch(`${this.baseUrl}${a}`,{...b,headers:c});if(console.log(`[API] Response status: ${d.status} ${d.statusText}`),!d.ok)throw console.error(`[API] Request failed with status ${d.status}`),(401===d.status||403===d.status)&&this.clearToken(),Error((await d.json().catch(()=>({message:"Request failed"}))).message||`HTTP ${d.status}`);let e=await d.json();return console.log("[API] Response data:",e),e}async login(a,b){console.log("[API] Login called with email:",a);let c=await this.request("/auth/login",{method:"POST",body:JSON.stringify({email:a,password:b})});return console.log("[API] Login response received:",c),console.log("[API] Response structure:",{hasSuccess:"success"in c,hasData:"data"in c,dataType:typeof c.data,hasToken:c.data?.token!==void 0,tokenValue:c.data?.token?c.data.token.substring(0,30)+"...":"MISSING"}),c.data&&c.data.token?(console.log("[API] ✅ Token found, calling setToken()"),this.setToken(c.data.token),console.log("[API] ✅ Token saved to localStorage")):(console.error("[API] ❌ TOKEN NOT FOUND in response!"),console.error("[API] Response:",JSON.stringify(c,null,2))),c.data}async register(a,b,c,d,e){console.log("[API] Register called");let f=await this.request("/auth/register",{method:"POST",body:JSON.stringify({email:a,password:b,organizationName:c,firstName:d,lastName:e})});return console.log("[API] Register response received:",f),console.log("[API] Response structure:",{hasSuccess:"success"in f,hasData:"data"in f,hasToken:f.data?.token!==void 0,tokenValue:f.data?.token?f.data.token.substring(0,30)+"...":"MISSING"}),f.data&&f.data.token?(console.log("[API] ✅ Token found in register, calling setToken()"),this.setToken(f.data.token),console.log("[API] ✅ Token saved to localStorage")):console.error("[API] ❌ TOKEN NOT FOUND in register response!"),f.data}async getDisplays(a){let b=new URLSearchParams(a).toString();return this.request(`/displays${b?`?${b}`:""}`)}async getDisplay(a){return this.request(`/displays/${a}`)}async createDisplay(a){let b={name:a.nickname,location:a.location,deviceId:`device-${Date.now()}-${Math.random().toString(36).substring(7)}`};return this.request("/displays",{method:"POST",body:JSON.stringify(b)})}async updateDisplay(a,b){let c={};return void 0!==b.nickname&&(c.name=b.nickname),void 0!==b.location&&(c.location=b.location),void 0!==b.currentPlaylistId&&(c.currentPlaylistId=b.currentPlaylistId),this.request(`/displays/${a}`,{method:"PATCH",body:JSON.stringify(c)})}async deleteDisplay(a){return this.request(`/displays/${a}`,{method:"DELETE"})}async generatePairingToken(a){return this.request(`/displays/${a}/pair`,{method:"POST"})}async completePairing(a){return this.request("/devices/pairing/complete",{method:"POST",body:JSON.stringify(a)})}async getContent(a){let b=new URLSearchParams(a).toString();return this.request(`/content${b?`?${b}`:""}`)}async getContentItem(a){return this.request(`/content/${a}`)}async createContent(a){let b={name:a.title,type:"pdf"===a.type?"url":a.type,url:a.url||"",metadata:a.metadata};return this.request("/content",{method:"POST",body:JSON.stringify(b)})}async updateContent(a,b){return this.request(`/content/${a}`,{method:"PATCH",body:JSON.stringify(b)})}async deleteContent(a){return this.request(`/content/${a}`,{method:"DELETE"})}async archiveContent(a){return this.request(`/content/${a}/archive`,{method:"POST"})}async getPlaylists(a){let b=new URLSearchParams(a).toString();return this.request(`/playlists${b?`?${b}`:""}`)}async getPlaylist(a){return this.request(`/playlists/${a}`)}async createPlaylist(a){return this.request("/playlists",{method:"POST",body:JSON.stringify(a)})}async updatePlaylist(a,b){return this.request(`/playlists/${a}`,{method:"PATCH",body:JSON.stringify(b)})}async deletePlaylist(a){return this.request(`/playlists/${a}`,{method:"DELETE"})}async addPlaylistItem(a,b,c){return this.request(`/playlists/${a}/items`,{method:"POST",body:JSON.stringify({contentId:b,duration:c})})}async removePlaylistItem(a,b){return this.request(`/playlists/${a}/items/${b}`,{method:"DELETE"})}async updatePlaylistItem(a,b,c){return this.request(`/playlists/${a}/items/${b}`,{method:"PATCH",body:JSON.stringify(c)})}async getSchedules(a){let b=new URLSearchParams(a).toString();return this.request(`/schedules${b?`?${b}`:""}`)}async createSchedule(a){return this.request("/schedules",{method:"POST",body:JSON.stringify(a)})}async updateSchedule(a,b){return this.request(`/schedules/${a}`,{method:"PATCH",body:JSON.stringify(b)})}async deleteSchedule(a){return this.request(`/schedules/${a}`,{method:"DELETE"})}async post(a,b){return this.request(a,{method:"POST",body:b?JSON.stringify(b):void 0})}async get(a){return this.request(a,{method:"GET"})}async patch(a,b){return this.request(a,{method:"PATCH",body:b?JSON.stringify(b):void 0})}async delete(a){return this.request(a,{method:"DELETE"})}}("http://localhost:3000/api");a.s(["apiClient",0,b])},60321,a=>{"use strict";var b=a.i(64239),c=a.i(85993),d=a.i(59665),e=a.i(872),f=a.i(79412);function g(){let a=(0,d.usePathname)(),e=a.split("/").filter(Boolean),f=e.map((a,b)=>{let c="/"+e.slice(0,b+1).join("/");return{label:({dashboard:"Dashboard",devices:"Devices",content:"Content",playlists:"Playlists",schedules:"Schedules",analytics:"Analytics",settings:"Settings",pair:"Pair Device"})[a]||a.charAt(0).toUpperCase()+a.slice(1),path:c,isLast:b===e.length-1}});return"/dashboard"===a?null:(0,b.jsx)("nav",{className:"flex mb-6 text-sm","aria-label":"Breadcrumb",children:(0,b.jsxs)("ol",{className:"inline-flex items-center space-x-1 md:space-x-3",children:[(0,b.jsx)("li",{className:"inline-flex items-center",children:(0,b.jsxs)(c.default,{href:"/dashboard",className:"inline-flex items-center text-gray-600 hover:text-blue-600 transition",children:[(0,b.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})}),"Dashboard"]})}),f.slice(1).map((a,d)=>(0,b.jsx)("li",{children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("svg",{className:"w-6 h-6 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),a.isLast?(0,b.jsx)("span",{className:"ml-1 text-gray-900 font-medium md:ml-2",children:a.label}):(0,b.jsx)(c.default,{href:a.path,className:"ml-1 text-gray-600 hover:text-blue-600 transition md:ml-2",children:a.label})]})},a.path))]})})}var h=a.i(31525);function i(){let[a,c]=(0,e.useState)("system"),[d,f]=(0,e.useState)(!1);(0,e.useEffect)(()=>{f(!0);let a=localStorage.getItem("theme");if(a)c(a),g(a);else{let a=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";c("system"),g("system",a)}},[]);let g=(a,b)=>{let c=document.documentElement;if("system"===a){let a=b||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");c.classList.toggle("dark","dark"===a)}else c.classList.toggle("dark","dark"===a)};return d?(0,b.jsx)("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[{value:"light",label:"Light",icon:"sun"},{value:"dark",label:"Dark",icon:"moon"},{value:"system",label:"System",icon:"settings"}].map(d=>(0,b.jsxs)("button",{onClick:()=>{var a;c(a=d.value),localStorage.setItem("theme",a),g(a)},className:`flex items-center gap-2 px-3 py-2 rounded-md transition-all duration-200 ${a===d.value?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,title:d.label,"aria-label":`Switch to ${d.label} theme`,children:[(0,b.jsx)(h.Icon,{name:d.icon,size:"sm"}),(0,b.jsx)("span",{className:"text-sm font-medium hidden sm:inline",children:d.label})]},d.value))}):null}let j=[{name:"Overview",href:"/dashboard",icon:"overview",exactMatch:!0},{name:"Devices",href:"/dashboard/devices",icon:"devices"},{name:"Content",href:"/dashboard/content",icon:"content"},{name:"Playlists",href:"/dashboard/playlists",icon:"playlists"},{name:"Schedules",href:"/dashboard/schedules",icon:"schedules"},{name:"Analytics",href:"/dashboard/analytics",icon:"analytics"},{name:"Settings",href:"/dashboard/settings",icon:"settings"}];function k({children:a}){let k=(0,d.usePathname)(),l=(0,d.useRouter)(),{user:m,loading:n,logout:o}=function(){let[a,b]=(0,e.useState)(null),[c,d]=(0,e.useState)(!0),[g,h]=(0,e.useState)(null);(0,e.useEffect)(()=>{i()},[]);let i=async()=>{try{d(!0);let a=localStorage.getItem("authToken");if(!a)return void b(null);try{let c=JSON.parse(atob(a.split(".")[1]));b({id:c.sub||c.userId,email:c.email,organizationId:c.organizationId,organizationName:c.organizationName,role:c.role})}catch(a){console.error("Failed to decode token:",a),b(null)}}catch(a){h(a.message),b(null)}finally{d(!1)}};return{user:a,loading:c,error:g,isAuthenticated:!!a,logout:()=>{f.apiClient.clearToken(),b(null),window.location.href="/login"},reload:i}}(),[p,q]=(0,e.useState)(!0),[r,s]=(0,e.useState)(!1);return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200 fixed top-0 left-0 right-0 z-30",children:(0,b.jsx)("div",{className:"px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("button",{onClick:()=>q(!p),className:"p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100 transition lg:hidden",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,b.jsxs)(c.default,{href:"/dashboard",className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-white font-bold text-lg",children:"V"})}),(0,b.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Vizora"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(i,{}),!n&&m&&(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("button",{onClick:()=>s(!r),className:"hidden sm:flex items-center gap-2 px-3 py-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center","aria-label":`${m.email} avatar`,children:(0,b.jsx)("span",{className:"text-white text-sm font-semibold",children:(()=>{if(!m?.email)return"U";let a=m.email.split("@")[0].split(".");return a.length>=2?(a[0][0]+a[1][0]).toUpperCase():m.email.substring(0,2).toUpperCase()})()})}),(0,b.jsxs)("div",{className:"hidden md:block text-left",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900",children:m.email.split("@")[0]}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:m.email})]}),(0,b.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),r&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>s(!1)}),(0,b.jsxs)("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 z-20",children:[(0,b.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900",children:m.email.split("@")[0]}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:m.email})]}),(0,b.jsxs)("div",{className:"py-2",children:[(0,b.jsxs)("button",{onClick:()=>{s(!1),l.push("/dashboard/settings")},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition flex items-center gap-2",children:[(0,b.jsx)(h.Icon,{name:"settings",size:"md",className:"text-gray-500"}),(0,b.jsx)("span",{children:"Settings"})]}),(0,b.jsxs)("button",{onClick:()=>{s(!1),o()},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition flex items-center gap-2",children:[(0,b.jsx)(h.Icon,{name:"logout",size:"md",className:"text-red-500"}),(0,b.jsx)("span",{children:"Logout"})]})]})]})]})]})]})]})})}),(0,b.jsxs)("div",{className:"flex pt-16",children:[(0,b.jsxs)("aside",{className:`${p?"translate-x-0":"-translate-x-full"} fixed lg:relative lg:translate-x-0 w-64 bg-white min-h-[calc(100vh-4rem)] border-r border-gray-200 transition-transform duration-300 ease-in-out z-20`,children:[(0,b.jsx)("nav",{className:"p-4 space-y-1",children:j.map(a=>{let d=a.exactMatch?k===a.href:k.startsWith(a.href);return(0,b.jsxs)(c.default,{href:a.href,onClick:()=>q(!1),className:`flex items-center space-x-3 px-4 py-3 rounded-lg text-sm font-medium transition-all ${d?"bg-gradient-to-r from-blue-50 to-purple-50 text-blue-700 shadow-sm":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}`,children:[(0,b.jsx)(h.Icon,{name:a.icon,size:"lg",className:"text-gray-600"}),(0,b.jsx)("span",{className:"flex-1",children:a.name}),d&&(0,b.jsx)("span",{className:"w-2 h-2 bg-blue-600 rounded-full"})]},a.name)})}),(0,b.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200 bg-gradient-to-br from-blue-50 to-purple-50",children:(0,b.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Version"}),(0,b.jsx)("span",{className:"font-semibold",children:"1.0.0"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Status"}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,b.jsx)("span",{className:"font-semibold text-green-600",children:"Online"})]})]})]})})]}),p&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-10 lg:hidden",onClick:()=>q(!1)}),(0,b.jsx)("main",{className:"flex-1 p-4 sm:p-6 lg:p-8 min-h-[calc(100vh-4rem)] overflow-x-hidden",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsx)(g,{}),a]})})]})]})}a.s(["default",()=>k],60321)}];

//# sourceMappingURL=_b0796072._.js.map