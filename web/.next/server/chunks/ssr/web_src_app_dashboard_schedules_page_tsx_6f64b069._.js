module.exports=[88667,a=>{"use strict";var b=a.i(64239),c=a.i(872),d=a.i(79412),e=a.i(31893),f=a.i(61027),g=a.i(51355),h=a.i(60547),i=a.i(31525);function j({value:a,onChange:d,interval:e=15,showFormat:f="24h",className:g=""}){let[h,j]=(0,c.useState)(!1),[k,l]=a.split(":").map(Number),m=(0,c.useMemo)(()=>{let a=[];for(let b=0;b<24;b++)for(let c=0;c<60;c+=e){let d,e=`${String(b).padStart(2,"0")}:${String(c).padStart(2,"0")}`;if("12h"===f){let a=b>=12?"PM":"AM",e=0===b?12:b>12?b-12:b;d=`${e}:${String(c).padStart(2,"0")} ${a}`}else d=e;a.push({label:d,value:e})}return a},[e,f]),n=m.find(b=>b.value===a),o=n?.label||a;return(0,b.jsx)("div",{className:g,children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("button",{onClick:()=>j(!h),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-50 flex items-center justify-between hover:border-gray-400 dark:hover:border-gray-600 transition-colors",children:[(0,b.jsx)("span",{children:o}),(0,b.jsx)(i.Icon,{name:"chevronDown",size:"sm"})]}),h&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>j(!1)}),(0,b.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-2 z-20 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg shadow-lg overflow-hidden",children:[(0,b.jsxs)("div",{className:"border-b border-gray-200 dark:border-gray-700 p-2",children:[(0,b.jsx)("div",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 px-2 py-1",children:"Common Times"}),[{label:"Start of Business (9:00 AM)",value:"09:00"},{label:"Lunch Time (12:00 PM)",value:"12:00"},{label:"End of Business (5:00 PM)",value:"17:00"},{label:"Evening (7:00 PM)",value:"19:00"},{label:"Midnight",value:"00:00"}].map(c=>(0,b.jsx)("button",{onClick:()=>{d(c.value),j(!1)},className:`w-full text-left px-3 py-2 rounded text-sm transition-colors ${a===c.value?"bg-blue-100 dark:bg-blue-900 text-blue-900 dark:text-blue-100 font-semibold":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:c.label},c.value))]}),(0,b.jsx)("div",{className:"max-h-60 overflow-y-auto",children:m.map(c=>(0,b.jsx)("button",{onClick:()=>{d(c.value),j(!1)},className:`w-full text-left px-4 py-2 text-sm transition-colors ${a===c.value?"bg-blue-500 dark:bg-blue-600 text-white font-semibold":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:c.label},c.value))})]})]})]})})}let k=[{id:"Monday",label:"Mon",fullLabel:"Monday"},{id:"Tuesday",label:"Tue",fullLabel:"Tuesday"},{id:"Wednesday",label:"Wed",fullLabel:"Wednesday"},{id:"Thursday",label:"Thu",fullLabel:"Thursday"},{id:"Friday",label:"Fri",fullLabel:"Friday"},{id:"Saturday",label:"Sat",fullLabel:"Saturday"},{id:"Sunday",label:"Sun",fullLabel:"Sunday"}];function l({selected:a,onChange:c,className:d=""}){let e=["Monday","Tuesday","Wednesday","Thursday","Friday"].every(b=>a.includes(b)),f=["Saturday","Sunday"].every(b=>a.includes(b));return(0,b.jsx)("div",{className:d,children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,b.jsx)("button",{onClick:()=>{7===a.length?c([]):c(k.map(a=>a.id))},className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${7===a.length?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"All Days"}),(0,b.jsx)("button",{onClick:()=>{let b=["Monday","Tuesday","Wednesday","Thursday","Friday"];if(b.every(b=>a.includes(b)))c(a.filter(a=>!b.includes(a)));else{let d=new Set(a);b.forEach(a=>d.add(a)),c(Array.from(d))}},className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${e?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"Weekdays"}),(0,b.jsx)("button",{onClick:()=>{let b=["Saturday","Sunday"];if(b.every(b=>a.includes(b)))c(a.filter(a=>!b.includes(a)));else{let d=new Set(a);b.forEach(a=>d.add(a)),c(Array.from(d))}},className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${f?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"Weekends"})]}),(0,b.jsx)("div",{className:"grid grid-cols-7 gap-2",children:k.map(d=>{let e=a.includes(d.id);return(0,b.jsx)("button",{onClick:()=>{var b;return b=d.id,void(a.includes(b)?c(a.filter(a=>a!==b)):c([...a,b]))},className:`py-3 px-2 rounded-lg font-semibold text-sm transition-all ${e?"bg-blue-600 text-white shadow-md":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,title:d.fullLabel,children:d.label},d.id)})}),a.length>0&&(0,b.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:(0,b.jsxs)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[(0,b.jsx)("span",{className:"font-semibold",children:a.length})," day",1!==a.length?"s":""," selected:"," ",a.map(a=>k.find(b=>b.id===a)?.fullLabel).join(", ")]})}),0===a.length&&(0,b.jsx)("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-800 rounded-lg p-3",children:(0,b.jsx)("p",{className:"text-sm text-red-800 dark:text-red-200",children:"Please select at least one day"})})]})})}var m=a.i(57052);function n(){let a=(0,m.useToast)(),[k,n]=(0,c.useState)([]),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)(!0),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)({name:"",startTime:"09:00",duration:60,days:["Monday","Tuesday","Wednesday","Thursday","Friday"],timezone:"America/New_York",playlistId:"",deviceIds:[]}),[G,H]=(0,c.useState)({});(0,c.useEffect)(()=>{I()},[]);let I=async()=>{try{t(!0);let[a,b,c]=await Promise.allSettled([d.apiClient.getSchedules(),d.apiClient.getDisplays(),d.apiClient.getPlaylists()]);"fulfilled"===a.status&&n(a.value||[]),"fulfilled"===b.status&&p(b.value||[]),"fulfilled"===c.status&&r(c.value||[])}catch(b){a.error(b.message||"Failed to load data")}finally{t(!1)}},J=()=>{let a={};return E.name.trim()||(a.name="Schedule name is required"),0===E.days.length&&(a.days="Select at least one day"),E.playlistId||(a.playlistId="Select a playlist"),0===E.deviceIds.length&&(a.deviceIds="Select at least one device"),(E.duration<1||E.duration>1440)&&(a.duration="Duration must be between 1 and 1440 minutes"),H(a),0===Object.keys(a).length},K=async()=>{if(J())try{v(!0);let b={...E,id:Math.random().toString(36).substr(2,9),active:!0,createdAt:new Date,updatedAt:new Date};n([...k,b]),N(),x(!1),a.success("Schedule created successfully")}catch(b){a.error(b.message||"Failed to create schedule")}finally{v(!1)}},L=async()=>{if(J()&&C)try{v(!0),n(k.map(a=>a.id===C.id?{...C,...E}:a)),N(),z(!1),a.success("Schedule updated successfully")}catch(b){a.error(b.message||"Failed to update schedule")}finally{v(!1)}},M=async()=>{if(C)try{v(!0),n(k.filter(a=>a.id!==C.id)),B(!1),D(null),a.success("Schedule deleted successfully")}catch(b){a.error(b.message||"Failed to delete schedule")}finally{v(!1)}},N=()=>{F({name:"",startTime:"09:00",duration:60,days:["Monday","Tuesday","Wednesday","Thursday","Friday"],timezone:"America/New_York",playlistId:"",deviceIds:[]}),H({}),D(null)};return s?(0,b.jsx)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow p-12",children:(0,b.jsx)(g.default,{size:"lg"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-50",children:"Schedules"}),(0,b.jsxs)("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:["Automate content playback with schedules (",k.length," total)"]})]}),(0,b.jsxs)("button",{onClick:()=>{N(),x(!0)},className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition font-semibold shadow-md hover:shadow-lg flex items-center gap-2 active:scale-95",children:[(0,b.jsx)(i.Icon,{name:"add",size:"lg",className:"text-white"}),(0,b.jsx)("span",{children:"Create Schedule"})]})]}),0===k.length?(0,b.jsx)(h.default,{icon:"schedules",title:"No schedules yet",description:"Create your first schedule to automate content playback on your devices",action:{label:"Create Schedule",onClick:()=>{N(),x(!0)}}}):(0,b.jsx)("div",{className:"space-y-4",children:k.map(a=>{let c;return(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-md p-6 hover:shadow-lg transition border-l-4 border-blue-500",children:[(0,b.jsx)("div",{className:"flex items-start justify-between",children:(0,b.jsxs)("div",{className:"flex items-start gap-4 flex-1",children:[(0,b.jsx)(i.Icon,{name:"schedules",size:"2xl",className:"text-blue-600 dark:text-blue-400"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-50 truncate",children:a.name}),(0,b.jsx)("span",{className:"px-3 py-1 text-xs font-semibold rounded-full bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200",children:"Active"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Time:"}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:((a,b)=>{let[c,d]=a.split(":").map(Number),e=Math.floor((60*c+d+b)/60)%24;return`${String(c).padStart(2,"0")}:${String(d).padStart(2,"0")} - ${String(e).padStart(2,"0")}:${String((60*c+d+b)%60).padStart(2,"0")}`})(a.startTime,a.duration)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Days:"}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:a.days.join(", ")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Playlist:"}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400 truncate",children:(c=a.playlistId,q.find(a=>a.id===c)?.name||"Unknown Playlist")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Devices:"}),(0,b.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 truncate",children:[a.deviceIds.length," device",1!==a.deviceIds.length?"s":""]})]})]})]})]})}),(0,b.jsxs)("div",{className:"flex gap-2 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,b.jsx)("button",{onClick:()=>{D(a),F({name:a.name,startTime:a.startTime,duration:a.duration,days:a.days,timezone:a.timezone,playlistId:a.playlistId,deviceIds:a.deviceIds}),H({}),z(!0)},className:"px-4 py-2 text-sm bg-blue-50 dark:bg-blue-900 text-blue-600 dark:text-blue-200 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-800 transition font-medium active:scale-95",children:"Edit"}),(0,b.jsx)("button",{onClick:()=>{D(a),F({name:a.name,startTime:a.startTime,duration:a.duration,days:a.days,timezone:a.timezone,playlistId:a.playlistId,deviceIds:a.deviceIds}),x(!0)},className:"px-4 py-2 text-sm bg-gray-50 dark:bg-gray-800 text-gray-600 dark:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition font-medium active:scale-95",children:"Duplicate"}),(0,b.jsx)("button",{onClick:()=>{D(a),B(!0)},className:"px-4 py-2 text-sm bg-red-50 dark:bg-red-900 text-red-600 dark:text-red-200 rounded-lg hover:bg-red-100 dark:hover:bg-red-800 transition font-medium active:scale-95",children:"Delete"})]})]},a.id)})}),k.length>0&&(0,b.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900 border border-blue-200 dark:border-blue-800 rounded-lg p-6",children:[(0,b.jsxs)("h4",{className:"font-semibold text-blue-900 dark:text-blue-200 mb-3 flex items-center gap-2",children:[(0,b.jsx)(i.Icon,{name:"info",size:"md",className:"text-blue-600 dark:text-blue-400"}),"Tips for Using Schedules"]}),(0,b.jsxs)("ul",{className:"text-sm text-blue-800 dark:text-blue-300 space-y-2",children:[(0,b.jsx)("li",{children:"• Schedules automatically control which playlist plays at specific times"}),(0,b.jsx)("li",{children:"• You can overlap schedules - the most recently created one takes precedence"}),(0,b.jsx)("li",{children:"• Devices will sync schedule changes automatically"}),(0,b.jsx)("li",{children:"• If a device is offline, it will apply the schedule when it comes back online"})]})]}),(w||y)&&(0,b.jsx)(e.default,{open:w||y,onClose:()=>{w&&x(!1),y&&z(!1),N()},title:C?"Edit Schedule":"Create Schedule",actions:[{label:"Cancel",onClick:()=>{w&&x(!1),y&&z(!1),N()},variant:"secondary"},{label:C?"Update":"Create",onClick:C?L:K,loading:u,variant:"primary"}],children:(0,b.jsxs)("div",{className:"space-y-6 max-h-96 overflow-y-auto",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-50 mb-2",children:["Schedule Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",value:E.name,onChange:a=>{F({...E,name:a.target.value}),G.name&&H({...G,name:""})},placeholder:"e.g., Morning Content, Holiday Special",className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-50 focus:ring-2 focus:ring-blue-500 transition ${G.name?"border-red-500":"border-gray-300 dark:border-gray-700"}`}),G.name&&(0,b.jsx)("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:G.name})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-50 mb-2",children:["Start Time ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(j,{value:E.startTime,onChange:a=>F({...E,startTime:a}),interval:15,showFormat:"24h"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-50 mb-2",children:["Duration (minutes) ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"number",value:E.duration,onChange:a=>{F({...E,duration:Math.max(1,parseInt(a.target.value)||0)}),G.duration&&H({...G,duration:""})},min:"1",max:"1440",className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-50 focus:ring-2 focus:ring-blue-500 transition ${G.duration?"border-red-500":"border-gray-300 dark:border-gray-700"}`}),G.duration&&(0,b.jsx)("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:G.duration})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-50 mb-2",children:["Timezone ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("select",{value:E.timezone,onChange:a=>F({...E,timezone:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-50 focus:ring-2 focus:ring-blue-500 transition",children:[(0,b.jsx)("option",{value:"America/New_York",children:"Eastern (America/New_York)"}),(0,b.jsx)("option",{value:"America/Chicago",children:"Central (America/Chicago)"}),(0,b.jsx)("option",{value:"America/Denver",children:"Mountain (America/Denver)"}),(0,b.jsx)("option",{value:"America/Los_Angeles",children:"Pacific (America/Los_Angeles)"}),(0,b.jsx)("option",{value:"UTC",children:"UTC"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-50 mb-3",children:["Schedule Days ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(l,{selected:E.days,onChange:a=>{F({...E,days:a}),G.days&&H({...G,days:""})}}),G.days&&(0,b.jsx)("p",{className:"text-red-600 dark:text-red-400 text-sm mt-2",children:G.days})]}),E.days.length>0&&(0,b.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900 border border-purple-200 dark:border-purple-800 rounded-lg p-3",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-purple-900 dark:text-purple-200 mb-2",children:"Next 10 Occurrences:"}),(0,b.jsx)("div",{className:"text-xs text-purple-800 dark:text-purple-300",children:(()=>{let a=[],b=new Date(new Date);for(;a.length<10;){let c=b.toLocaleDateString("en-US",{weekday:"long"});E.days.includes(c)&&a.push(b.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"2-digit"})),b.setDate(b.getDate()+1)}return a})().join(" • ")})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-50 mb-2",children:["Playlist ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("select",{value:E.playlistId,onChange:a=>{F({...E,playlistId:a.target.value}),G.playlistId&&H({...G,playlistId:""})},className:`w-full px-4 py-2 border rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-50 focus:ring-2 focus:ring-blue-500 transition ${G.playlistId?"border-red-500":"border-gray-300 dark:border-gray-700"}`,children:[(0,b.jsx)("option",{value:"",children:"Select a playlist..."}),q.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]}),G.playlistId&&(0,b.jsx)("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:G.playlistId})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-50 mb-2",children:["Devices ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto border border-gray-300 dark:border-gray-700 rounded-lg p-3 bg-white dark:bg-gray-800",children:0===o.length?(0,b.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No devices available"}):o.map(a=>(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:E.deviceIds.includes(a.id),onChange:b=>{let c=b.target.checked?[...E.deviceIds,a.id]:E.deviceIds.filter(b=>b!==a.id);F({...E,deviceIds:c}),G.deviceIds&&H({...G,deviceIds:""})},className:"rounded border-gray-300 dark:border-gray-700 text-blue-600 focus:ring-blue-500"}),(0,b.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:a.nickname})]},a.id))}),G.deviceIds&&(0,b.jsx)("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:G.deviceIds}),E.deviceIds.length>0&&(0,b.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:[E.deviceIds.length," device",1!==E.deviceIds.length?"s":""," selected"]})]})]})}),A&&C&&(0,b.jsx)(f.default,{open:A,onClose:()=>{B(!1),D(null)},title:"Delete Schedule",description:`Are you sure you want to delete "${C.name}"? This action cannot be undone.`,onConfirm:M,loading:u,variant:"danger"})]})}a.s(["default",()=>n],88667)}];

//# sourceMappingURL=web_src_app_dashboard_schedules_page_tsx_6f64b069._.js.map