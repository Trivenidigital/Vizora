module.exports=[81139,a=>{"use strict";var b=a.i(64239),c=a.i(872),d=a.i(79412),e=a.i(31525);let f=({label:a,value:c,unit:d,thresholds:e})=>(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,b.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:a}),(0,b.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[c.toFixed(1),d]})]}),(0,b.jsx)("div",{className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:`h-full ${c>=e.critical?"bg-red-500":c>=e.warning?"bg-yellow-500":"bg-green-500"} transition-all`,style:{width:`${Math.min(c,100)}%`}})})]});function g({health:a,showTemperature:c=!0,showUptime:d=!0,compact:g=!1,className:h=""}){var i;let j=(i=a.score)>=90?{label:"Excellent",color:"text-green-600 dark:text-green-400",bgColor:"bg-green-100 dark:bg-green-900"}:i>=70?{label:"Good",color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-100 dark:bg-blue-900"}:i>=50?{label:"Fair",color:"text-yellow-600 dark:text-yellow-400",bgColor:"bg-yellow-100 dark:bg-yellow-900"}:{label:"Poor",color:"text-red-600 dark:text-red-400",bgColor:"bg-red-100 dark:bg-red-900"};return g?(0,b.jsxs)("div",{className:`flex items-center gap-2 ${h}`,children:[(0,b.jsx)("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Health:"}),(0,b.jsxs)("div",{className:`px-2 py-1 rounded text-xs font-semibold ${j.bgColor} ${j.color}`,children:[a.score,"%"]}),(0,b.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:j.label})]}):(0,b.jsxs)("div",{className:`bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-800 p-4 space-y-4 ${h}`,children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-50",children:"Device Health"}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Updated ",new Date(a.lastHeartbeat).toLocaleTimeString()]})]}),(0,b.jsxs)("div",{className:`text-right ${j.color}`,children:[(0,b.jsxs)("div",{className:"text-2xl font-bold",children:[a.score,"%"]}),(0,b.jsx)("div",{className:"text-xs font-medium",children:j.label})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)("div",{className:"space-y-2",children:(0,b.jsx)(f,{label:"CPU",value:a.cpuUsage,unit:"%",thresholds:{warning:70,critical:85}})}),(0,b.jsx)("div",{className:"space-y-2",children:(0,b.jsx)(f,{label:"Memory",value:a.memoryUsage,unit:"%",thresholds:{warning:75,critical:90}})}),(0,b.jsx)("div",{className:"space-y-2",children:(0,b.jsx)(f,{label:"Storage",value:a.storageUsage,unit:"%",thresholds:{warning:80,critical:95}})}),c&&(0,b.jsx)("div",{className:"space-y-2",children:(0,b.jsx)(f,{label:"Temperature",value:a.temperature,unit:"¬∞C",thresholds:{warning:50,critical:65}})})]}),d&&(0,b.jsx)("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-800",children:(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"Uptime"}),(0,b.jsx)("span",{className:"font-semibold text-gray-900 dark:text-gray-50",children:a.uptime>=24?`${(a.uptime/24).toFixed(1)} days`:`${a.uptime.toFixed(1)} hours`})]})}),a.score<70&&(0,b.jsx)("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-800",children:(0,b.jsxs)("div",{className:`px-3 py-2 rounded text-xs font-medium ${j.bgColor} ${j.color} flex items-center gap-2`,children:[(0,b.jsx)(e.Icon,{name:"alertTriangle",size:"sm"}),(0,b.jsx)("span",{children:a.score<50?"Device health is poor. Recommended immediate maintenance.":"Device health is degraded. Monitor closely."})]})})]})}var h=a.i(51355),i=a.i(60547),j=a.i(16569),k=a.i(57052),l=a.i(38982);a.i(68997);var m=a.i(35660);let n=(a,b)=>{let c=40*Math.random()+60;return{deviceId:a,cpuUsage:Math.floor(80*Math.random()),memoryUsage:Math.floor(75*Math.random()),storageUsage:Math.floor(60*Math.random()),temperature:Math.floor(30*Math.random()+35),uptime:Math.floor(720*Math.random()),lastHeartbeat:new Date(Date.now()-3e5*Math.random()),score:Math.floor(c)}};function o(){let a=(0,k.useToast)(),[f,o]=(0,c.useState)([]),[p,q]=(0,c.useState)({}),[r,s]=(0,c.useState)(!0),[t,u]=(0,c.useState)(""),v=(0,l.useDebounce)(t,300),[w,x]=(0,c.useState)("health"),[y,z]=(0,c.useState)("desc"),[A,B]=(0,c.useState)("offline"),[C,D]=(0,c.useState)({}),{isConnected:E,isOffline:F}=(0,m.useRealtimeEvents)({enabled:!0,onHealthAlert:b=>{switch(console.log("[HealthPage] Health alert received:",b),D(a=>({...a,[b.deviceId]:b})),q(a=>{let c=f.find(a=>a.id===b.deviceId);if(!c)return a;let d=a[b.deviceId]||n(b.deviceId,c.nickname),e=d.score;return"critical"===b.severity?e=Math.max(0,e-20):"warning"===b.severity&&(e=Math.max(0,e-10)),{...a,[b.deviceId]:{...d,score:e}}}),b.severity){case"critical":a.error(`Critical: ${b.message} (${b.deviceType||"Device"})`);break;case"warning":a.warning(`Warning: ${b.message} (${b.deviceType||"Device"})`);break;default:a.info(`${b.message} (${b.deviceType||"Device"})`)}setTimeout(()=>{D(a=>{let c={...a};return delete c[b.deviceId],c})},3e4)},onConnectionChange:b=>{B(b?"connected":"offline"),b?a.info("Real-time health monitoring connected"):a.warning("Real-time health monitoring disconnected")}});(0,c.useEffect)(()=>{G()},[]),(0,c.useEffect)(()=>{let a=setInterval(()=>{G()},1e4);return()=>clearInterval(a)},[]);let G=async()=>{try{s(!0);let a=await d.apiClient.getDisplays(),b=a.data||a||[];o(b);let c={};b.forEach(a=>{c[a.id]=n(a.id,a.nickname)}),q(c)}catch(b){a.error(b.message||"Failed to load device health")}finally{s(!1)}},H=[...f.filter(a=>!v||a.nickname.toLowerCase().includes(v.toLowerCase())||a.location&&a.location.toLowerCase().includes(v.toLowerCase()))].sort((a,b)=>{let c=0,d=p[a.id],e=p[b.id];switch(w){case"name":c=a.nickname.localeCompare(b.nickname);break;case"health":c=(d?.score||0)-(e?.score||0);break;case"cpu":c=(d?.cpuUsage||0)-(e?.cpuUsage||0);break;case"memory":c=(d?.memoryUsage||0)-(e?.memoryUsage||0);break;default:c=0}return"asc"===y?c:-c}),I={totalDevices:f.length,healthy:f.filter(a=>(p[a.id]?.score||0)>=80).length,warning:f.filter(a=>{let b=p[a.id]?.score||0;return b>=50&&b<80}).length,critical:f.filter(a=>50>(p[a.id]?.score||0)).length};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(a.ToastContainer,{}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-50",children:"Device Health"}),(0,b.jsxs)("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:["Monitor device performance and system health","connected"===A&&(0,b.jsxs)("span",{className:"ml-2 inline-flex items-center gap-1 text-xs text-green-600 dark:text-green-400",children:[(0,b.jsx)("span",{className:"w-2 h-2 bg-green-600 dark:bg-green-400 rounded-full animate-pulse"}),"Real-time monitoring active"]}),"offline"===A&&(0,b.jsxs)("span",{className:"ml-2 inline-flex items-center gap-1 text-xs text-yellow-600 dark:text-yellow-400",children:[(0,b.jsx)("span",{className:"w-2 h-2 bg-yellow-600 dark:bg-yellow-400 rounded-full"}),"Polling mode"]})]})]}),(0,b.jsxs)("button",{onClick:G,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition font-semibold shadow-md hover:shadow-lg flex items-center gap-2",children:[(0,b.jsx)(e.Icon,{name:"download",size:"lg",className:"text-white"}),(0,b.jsx)("span",{children:"Refresh"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsx)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow p-6 border-t-4 border-blue-500",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Devices"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-50 mt-2",children:I.totalDevices})]}),(0,b.jsx)(e.Icon,{name:"devices",size:"3xl",className:"text-blue-500 opacity-20"})]})}),(0,b.jsx)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow p-6 border-t-4 border-green-500",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Healthy"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-2",children:I.healthy})]}),(0,b.jsx)(e.Icon,{name:"success",size:"3xl",className:"text-green-500 opacity-20"})]})}),(0,b.jsx)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow p-6 border-t-4 border-yellow-500",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Warnings"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-2",children:I.warning})]}),(0,b.jsx)(e.Icon,{name:"warning",size:"3xl",className:"text-yellow-500 opacity-20"})]})}),(0,b.jsx)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow p-6 border-t-4 border-red-500",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Critical"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400 mt-2",children:I.critical})]}),(0,b.jsx)(e.Icon,{name:"error",size:"3xl",className:"text-red-500 opacity-20"})]})})]}),(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 md:items-end",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)(j.default,{value:t,onChange:u,placeholder:"Search devices by name or location..."})}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("select",{value:w,onChange:a=>x(a.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-50 focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"health",children:"Sort by Health"}),(0,b.jsx)("option",{value:"name",children:"Sort by Name"}),(0,b.jsx)("option",{value:"cpu",children:"Sort by CPU"}),(0,b.jsx)("option",{value:"memory",children:"Sort by Memory"})]}),(0,b.jsx)("button",{onClick:()=>z("asc"===y?"desc":"asc"),className:"px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-50 hover:bg-gray-50 dark:hover:bg-gray-700 transition font-medium",children:"asc"===y?"‚Üë":"‚Üì"})]})]}),r?(0,b.jsx)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow p-12",children:(0,b.jsx)(h.default,{size:"lg"})}):0===H.length?(0,b.jsx)(i.default,{icon:"devices",title:"No devices found",description:"Pair a device to begin monitoring health metrics",action:{label:"Pair Device",onClick:()=>window.location.href="/dashboard/devices/pair"}}):(0,b.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:H.map(a=>{var c,d;let e=p[a.id];if(!e)return null;let f=(c=e.score)>=90?{label:"Excellent",color:"text-green-700 dark:text-green-300"}:c>=70?{label:"Good",color:"text-blue-700 dark:text-blue-300"}:c>=50?{label:"Fair",color:"text-yellow-700 dark:text-yellow-300"}:{label:"Poor",color:"text-red-700 dark:text-red-300"};return(0,b.jsxs)("div",{className:`rounded-lg shadow border p-6 transition-all hover:shadow-lg ${(d=e.score)>=90?"bg-green-50 dark:bg-green-900 border-green-200 dark:border-green-700":d>=70?"bg-blue-50 dark:bg-blue-900 border-blue-200 dark:border-blue-700":d>=50?"bg-yellow-50 dark:bg-yellow-900 border-yellow-200 dark:border-yellow-700":"bg-red-50 dark:bg-red-900 border-red-200 dark:border-red-700"}`,children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-50",children:a.nickname}),a.location&&(0,b.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["üìç ",a.location]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:`text-2xl font-bold ${f.color}`,children:e.score}),(0,b.jsx)("p",{className:`text-xs font-semibold ${f.color}`,children:f.label})]})]}),(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsx)(g,{health:e,showTemperature:!0,showUptime:!0,compact:!1})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,b.jsxs)("div",{className:"bg-white/50 dark:bg-gray-800/50 p-2 rounded",children:[(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-xs",children:"Uptime"}),(0,b.jsxs)("p",{className:"font-medium text-gray-900 dark:text-gray-50",children:[Math.floor(e.uptime/24),"d ",e.uptime%24,"h"]})]}),(0,b.jsxs)("div",{className:"bg-white/50 dark:bg-gray-800/50 p-2 rounded",children:[(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-xs",children:"Temp"}),(0,b.jsxs)("p",{className:"font-medium text-gray-900 dark:text-gray-50",children:[e.temperature,"¬∞C"]})]}),(0,b.jsxs)("div",{className:"bg-white/50 dark:bg-gray-800/50 p-2 rounded col-span-2",children:[(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-xs mb-1",children:"Last Heartbeat"}),(0,b.jsxs)("p",{className:"font-medium text-gray-900 dark:text-gray-50 text-xs",children:[Math.round((Date.now()-e.lastHeartbeat.getTime())/1e3),"s ago"]})]})]}),C[a.id]&&(0,b.jsx)("div",{className:`mt-4 border rounded p-3 animate-pulse ${"critical"===C[a.id].severity?"bg-red-100 dark:bg-red-900 border-red-300 dark:border-red-700":"warning"===C[a.id].severity?"bg-yellow-100 dark:bg-yellow-900 border-yellow-300 dark:border-yellow-700":"bg-blue-100 dark:bg-blue-900 border-blue-300 dark:border-blue-700"}`,children:(0,b.jsxs)("p",{className:`text-sm font-semibold ${"critical"===C[a.id].severity?"text-red-800 dark:text-red-200":"warning"===C[a.id].severity?"text-yellow-800 dark:text-yellow-200":"text-blue-800 dark:text-blue-200"}`,children:["üî¥ ",C[a.id].message]})}),!C[a.id]&&e.score<50&&(0,b.jsx)("div",{className:"mt-4 bg-red-100 dark:bg-red-900 border border-red-300 dark:border-red-700 rounded p-3",children:(0,b.jsx)("p",{className:"text-sm font-semibold text-red-800 dark:text-red-200",children:"‚ö†Ô∏è Critical: Device performance degraded. Consider maintenance."})}),!C[a.id]&&e.score<70&&e.score>=50&&(0,b.jsx)("div",{className:"mt-4 bg-yellow-100 dark:bg-yellow-900 border border-yellow-300 dark:border-yellow-700 rounded p-3",children:(0,b.jsx)("p",{className:"text-sm font-semibold text-yellow-800 dark:text-yellow-200",children:"‚ö° Warning: Some metrics need attention."})})]},a.id)})})]})}a.s(["default",()=>o],81139)}];

//# sourceMappingURL=web_src_app_dashboard_health_page_tsx_1fa15d42._.js.map